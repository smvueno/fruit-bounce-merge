const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-C0JWhwSj.js","assets/webworkerAll-BkQ_Bj8e.js","assets/colorToUniform-C2GHuDhf.js","assets/CanvasPool-D7GNFxA_.js","assets/WebGPURenderer-Bqh5VnsE.js","assets/SharedSystems-C3zCXYQy.js","assets/WebGLRenderer-uCdkQj8q.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();function Ua(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kc={exports:{}},la={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function kx(){if(Np)return la;Np=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var h in l)h!=="key"&&(o[h]=l[h])}else o=l;return l=o.ref,{$$typeof:n,type:r,key:c,ref:l!==void 0?l:null,props:o}}return la.Fragment=t,la.jsx=i,la.jsxs=i,la}var jp;function Nx(){return jp||(jp=1,Kc.exports=kx()),Kc.exports}var j=Nx(),Wc={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function jx(){if(Dp)return gt;Dp=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function _(E){return E===null||typeof E!="object"?null:(E=b&&E[b]||E["@@iterator"],typeof E=="function"?E:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function R(E,D,$){this.props=E,this.context=D,this.refs=T,this.updater=$||S}R.prototype.isReactComponent={},R.prototype.setState=function(E,D){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,D,"setState")},R.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function M(){}M.prototype=R.prototype;function k(E,D,$){this.props=E,this.context=D,this.refs=T,this.updater=$||S}var H=k.prototype=new M;H.constructor=k,A(H,R.prototype),H.isPureReactComponent=!0;var X=Array.isArray;function P(){}var L={H:null,A:null,T:null,S:null},st=Object.prototype.hasOwnProperty;function lt(E,D,$){var Q=$.ref;return{$$typeof:n,type:E,key:D,ref:Q!==void 0?Q:null,props:$}}function nt(E,D){return lt(E.type,D,E.props)}function rt(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function yt(E){var D={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function($){return D[$]})}var xt=/\/+/g;function Dt(E,D){return typeof E=="object"&&E!==null&&E.key!=null?yt(""+E.key):D.toString(36)}function Kt(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(P,P):(E.status="pending",E.then(function(D){E.status==="pending"&&(E.status="fulfilled",E.value=D)},function(D){E.status==="pending"&&(E.status="rejected",E.reason=D)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function x(E,D,$,Q,J){var et=typeof E;(et==="undefined"||et==="boolean")&&(E=null);var tt=!1;if(E===null)tt=!0;else switch(et){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(E.$$typeof){case n:case t:tt=!0;break;case g:return tt=E._init,x(tt(E._payload),D,$,Q,J)}}if(tt)return J=J(E),tt=Q===""?"."+Dt(E,0):Q,X(J)?($="",tt!=null&&($=tt.replace(xt,"$&/")+"/"),x(J,D,$,"",function(wt){return wt})):J!=null&&(rt(J)&&(J=nt(J,$+(J.key==null||E&&E.key===J.key?"":(""+J.key).replace(xt,"$&/")+"/")+tt)),D.push(J)),1;tt=0;var ut=Q===""?".":Q+":";if(X(E))for(var pt=0;pt<E.length;pt++)Q=E[pt],et=ut+Dt(Q,pt),tt+=x(Q,D,$,et,J);else if(pt=_(E),typeof pt=="function")for(E=pt.call(E),pt=0;!(Q=E.next()).done;)Q=Q.value,et=ut+Dt(Q,pt++),tt+=x(Q,D,$,et,J);else if(et==="object"){if(typeof E.then=="function")return x(Kt(E),D,$,Q,J);throw D=String(E),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return tt}function C(E,D,$){if(E==null)return E;var Q=[],J=0;return x(E,Q,"","",function(et){return D.call($,et,J++)}),Q}function O(E){if(E._status===-1){var D=E._result;D=D(),D.then(function($){(E._status===0||E._status===-1)&&(E._status=1,E._result=$)},function($){(E._status===0||E._status===-1)&&(E._status=2,E._result=$)}),E._status===-1&&(E._status=0,E._result=D)}if(E._status===1)return E._result.default;throw E._result}var B=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},Y={map:C,forEach:function(E,D,$){C(E,function(){D.apply(this,arguments)},$)},count:function(E){var D=0;return C(E,function(){D++}),D},toArray:function(E){return C(E,function(D){return D})||[]},only:function(E){if(!rt(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return gt.Activity=y,gt.Children=Y,gt.Component=R,gt.Fragment=i,gt.Profiler=l,gt.PureComponent=k,gt.StrictMode=r,gt.Suspense=f,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,gt.__COMPILER_RUNTIME={__proto__:null,c:function(E){return L.H.useMemoCache(E)}},gt.cache=function(E){return function(){return E.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(E,D,$){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Q=A({},E.props),J=E.key;if(D!=null)for(et in D.key!==void 0&&(J=""+D.key),D)!st.call(D,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&D.ref===void 0||(Q[et]=D[et]);var et=arguments.length-2;if(et===1)Q.children=$;else if(1<et){for(var tt=Array(et),ut=0;ut<et;ut++)tt[ut]=arguments[ut+2];Q.children=tt}return lt(E.type,J,Q)},gt.createContext=function(E){return E={$$typeof:c,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:o,_context:E},E},gt.createElement=function(E,D,$){var Q,J={},et=null;if(D!=null)for(Q in D.key!==void 0&&(et=""+D.key),D)st.call(D,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(J[Q]=D[Q]);var tt=arguments.length-2;if(tt===1)J.children=$;else if(1<tt){for(var ut=Array(tt),pt=0;pt<tt;pt++)ut[pt]=arguments[pt+2];J.children=ut}if(E&&E.defaultProps)for(Q in tt=E.defaultProps,tt)J[Q]===void 0&&(J[Q]=tt[Q]);return lt(E,et,J)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(E){return{$$typeof:h,render:E}},gt.isValidElement=rt,gt.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:O}},gt.memo=function(E,D){return{$$typeof:p,type:E,compare:D===void 0?null:D}},gt.startTransition=function(E){var D=L.T,$={};L.T=$;try{var Q=E(),J=L.S;J!==null&&J($,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(P,B)}catch(et){B(et)}finally{D!==null&&$.types!==null&&(D.types=$.types),L.T=D}},gt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},gt.use=function(E){return L.H.use(E)},gt.useActionState=function(E,D,$){return L.H.useActionState(E,D,$)},gt.useCallback=function(E,D){return L.H.useCallback(E,D)},gt.useContext=function(E){return L.H.useContext(E)},gt.useDebugValue=function(){},gt.useDeferredValue=function(E,D){return L.H.useDeferredValue(E,D)},gt.useEffect=function(E,D){return L.H.useEffect(E,D)},gt.useEffectEvent=function(E){return L.H.useEffectEvent(E)},gt.useId=function(){return L.H.useId()},gt.useImperativeHandle=function(E,D,$){return L.H.useImperativeHandle(E,D,$)},gt.useInsertionEffect=function(E,D){return L.H.useInsertionEffect(E,D)},gt.useLayoutEffect=function(E,D){return L.H.useLayoutEffect(E,D)},gt.useMemo=function(E,D){return L.H.useMemo(E,D)},gt.useOptimistic=function(E,D){return L.H.useOptimistic(E,D)},gt.useReducer=function(E,D,$){return L.H.useReducer(E,D,$)},gt.useRef=function(E){return L.H.useRef(E)},gt.useState=function(E){return L.H.useState(E)},gt.useSyncExternalStore=function(E,D,$){return L.H.useSyncExternalStore(E,D,$)},gt.useTransition=function(){return L.H.useTransition()},gt.version="19.2.3",gt}var Up;function pd(){return Up||(Up=1,Wc.exports=jx()),Wc.exports}var Nt=pd();const Dx=Ua(Nt);var Qc={exports:{}},oa={},Zc={exports:{}},Jc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp;function Ux(){return zp||(zp=1,(function(n){function t(x,C){var O=x.length;x.push(C);t:for(;0<O;){var B=O-1>>>1,Y=x[B];if(0<l(Y,C))x[B]=C,x[O]=Y,O=B;else break t}}function i(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var C=x[0],O=x.pop();if(O!==C){x[0]=O;t:for(var B=0,Y=x.length,E=Y>>>1;B<E;){var D=2*(B+1)-1,$=x[D],Q=D+1,J=x[Q];if(0>l($,O))Q<Y&&0>l(J,$)?(x[B]=J,x[Q]=O,B=Q):(x[B]=$,x[D]=O,B=D);else if(Q<Y&&0>l(J,O))x[B]=J,x[Q]=O,B=Q;else break t}}return C}function l(x,C){var O=x.sortIndex-C.sortIndex;return O!==0?O:x.id-C.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],p=[],g=1,y=null,b=3,_=!1,S=!1,A=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function H(x){for(var C=i(p);C!==null;){if(C.callback===null)r(p);else if(C.startTime<=x)r(p),C.sortIndex=C.expirationTime,t(f,C);else break;C=i(p)}}function X(x){if(A=!1,H(x),!S)if(i(f)!==null)S=!0,P||(P=!0,yt());else{var C=i(p);C!==null&&Kt(X,C.startTime-x)}}var P=!1,L=-1,st=5,lt=-1;function nt(){return T?!0:!(n.unstable_now()-lt<st)}function rt(){if(T=!1,P){var x=n.unstable_now();lt=x;var C=!0;try{t:{S=!1,A&&(A=!1,M(L),L=-1),_=!0;var O=b;try{e:{for(H(x),y=i(f);y!==null&&!(y.expirationTime>x&&nt());){var B=y.callback;if(typeof B=="function"){y.callback=null,b=y.priorityLevel;var Y=B(y.expirationTime<=x);if(x=n.unstable_now(),typeof Y=="function"){y.callback=Y,H(x),C=!0;break e}y===i(f)&&r(f),H(x)}else r(f);y=i(f)}if(y!==null)C=!0;else{var E=i(p);E!==null&&Kt(X,E.startTime-x),C=!1}}break t}finally{y=null,b=O,_=!1}C=void 0}}finally{C?yt():P=!1}}}var yt;if(typeof k=="function")yt=function(){k(rt)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,Dt=xt.port2;xt.port1.onmessage=rt,yt=function(){Dt.postMessage(null)}}else yt=function(){R(rt,0)};function Kt(x,C){L=R(function(){x(n.unstable_now())},C)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(x){x.callback=null},n.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):st=0<x?Math.floor(1e3/x):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(x){switch(b){case 1:case 2:case 3:var C=3;break;default:C=b}var O=b;b=C;try{return x()}finally{b=O}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(x,C){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var O=b;b=x;try{return C()}finally{b=O}},n.unstable_scheduleCallback=function(x,C,O){var B=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?B+O:B):O=B,x){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,x={id:g++,callback:C,priorityLevel:x,startTime:O,expirationTime:Y,sortIndex:-1},O>B?(x.sortIndex=O,t(p,x),i(f)===null&&x===i(p)&&(A?(M(L),L=-1):A=!0,Kt(X,O-B))):(x.sortIndex=Y,t(f,x),S||_||(S=!0,P||(P=!0,yt()))),x},n.unstable_shouldYield=nt,n.unstable_wrapCallback=function(x){var C=b;return function(){var O=b;b=C;try{return x.apply(this,arguments)}finally{b=O}}}})(Jc)),Jc}var Bp;function zx(){return Bp||(Bp=1,Zc.exports=Ux()),Zc.exports}var th={exports:{}},Me={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function Bx(){if(Pp)return Me;Pp=1;var n=pd();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Me.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Me.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(f,p,null,g)},Me.flushSync=function(f){var p=c.T,g=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=p,r.p=g,r.d.f()}},Me.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},Me.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Me.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:_}):g==="script"&&r.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Me.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},Me.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin);r.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Me.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=h(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},Me.requestFormReset=function(f){r.d.r(f)},Me.unstable_batchedUpdates=function(f,p){return f(p)},Me.useFormState=function(f,p,g){return c.H.useFormState(f,p,g)},Me.useFormStatus=function(){return c.H.useHostTransitionStatus()},Me.version="19.2.3",Me}var Lp;function Px(){if(Lp)return th.exports;Lp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),th.exports=Bx(),th.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function Lx(){if(Gp)return oa;Gp=1;var n=zx(),t=pd(),i=Px();function r(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function c(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function h(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function f(e){if(o(e)!==e)throw Error(r(188))}function p(e){var s=e.alternate;if(!s){if(s=o(e),s===null)throw Error(r(188));return s!==e?null:e}for(var a=e,u=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return f(d),e;if(m===u)return f(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==u.return)a=d,u=m;else{for(var v=!1,w=d.child;w;){if(w===a){v=!0,a=d,u=m;break}if(w===u){v=!0,u=d,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,u=d;break}if(w===u){v=!0,u=m,a=d;break}w=w.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:s}function g(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=g(e),s!==null)return s;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),k=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),lt=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function yt(e){return e===null||typeof e!="object"?null:(e=rt&&e[rt]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Symbol.for("react.client.reference");function Dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case X:return"Suspense";case P:return"SuspenseList";case lt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case k:return e.displayName||"Context";case M:return(e._context.displayName||"Context")+".Consumer";case H:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return s=e.displayName||null,s!==null?s:Dt(e.type)||"Memo";case st:s=e._payload,e=e._init;try{return Dt(e(s))}catch{}}return null}var Kt=Array.isArray,x=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},B=[],Y=-1;function E(e){return{current:e}}function D(e){0>Y||(e.current=B[Y],B[Y]=null,Y--)}function $(e,s){Y++,B[Y]=e.current,e.current=s}var Q=E(null),J=E(null),et=E(null),tt=E(null);function ut(e,s){switch($(et,s),$(J,e),$(Q,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?ep(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=ep(s),e=ip(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}D(Q),$(Q,e)}function pt(){D(Q),D(J),D(et)}function wt(e){e.memoizedState!==null&&$(tt,e);var s=Q.current,a=ip(s,e.type);s!==a&&($(J,e),$(Q,a))}function Ne(e){J.current===e&&(D(Q),D(J)),tt.current===e&&(D(tt),sa._currentValue=O)}var _e,He;function me(e){if(_e===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);_e=s&&s[1]||"",He=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+e+He}var vt=!1;function Et(e,s){if(!e||vt)return"";vt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(V){var I=V}Reflect.construct(e,[],W)}else{try{W.call()}catch(V){I=V}e.call(W.prototype)}}else{try{throw Error()}catch(V){I=V}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(V){if(V&&I&&typeof V.stack=="string")return[V.stack,I.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var N=v.split(`
`),q=w.split(`
`);for(d=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(u===N.length||d===q.length)for(u=N.length-1,d=q.length-1;1<=u&&0<=d&&N[u]!==q[d];)d--;for(;1<=u&&0<=d;u--,d--)if(N[u]!==q[d]){if(u!==1||d!==1)do if(u--,d--,0>d||N[u]!==q[d]){var F=`
`+N[u].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=u&&0<=d);break}}}finally{vt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?me(a):""}function Ba(e,s){switch(e.tag){case 26:case 27:case 5:return me(e.type);case 16:return me("Lazy");case 13:return e.child!==s&&s!==null?me("Suspense Fallback"):me("Suspense");case 19:return me("SuspenseList");case 0:case 15:return Et(e.type,!1);case 11:return Et(e.type.render,!1);case 1:return Et(e.type,!0);case 31:return me("Activity");default:return""}}function Pa(e){try{var s="",a=null;do s+=Ba(e,a),a=e,e=e.return;while(e);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var La=Object.prototype.hasOwnProperty,Uo=n.unstable_scheduleCallback,zo=n.unstable_cancelCallback,u_=n.unstable_shouldYield,c_=n.unstable_requestPaint,$e=n.unstable_now,h_=n.unstable_getCurrentPriorityLevel,Nd=n.unstable_ImmediatePriority,jd=n.unstable_UserBlockingPriority,Ga=n.unstable_NormalPriority,d_=n.unstable_LowPriority,Dd=n.unstable_IdlePriority,f_=n.log,m_=n.unstable_setDisableYieldValue,pr=null,Ie=null;function as(e){if(typeof f_=="function"&&m_(e),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(pr,e)}catch{}}var Ye=Math.clz32?Math.clz32:y_,p_=Math.log,g_=Math.LN2;function y_(e){return e>>>=0,e===0?32:31-(p_(e)/g_|0)|0}var qa=256,Ha=262144,$a=4194304;function zs(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ia(e,s,a){var u=e.pendingLanes;if(u===0)return 0;var d=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var w=u&134217727;return w!==0?(u=w&~m,u!==0?d=zs(u):(v&=w,v!==0?d=zs(v):a||(a=w&~e,a!==0&&(d=zs(a))))):(w=u&~m,w!==0?d=zs(w):v!==0?d=zs(v):a||(a=u&~e,a!==0&&(d=zs(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function gr(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function v_(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ud(){var e=$a;return $a<<=1,($a&62914560)===0&&($a=4194304),e}function Bo(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function yr(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function __(e,s,a,u,d,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var w=e.entanglements,N=e.expirationTimes,q=e.hiddenUpdates;for(a=v&~a;0<a;){var F=31-Ye(a),W=1<<F;w[F]=0,N[F]=-1;var I=q[F];if(I!==null)for(q[F]=null,F=0;F<I.length;F++){var V=I[F];V!==null&&(V.lane&=-536870913)}a&=~W}u!==0&&zd(e,u,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~s))}function zd(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var u=31-Ye(s);e.entangledLanes|=s,e.entanglements[u]=e.entanglements[u]|1073741824|a&261930}function Bd(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var u=31-Ye(a),d=1<<u;d&s|e[u]&s&&(e[u]|=s),a&=~d}}function Pd(e,s){var a=s&-s;return a=(a&42)!==0?1:Po(a),(a&(e.suspendedLanes|s))!==0?0:a}function Po(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Lo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ld(){var e=C.p;return e!==0?e:(e=window.event,e===void 0?32:Ep(e.type))}function Gd(e,s){var a=C.p;try{return C.p=e,s()}finally{C.p=a}}var ls=Math.random().toString(36).slice(2),be="__reactFiber$"+ls,je="__reactProps$"+ls,dn="__reactContainer$"+ls,Go="__reactEvents$"+ls,b_="__reactListeners$"+ls,x_="__reactHandles$"+ls,qd="__reactResources$"+ls,vr="__reactMarker$"+ls;function qo(e){delete e[be],delete e[je],delete e[Go],delete e[b_],delete e[x_]}function fn(e){var s=e[be];if(s)return s;for(var a=e.parentNode;a;){if(s=a[dn]||a[be]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=up(e);e!==null;){if(a=e[be])return a;e=up(e)}return s}e=a,a=e.parentNode}return null}function mn(e){if(e=e[be]||e[dn]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function _r(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(r(33))}function pn(e){var s=e[qd];return s||(s=e[qd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function pe(e){e[vr]=!0}var Hd=new Set,$d={};function Bs(e,s){gn(e,s),gn(e+"Capture",s)}function gn(e,s){for($d[e]=s,e=0;e<s.length;e++)Hd.add(s[e])}var w_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Id={},Yd={};function S_(e){return La.call(Yd,e)?!0:La.call(Id,e)?!1:w_.test(e)?Yd[e]=!0:(Id[e]=!0,!1)}function Ya(e,s,a){if(S_(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function Va(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function zi(e,s,a,u){if(u===null)e.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+u)}}function ri(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vd(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function T_(e,s,a){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,m=u.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Ho(e){if(!e._valueTracker){var s=Vd(e)?"checked":"value";e._valueTracker=T_(e,s,""+e[s])}}function Fd(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return e&&(u=Vd(e)?e.checked?"true":"false":e.value),e=u,e!==a?(s.setValue(e),!0):!1}function Fa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var E_=/[\n"\\]/g;function ai(e){return e.replace(E_,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function $o(e,s,a,u,d,m,v,w){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),s!=null?v==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+ri(s)):e.value!==""+ri(s)&&(e.value=""+ri(s)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),s!=null?Io(e,v,ri(s)):a!=null?Io(e,v,ri(a)):u!=null&&e.removeAttribute("value"),d==null&&m!=null&&(e.defaultChecked=!!m),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+ri(w):e.removeAttribute("name")}function Xd(e,s,a,u,d,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ho(e);return}a=a!=null?""+ri(a):"",s=s!=null?""+ri(s):a,w||s===e.value||(e.value=s),e.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=w?e.checked:!!u,e.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Ho(e)}function Io(e,s,a){s==="number"&&Fa(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function yn(e,s,a,u){if(e=e.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=s.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&u&&(e[a].defaultSelected=!0)}else{for(a=""+ri(a),s=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,u&&(e[d].defaultSelected=!0);return}s!==null||e[d].disabled||(s=e[d])}s!==null&&(s.selected=!0)}}function Kd(e,s,a){if(s!=null&&(s=""+ri(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+ri(a):""}function Wd(e,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(r(92));if(Kt(u)){if(1<u.length)throw Error(r(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=ri(s),e.defaultValue=a,u=e.textContent,u===a&&u!==""&&u!==null&&(e.value=u),Ho(e)}function vn(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var A_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qd(e,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":u?e.setProperty(s,a):typeof a!="number"||a===0||A_.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Zd(e,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(e=e.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&a[d]!==u&&Qd(e,d,u)}else for(var m in s)s.hasOwnProperty(m)&&Qd(e,m,s[m])}function Yo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),M_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(e){return M_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Bi(){}var Vo=null;function Fo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _n=null,bn=null;function Jd(e){var s=mn(e);if(s&&(e=s.stateNode)){var a=e[je]||null;t:switch(e=s.stateNode,s.type){case"input":if($o(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ai(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==e&&u.form===e.form){var d=u[je]||null;if(!d)throw Error(r(90));$o(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===e.form&&Fd(u)}break t;case"textarea":Kd(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&yn(e,!!a.multiple,s,!1)}}}var Xo=!1;function tf(e,s,a){if(Xo)return e(s,a);Xo=!0;try{var u=e(s);return u}finally{if(Xo=!1,(_n!==null||bn!==null)&&(Ul(),_n&&(s=_n,e=bn,bn=_n=null,Jd(s),e)))for(s=0;s<e.length;s++)Jd(e[s])}}function br(e,s){var a=e.stateNode;if(a===null)return null;var u=a[je]||null;if(u===null)return null;a=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ko=!1;if(Pi)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){Ko=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{Ko=!1}var os=null,Wo=null,Ka=null;function ef(){if(Ka)return Ka;var e,s=Wo,a=s.length,u,d="value"in os?os.value:os.textContent,m=d.length;for(e=0;e<a&&s[e]===d[e];e++);var v=a-e;for(u=1;u<=v&&s[a-u]===d[m-u];u++);return Ka=d.slice(e,1<u?1-u:void 0)}function Wa(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Qa(){return!0}function sf(){return!1}function De(e){function s(a,u,d,m,v){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(a=e[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Qa:sf,this.isPropagationStopped=sf,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),s}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Za=De(Ps),wr=y({},Ps,{view:0,detail:0}),R_=De(wr),Qo,Zo,Sr,Ja=y({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sr&&(Sr&&e.type==="mousemove"?(Qo=e.screenX-Sr.screenX,Zo=e.screenY-Sr.screenY):Zo=Qo=0,Sr=e),Qo)},movementY:function(e){return"movementY"in e?e.movementY:Zo}}),nf=De(Ja),O_=y({},Ja,{dataTransfer:0}),k_=De(O_),N_=y({},wr,{relatedTarget:0}),Jo=De(N_),j_=y({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),D_=De(j_),U_=y({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),z_=De(U_),B_=y({},Ps,{data:0}),rf=De(B_),P_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q_(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=G_[e])?!!s[e]:!1}function tu(){return q_}var H_=y({},wr,{key:function(e){if(e.key){var s=P_[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Wa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return e.type==="keypress"?Wa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$_=De(H_),I_=y({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),af=De(I_),Y_=y({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),V_=De(Y_),F_=y({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),X_=De(F_),K_=y({},Ja,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),W_=De(K_),Q_=y({},Ps,{newState:0,oldState:0}),Z_=De(Q_),J_=[9,13,27,32],eu=Pi&&"CompositionEvent"in window,Tr=null;Pi&&"documentMode"in document&&(Tr=document.documentMode);var tb=Pi&&"TextEvent"in window&&!Tr,lf=Pi&&(!eu||Tr&&8<Tr&&11>=Tr),of=" ",uf=!1;function cf(e,s){switch(e){case"keyup":return J_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xn=!1;function eb(e,s){switch(e){case"compositionend":return hf(s);case"keypress":return s.which!==32?null:(uf=!0,of);case"textInput":return e=s.data,e===of&&uf?null:e;default:return null}}function ib(e,s){if(xn)return e==="compositionend"||!eu&&cf(e,s)?(e=ef(),Ka=Wo=os=null,xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return lf&&s.locale!=="ko"?null:s.data;default:return null}}var sb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!sb[e.type]:s==="textarea"}function ff(e,s,a,u){_n?bn?bn.push(u):bn=[u]:_n=u,s=Hl(s,"onChange"),0<s.length&&(a=new Za("onChange","change",null,a,u),e.push({event:a,listeners:s}))}var Er=null,Ar=null;function nb(e){K0(e,0)}function tl(e){var s=_r(e);if(Fd(s))return e}function mf(e,s){if(e==="change")return s}var pf=!1;if(Pi){var iu;if(Pi){var su="oninput"in document;if(!su){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),su=typeof gf.oninput=="function"}iu=su}else iu=!1;pf=iu&&(!document.documentMode||9<document.documentMode)}function yf(){Er&&(Er.detachEvent("onpropertychange",vf),Ar=Er=null)}function vf(e){if(e.propertyName==="value"&&tl(Ar)){var s=[];ff(s,Ar,e,Fo(e)),tf(nb,s)}}function rb(e,s,a){e==="focusin"?(yf(),Er=s,Ar=a,Er.attachEvent("onpropertychange",vf)):e==="focusout"&&yf()}function ab(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tl(Ar)}function lb(e,s){if(e==="click")return tl(s)}function ob(e,s){if(e==="input"||e==="change")return tl(s)}function ub(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Ve=typeof Object.is=="function"?Object.is:ub;function Cr(e,s){if(Ve(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!La.call(s,d)||!Ve(e[d],s[d]))return!1}return!0}function _f(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bf(e,s){var a=_f(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=s&&u>=s)return{node:a,offset:s-e};e=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=_f(a)}}function xf(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?xf(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function wf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Fa(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=Fa(e.document)}return s}function nu(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var cb=Pi&&"documentMode"in document&&11>=document.documentMode,wn=null,ru=null,Mr=null,au=!1;function Sf(e,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;au||wn==null||wn!==Fa(u)||(u=wn,"selectionStart"in u&&nu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Mr&&Cr(Mr,u)||(Mr=u,u=Hl(ru,"onSelect"),0<u.length&&(s=new Za("onSelect","select",null,s,a),e.push({event:s,listeners:u}),s.target=wn)))}function Ls(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var Sn={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},lu={},Tf={};Pi&&(Tf=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);function Gs(e){if(lu[e])return lu[e];if(!Sn[e])return e;var s=Sn[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in Tf)return lu[e]=s[a];return e}var Ef=Gs("animationend"),Af=Gs("animationiteration"),Cf=Gs("animationstart"),hb=Gs("transitionrun"),db=Gs("transitionstart"),fb=Gs("transitioncancel"),Mf=Gs("transitionend"),Rf=new Map,ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ou.push("scrollEnd");function gi(e,s){Rf.set(e,s),Bs(s,[e])}var el=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},li=[],Tn=0,uu=0;function il(){for(var e=Tn,s=uu=Tn=0;s<e;){var a=li[s];li[s++]=null;var u=li[s];li[s++]=null;var d=li[s];li[s++]=null;var m=li[s];if(li[s++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}m!==0&&Of(a,d,m)}}function sl(e,s,a,u){li[Tn++]=e,li[Tn++]=s,li[Tn++]=a,li[Tn++]=u,uu|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function cu(e,s,a,u){return sl(e,s,a,u),nl(e)}function qs(e,s){return sl(e,null,null,s),nl(e)}function Of(e,s,a){e.lanes|=a;var u=e.alternate;u!==null&&(u.lanes|=a);for(var d=!1,m=e.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,d&&s!==null&&(d=31-Ye(a),e=m.hiddenUpdates,u=e[d],u===null?e[d]=[s]:u.push(s),s.lane=a|536870912),m):null}function nl(e){if(50<Wr)throw Wr=0,_c=null,Error(r(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var En={};function mb(e,s,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(e,s,a,u){return new mb(e,s,a,u)}function hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Li(e,s){var a=e.alternate;return a===null?(a=Fe(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function kf(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function rl(e,s,a,u,d,m){var v=0;if(u=e,typeof e=="function")hu(e)&&(v=1);else if(typeof e=="string")v=_x(e,a,Q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case lt:return e=Fe(31,a,s,d),e.elementType=lt,e.lanes=m,e;case A:return Hs(a.children,d,m,s);case T:v=8,d|=24;break;case R:return e=Fe(12,a,s,d|2),e.elementType=R,e.lanes=m,e;case X:return e=Fe(13,a,s,d),e.elementType=X,e.lanes=m,e;case P:return e=Fe(19,a,s,d),e.elementType=P,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:v=10;break t;case M:v=9;break t;case H:v=11;break t;case L:v=14;break t;case st:v=16,u=null;break t}v=29,a=Error(r(130,e===null?"null":typeof e,"")),u=null}return s=Fe(v,a,s,d),s.elementType=e,s.type=u,s.lanes=m,s}function Hs(e,s,a,u){return e=Fe(7,e,u,s),e.lanes=a,e}function du(e,s,a){return e=Fe(6,e,null,s),e.lanes=a,e}function Nf(e){var s=Fe(18,null,null,0);return s.stateNode=e,s}function fu(e,s,a){return s=Fe(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var jf=new WeakMap;function oi(e,s){if(typeof e=="object"&&e!==null){var a=jf.get(e);return a!==void 0?a:(s={value:e,source:s,stack:Pa(s)},jf.set(e,s),s)}return{value:e,source:s,stack:Pa(s)}}var An=[],Cn=0,al=null,Rr=0,ui=[],ci=0,us=null,Ti=1,Ei="";function Gi(e,s){An[Cn++]=Rr,An[Cn++]=al,al=e,Rr=s}function Df(e,s,a){ui[ci++]=Ti,ui[ci++]=Ei,ui[ci++]=us,us=e;var u=Ti;e=Ei;var d=32-Ye(u)-1;u&=~(1<<d),a+=1;var m=32-Ye(s)+d;if(30<m){var v=d-d%5;m=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Ti=1<<32-Ye(s)+d|a<<d|u,Ei=m+e}else Ti=1<<m|a<<d|u,Ei=e}function mu(e){e.return!==null&&(Gi(e,1),Df(e,1,0))}function pu(e){for(;e===al;)al=An[--Cn],An[Cn]=null,Rr=An[--Cn],An[Cn]=null;for(;e===us;)us=ui[--ci],ui[ci]=null,Ei=ui[--ci],ui[ci]=null,Ti=ui[--ci],ui[ci]=null}function Uf(e,s){ui[ci++]=Ti,ui[ci++]=Ei,ui[ci++]=us,Ti=s.id,Ei=s.overflow,us=e}var xe=null,Yt=null,Mt=!1,cs=null,hi=!1,gu=Error(r(519));function hs(e){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Or(oi(s,e)),gu}function zf(e){var s=e.stateNode,a=e.type,u=e.memoizedProps;switch(s[be]=e,s[je]=u,a){case"dialog":Tt("cancel",s),Tt("close",s);break;case"iframe":case"object":case"embed":Tt("load",s);break;case"video":case"audio":for(a=0;a<Zr.length;a++)Tt(Zr[a],s);break;case"source":Tt("error",s);break;case"img":case"image":case"link":Tt("error",s),Tt("load",s);break;case"details":Tt("toggle",s);break;case"input":Tt("invalid",s),Xd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Tt("invalid",s);break;case"textarea":Tt("invalid",s),Wd(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||J0(s.textContent,a)?(u.popover!=null&&(Tt("beforetoggle",s),Tt("toggle",s)),u.onScroll!=null&&Tt("scroll",s),u.onScrollEnd!=null&&Tt("scrollend",s),u.onClick!=null&&(s.onclick=Bi),s=!0):s=!1,s||hs(e,!0)}function Bf(e){for(xe=e.return;xe;)switch(xe.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:xe=xe.return}}function Mn(e){if(e!==xe)return!1;if(!Mt)return Bf(e),Mt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Dc(e.type,e.memoizedProps)),a=!a),a&&Yt&&hs(e),Bf(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Yt=op(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Yt=op(e)}else s===27?(s=Yt,Es(e.type)?(e=Lc,Lc=null,Yt=e):Yt=s):Yt=xe?fi(e.stateNode.nextSibling):null;return!0}function $s(){Yt=xe=null,Mt=!1}function yu(){var e=cs;return e!==null&&(Pe===null?Pe=e:Pe.push.apply(Pe,e),cs=null),e}function Or(e){cs===null?cs=[e]:cs.push(e)}var vu=E(null),Is=null,qi=null;function ds(e,s,a){$(vu,s._currentValue),s._currentValue=a}function Hi(e){e._currentValue=vu.current,D(vu)}function _u(e,s,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),e===a)break;e=e.return}}function bu(e,s,a,u){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;t:for(;m!==null;){var w=m;m=d;for(var N=0;N<s.length;N++)if(w.context===s[N]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),_u(m.return,a,e),u||(v=null);break t}m=w.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),_u(v,a,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Rn(e,s,a,u){e=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=d.type;Ve(d.pendingProps.value,v.value)||(e!==null?e.push(w):e=[w])}}else if(d===tt.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(sa):e=[sa])}d=d.return}e!==null&&bu(s,e,a,u),s.flags|=262144}function ll(e){for(e=e.firstContext;e!==null;){if(!Ve(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ys(e){Is=e,qi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function we(e){return Pf(Is,e)}function ol(e,s){return Is===null&&Ys(e),Pf(e,s)}function Pf(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},qi===null){if(e===null)throw Error(r(308));qi=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else qi=qi.next=s;return a}var pb=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,u){e.push(u)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},gb=n.unstable_scheduleCallback,yb=n.unstable_NormalPriority,re={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xu(){return{controller:new pb,data:new Map,refCount:0}}function kr(e){e.refCount--,e.refCount===0&&gb(yb,function(){e.controller.abort()})}var Nr=null,wu=0,On=0,kn=null;function vb(e,s){if(Nr===null){var a=Nr=[];wu=0,On=Ec(),kn={status:"pending",value:void 0,then:function(u){a.push(u)}}}return wu++,s.then(Lf,Lf),s}function Lf(){if(--wu===0&&Nr!==null){kn!==null&&(kn.status="fulfilled");var e=Nr;Nr=null,On=0,kn=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function _b(e,s){var a=[],u={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),u}var Gf=x.S;x.S=function(e,s){S0=$e(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&vb(e,s),Gf!==null&&Gf(e,s)};var Vs=E(null);function Su(){var e=Vs.current;return e!==null?e:Ht.pooledCache}function ul(e,s){s===null?$(Vs,Vs.current):$(Vs,s.pool)}function qf(){var e=Su();return e===null?null:{parent:re._currentValue,pool:e}}var Nn=Error(r(460)),Tu=Error(r(474)),cl=Error(r(542)),hl={then:function(){}};function Hf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $f(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(Bi,Bi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Yf(e),e;default:if(typeof s.status=="string")s.then(Bi,Bi);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=s,e.status="pending",e.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Yf(e),e}throw Xs=s,Nn}}function Fs(e){try{var s=e._init;return s(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xs=a,Nn):a}}var Xs=null;function If(){if(Xs===null)throw Error(r(459));var e=Xs;return Xs=null,e}function Yf(e){if(e===Nn||e===cl)throw Error(r(483))}var jn=null,jr=0;function dl(e){var s=jr;return jr+=1,jn===null&&(jn=[]),$f(jn,e,s)}function Dr(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function fl(e,s){throw s.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(s),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Vf(e){function s(z,U){if(e){var G=z.deletions;G===null?(z.deletions=[U],z.flags|=16):G.push(U)}}function a(z,U){if(!e)return null;for(;U!==null;)s(z,U),U=U.sibling;return null}function u(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function d(z,U){return z=Li(z,U),z.index=0,z.sibling=null,z}function m(z,U,G){return z.index=G,e?(G=z.alternate,G!==null?(G=G.index,G<U?(z.flags|=67108866,U):G):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function v(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function w(z,U,G,K){return U===null||U.tag!==6?(U=du(G,z.mode,K),U.return=z,U):(U=d(U,G),U.return=z,U)}function N(z,U,G,K){var ht=G.type;return ht===A?F(z,U,G.props.children,K,G.key):U!==null&&(U.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===st&&Fs(ht)===U.type)?(U=d(U,G.props),Dr(U,G),U.return=z,U):(U=rl(G.type,G.key,G.props,null,z.mode,K),Dr(U,G),U.return=z,U)}function q(z,U,G,K){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=fu(G,z.mode,K),U.return=z,U):(U=d(U,G.children||[]),U.return=z,U)}function F(z,U,G,K,ht){return U===null||U.tag!==7?(U=Hs(G,z.mode,K,ht),U.return=z,U):(U=d(U,G),U.return=z,U)}function W(z,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=du(""+U,z.mode,G),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case _:return G=rl(U.type,U.key,U.props,null,z.mode,G),Dr(G,U),G.return=z,G;case S:return U=fu(U,z.mode,G),U.return=z,U;case st:return U=Fs(U),W(z,U,G)}if(Kt(U)||yt(U))return U=Hs(U,z.mode,G,null),U.return=z,U;if(typeof U.then=="function")return W(z,dl(U),G);if(U.$$typeof===k)return W(z,ol(z,U),G);fl(z,U)}return null}function I(z,U,G,K){var ht=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ht!==null?null:w(z,U,""+G,K);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return G.key===ht?N(z,U,G,K):null;case S:return G.key===ht?q(z,U,G,K):null;case st:return G=Fs(G),I(z,U,G,K)}if(Kt(G)||yt(G))return ht!==null?null:F(z,U,G,K,null);if(typeof G.then=="function")return I(z,U,dl(G),K);if(G.$$typeof===k)return I(z,U,ol(z,G),K);fl(z,G)}return null}function V(z,U,G,K,ht){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return z=z.get(G)||null,w(U,z,""+K,ht);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _:return z=z.get(K.key===null?G:K.key)||null,N(U,z,K,ht);case S:return z=z.get(K.key===null?G:K.key)||null,q(U,z,K,ht);case st:return K=Fs(K),V(z,U,G,K,ht)}if(Kt(K)||yt(K))return z=z.get(G)||null,F(U,z,K,ht,null);if(typeof K.then=="function")return V(z,U,G,dl(K),ht);if(K.$$typeof===k)return V(z,U,G,ol(U,K),ht);fl(U,K)}return null}function at(z,U,G,K){for(var ht=null,Ot=null,ot=U,bt=U=0,Ct=null;ot!==null&&bt<G.length;bt++){ot.index>bt?(Ct=ot,ot=null):Ct=ot.sibling;var kt=I(z,ot,G[bt],K);if(kt===null){ot===null&&(ot=Ct);break}e&&ot&&kt.alternate===null&&s(z,ot),U=m(kt,U,bt),Ot===null?ht=kt:Ot.sibling=kt,Ot=kt,ot=Ct}if(bt===G.length)return a(z,ot),Mt&&Gi(z,bt),ht;if(ot===null){for(;bt<G.length;bt++)ot=W(z,G[bt],K),ot!==null&&(U=m(ot,U,bt),Ot===null?ht=ot:Ot.sibling=ot,Ot=ot);return Mt&&Gi(z,bt),ht}for(ot=u(ot);bt<G.length;bt++)Ct=V(ot,z,bt,G[bt],K),Ct!==null&&(e&&Ct.alternate!==null&&ot.delete(Ct.key===null?bt:Ct.key),U=m(Ct,U,bt),Ot===null?ht=Ct:Ot.sibling=Ct,Ot=Ct);return e&&ot.forEach(function(Os){return s(z,Os)}),Mt&&Gi(z,bt),ht}function dt(z,U,G,K){if(G==null)throw Error(r(151));for(var ht=null,Ot=null,ot=U,bt=U=0,Ct=null,kt=G.next();ot!==null&&!kt.done;bt++,kt=G.next()){ot.index>bt?(Ct=ot,ot=null):Ct=ot.sibling;var Os=I(z,ot,kt.value,K);if(Os===null){ot===null&&(ot=Ct);break}e&&ot&&Os.alternate===null&&s(z,ot),U=m(Os,U,bt),Ot===null?ht=Os:Ot.sibling=Os,Ot=Os,ot=Ct}if(kt.done)return a(z,ot),Mt&&Gi(z,bt),ht;if(ot===null){for(;!kt.done;bt++,kt=G.next())kt=W(z,kt.value,K),kt!==null&&(U=m(kt,U,bt),Ot===null?ht=kt:Ot.sibling=kt,Ot=kt);return Mt&&Gi(z,bt),ht}for(ot=u(ot);!kt.done;bt++,kt=G.next())kt=V(ot,z,bt,kt.value,K),kt!==null&&(e&&kt.alternate!==null&&ot.delete(kt.key===null?bt:kt.key),U=m(kt,U,bt),Ot===null?ht=kt:Ot.sibling=kt,Ot=kt);return e&&ot.forEach(function(Ox){return s(z,Ox)}),Mt&&Gi(z,bt),ht}function qt(z,U,G,K){if(typeof G=="object"&&G!==null&&G.type===A&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case _:t:{for(var ht=G.key;U!==null;){if(U.key===ht){if(ht=G.type,ht===A){if(U.tag===7){a(z,U.sibling),K=d(U,G.props.children),K.return=z,z=K;break t}}else if(U.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===st&&Fs(ht)===U.type){a(z,U.sibling),K=d(U,G.props),Dr(K,G),K.return=z,z=K;break t}a(z,U);break}else s(z,U);U=U.sibling}G.type===A?(K=Hs(G.props.children,z.mode,K,G.key),K.return=z,z=K):(K=rl(G.type,G.key,G.props,null,z.mode,K),Dr(K,G),K.return=z,z=K)}return v(z);case S:t:{for(ht=G.key;U!==null;){if(U.key===ht)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(z,U.sibling),K=d(U,G.children||[]),K.return=z,z=K;break t}else{a(z,U);break}else s(z,U);U=U.sibling}K=fu(G,z.mode,K),K.return=z,z=K}return v(z);case st:return G=Fs(G),qt(z,U,G,K)}if(Kt(G))return at(z,U,G,K);if(yt(G)){if(ht=yt(G),typeof ht!="function")throw Error(r(150));return G=ht.call(G),dt(z,U,G,K)}if(typeof G.then=="function")return qt(z,U,dl(G),K);if(G.$$typeof===k)return qt(z,U,ol(z,G),K);fl(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(z,U.sibling),K=d(U,G),K.return=z,z=K):(a(z,U),K=du(G,z.mode,K),K.return=z,z=K),v(z)):a(z,U)}return function(z,U,G,K){try{jr=0;var ht=qt(z,U,G,K);return jn=null,ht}catch(ot){if(ot===Nn||ot===cl)throw ot;var Ot=Fe(29,ot,null,z.mode);return Ot.lanes=K,Ot.return=z,Ot}finally{}}}var Ks=Vf(!0),Ff=Vf(!1),fs=!1;function Eu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Au(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ms(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ps(e,s,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(jt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=nl(e),Of(e,null,a),s}return sl(e,u,s,a),nl(e)}function Ur(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=e.pendingLanes,a|=u,s.lanes=a,Bd(e,a)}}function Cu(e,s){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var Mu=!1;function zr(){if(Mu){var e=kn;if(e!==null)throw e}}function Br(e,s,a,u){Mu=!1;var d=e.updateQueue;fs=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var N=w,q=N.next;N.next=null,v===null?m=q:v.next=q,v=N;var F=e.alternate;F!==null&&(F=F.updateQueue,w=F.lastBaseUpdate,w!==v&&(w===null?F.firstBaseUpdate=q:w.next=q,F.lastBaseUpdate=N))}if(m!==null){var W=d.baseState;v=0,F=q=N=null,w=m;do{var I=w.lane&-536870913,V=I!==w.lane;if(V?(At&I)===I:(u&I)===I){I!==0&&I===On&&(Mu=!0),F!==null&&(F=F.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var at=e,dt=w;I=s;var qt=a;switch(dt.tag){case 1:if(at=dt.payload,typeof at=="function"){W=at.call(qt,W,I);break t}W=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=dt.payload,I=typeof at=="function"?at.call(qt,W,I):at,I==null)break t;W=y({},W,I);break t;case 2:fs=!0}}I=w.callback,I!==null&&(e.flags|=64,V&&(e.flags|=8192),V=d.callbacks,V===null?d.callbacks=[I]:V.push(I))}else V={lane:I,tag:w.tag,payload:w.payload,callback:w.callback,next:null},F===null?(q=F=V,N=W):F=F.next=V,v|=I;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;V=w,w=V.next,V.next=null,d.lastBaseUpdate=V,d.shared.pending=null}}while(!0);F===null&&(N=W),d.baseState=N,d.firstBaseUpdate=q,d.lastBaseUpdate=F,m===null&&(d.shared.lanes=0),bs|=v,e.lanes=v,e.memoizedState=W}}function Xf(e,s){if(typeof e!="function")throw Error(r(191,e));e.call(s)}function Kf(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Xf(a[e],s)}var Dn=E(null),ml=E(0);function Wf(e,s){e=Qi,$(ml,e),$(Dn,s),Qi=e|s.baseLanes}function Ru(){$(ml,Qi),$(Dn,Dn.current)}function Ou(){Qi=ml.current,D(Dn),D(ml)}var Xe=E(null),di=null;function gs(e){var s=e.alternate;$(ie,ie.current&1),$(Xe,e),di===null&&(s===null||Dn.current!==null||s.memoizedState!==null)&&(di=e)}function ku(e){$(ie,ie.current),$(Xe,e),di===null&&(di=e)}function Qf(e){e.tag===22?($(ie,ie.current),$(Xe,e),di===null&&(di=e)):ys()}function ys(){$(ie,ie.current),$(Xe,Xe.current)}function Ke(e){D(Xe),di===e&&(di=null),D(ie)}var ie=E(0);function pl(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Bc(a)||Pc(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $i=0,_t=null,Lt=null,ae=null,gl=!1,Un=!1,Ws=!1,yl=0,Pr=0,zn=null,bb=0;function Zt(){throw Error(r(321))}function Nu(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!Ve(e[a],s[a]))return!1;return!0}function ju(e,s,a,u,d,m){return $i=m,_t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,x.H=e===null||e.memoizedState===null?Dm:Xu,Ws=!1,m=a(u,d),Ws=!1,Un&&(m=Jf(s,a,u,d)),Zf(e),m}function Zf(e){x.H=qr;var s=Lt!==null&&Lt.next!==null;if($i=0,ae=Lt=_t=null,gl=!1,Pr=0,zn=null,s)throw Error(r(300));e===null||le||(e=e.dependencies,e!==null&&ll(e)&&(le=!0))}function Jf(e,s,a,u){_t=e;var d=0;do{if(Un&&(zn=null),Pr=0,Un=!1,25<=d)throw Error(r(301));if(d+=1,ae=Lt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}x.H=Um,m=s(a,u)}while(Un);return m}function xb(){var e=x.H,s=e.useState()[0];return s=typeof s.then=="function"?Lr(s):s,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(_t.flags|=1024),s}function Du(){var e=yl!==0;return yl=0,e}function Uu(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function zu(e){if(gl){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}gl=!1}$i=0,ae=Lt=_t=null,Un=!1,Pr=yl=0,zn=null}function Oe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?_t.memoizedState=ae=e:ae=ae.next=e,ae}function se(){if(Lt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var s=ae===null?_t.memoizedState:ae.next;if(s!==null)ae=s,Lt=e;else{if(e===null)throw _t.alternate===null?Error(r(467)):Error(r(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},ae===null?_t.memoizedState=ae=e:ae=ae.next=e}return ae}function vl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lr(e){var s=Pr;return Pr+=1,zn===null&&(zn=[]),e=$f(zn,e,s),s=_t,(ae===null?s.memoizedState:ae.next)===null&&(s=s.alternate,x.H=s===null||s.memoizedState===null?Dm:Xu),e}function _l(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Lr(e);if(e.$$typeof===k)return we(e)}throw Error(r(438,String(e)))}function Bu(e){var s=null,a=_t.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=_t.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=vl(),_t.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),u=0;u<e;u++)a[u]=nt;return s.index++,a}function Ii(e,s){return typeof s=="function"?s(e):s}function bl(e){var s=se();return Pu(s,Lt,e)}function Pu(e,s,a){var u=e.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var d=e.baseQueue,m=u.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}s.baseQueue=d=m,u.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{s=d.next;var w=v=null,N=null,q=s,F=!1;do{var W=q.lane&-536870913;if(W!==q.lane?(At&W)===W:($i&W)===W){var I=q.revertLane;if(I===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),W===On&&(F=!0);else if(($i&I)===I){q=q.next,I===On&&(F=!0);continue}else W={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(w=N=W,v=m):N=N.next=W,_t.lanes|=I,bs|=I;W=q.action,Ws&&a(m,W),m=q.hasEagerState?q.eagerState:a(m,W)}else I={lane:W,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(w=N=I,v=m):N=N.next=I,_t.lanes|=W,bs|=W;q=q.next}while(q!==null&&q!==s);if(N===null?v=m:N.next=w,!Ve(m,e.memoizedState)&&(le=!0,F&&(a=kn,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=N,u.lastRenderedState=m}return d===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Lu(e){var s=se(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var u=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=e(m,v.action),v=v.next;while(v!==d);Ve(m,s.memoizedState)||(le=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,u]}function tm(e,s,a){var u=_t,d=se(),m=Mt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Ve((Lt||d).memoizedState,a);if(v&&(d.memoizedState=a,le=!0),d=d.queue,Hu(sm.bind(null,u,d,e),[e]),d.getSnapshot!==s||v||ae!==null&&ae.memoizedState.tag&1){if(u.flags|=2048,Bn(9,{destroy:void 0},im.bind(null,u,d,a,s),null),Ht===null)throw Error(r(349));m||($i&127)!==0||em(u,s,a)}return a}function em(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=_t.updateQueue,s===null?(s=vl(),_t.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function im(e,s,a,u){s.value=a,s.getSnapshot=u,nm(s)&&rm(e)}function sm(e,s,a){return a(function(){nm(s)&&rm(e)})}function nm(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!Ve(e,a)}catch{return!0}}function rm(e){var s=qs(e,2);s!==null&&Le(s,e,2)}function Gu(e){var s=Oe();if(typeof e=="function"){var a=e;if(e=a(),Ws){as(!0);try{a()}finally{as(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},s}function am(e,s,a,u){return e.baseState=a,Pu(e,Lt,typeof u=="function"?u:Ii)}function wb(e,s,a,u,d){if(Sl(e))throw Error(r(485));if(e=s.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};x.T!==null?a(!0):m.isTransition=!1,u(m),a=s.pending,a===null?(m.next=s.pending=m,lm(s,m)):(m.next=a.next,s.pending=a.next=m)}}function lm(e,s){var a=s.action,u=s.payload,d=e.state;if(s.isTransition){var m=x.T,v={};x.T=v;try{var w=a(d,u),N=x.S;N!==null&&N(v,w),om(e,s,w)}catch(q){qu(e,s,q)}finally{m!==null&&v.types!==null&&(m.types=v.types),x.T=m}}else try{m=a(d,u),om(e,s,m)}catch(q){qu(e,s,q)}}function om(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){um(e,s,u)},function(u){return qu(e,s,u)}):um(e,s,a)}function um(e,s,a){s.status="fulfilled",s.value=a,cm(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,lm(e,a)))}function qu(e,s,a){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,cm(s),s=s.next;while(s!==u)}e.action=null}function cm(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function hm(e,s){return s}function dm(e,s){if(Mt){var a=Ht.formState;if(a!==null){t:{var u=_t;if(Mt){if(Yt){e:{for(var d=Yt,m=hi;d.nodeType!==8;){if(!m){d=null;break e}if(d=fi(d.nextSibling),d===null){d=null;break e}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Yt=fi(d.nextSibling),u=d.data==="F!";break t}}hs(u)}u=!1}u&&(s=a[0])}}return a=Oe(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hm,lastRenderedState:s},a.queue=u,a=km.bind(null,_t,u),u.dispatch=a,u=Gu(!1),m=Fu.bind(null,_t,!1,u.queue),u=Oe(),d={state:s,dispatch:null,action:e,pending:null},u.queue=d,a=wb.bind(null,_t,d,m,a),d.dispatch=a,u.memoizedState=e,[s,a,!1]}function fm(e){var s=se();return mm(s,Lt,e)}function mm(e,s,a){if(s=Pu(e,s,hm)[0],e=bl(Ii)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Lr(s)}catch(v){throw v===Nn?cl:v}else u=s;s=se();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(_t.flags|=2048,Bn(9,{destroy:void 0},Sb.bind(null,d,a),null)),[u,m,e]}function Sb(e,s){e.action=s}function pm(e){var s=se(),a=Lt;if(a!==null)return mm(s,a,e);se(),s=s.memoizedState,a=se();var u=a.queue.dispatch;return a.memoizedState=e,[s,u,!1]}function Bn(e,s,a,u){return e={tag:e,create:a,deps:u,inst:s,next:null},s=_t.updateQueue,s===null&&(s=vl(),_t.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,s.lastEffect=e),e}function gm(){return se().memoizedState}function xl(e,s,a,u){var d=Oe();_t.flags|=e,d.memoizedState=Bn(1|s,{destroy:void 0},a,u===void 0?null:u)}function wl(e,s,a,u){var d=se();u=u===void 0?null:u;var m=d.memoizedState.inst;Lt!==null&&u!==null&&Nu(u,Lt.memoizedState.deps)?d.memoizedState=Bn(s,m,a,u):(_t.flags|=e,d.memoizedState=Bn(1|s,m,a,u))}function ym(e,s){xl(8390656,8,e,s)}function Hu(e,s){wl(2048,8,e,s)}function Tb(e){_t.flags|=4;var s=_t.updateQueue;if(s===null)s=vl(),_t.updateQueue=s,s.events=[e];else{var a=s.events;a===null?s.events=[e]:a.push(e)}}function vm(e){var s=se().memoizedState;return Tb({ref:s,nextImpl:e}),function(){if((jt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function _m(e,s){return wl(4,2,e,s)}function bm(e,s){return wl(4,4,e,s)}function xm(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function wm(e,s,a){a=a!=null?a.concat([e]):null,wl(4,4,xm.bind(null,s,e),a)}function $u(){}function Sm(e,s){var a=se();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Nu(s,u[1])?u[0]:(a.memoizedState=[e,s],e)}function Tm(e,s){var a=se();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Nu(s,u[1]))return u[0];if(u=e(),Ws){as(!0);try{e()}finally{as(!1)}}return a.memoizedState=[u,s],u}function Iu(e,s,a){return a===void 0||($i&1073741824)!==0&&(At&261930)===0?e.memoizedState=s:(e.memoizedState=a,e=E0(),_t.lanes|=e,bs|=e,a)}function Em(e,s,a,u){return Ve(a,s)?a:Dn.current!==null?(e=Iu(e,a,u),Ve(e,s)||(le=!0),e):($i&42)===0||($i&1073741824)!==0&&(At&261930)===0?(le=!0,e.memoizedState=a):(e=E0(),_t.lanes|=e,bs|=e,s)}function Am(e,s,a,u,d){var m=C.p;C.p=m!==0&&8>m?m:8;var v=x.T,w={};x.T=w,Fu(e,!1,s,a);try{var N=d(),q=x.S;if(q!==null&&q(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var F=_b(N,u);Gr(e,s,F,Ze(e))}else Gr(e,s,u,Ze(e))}catch(W){Gr(e,s,{then:function(){},status:"rejected",reason:W},Ze())}finally{C.p=m,v!==null&&w.types!==null&&(v.types=w.types),x.T=v}}function Eb(){}function Yu(e,s,a,u){if(e.tag!==5)throw Error(r(476));var d=Cm(e).queue;Am(e,d,s,O,a===null?Eb:function(){return Mm(e),a(u)})}function Cm(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:O},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function Mm(e){var s=Cm(e);s.next===null&&(s=e.alternate.memoizedState),Gr(e,s.next.queue,{},Ze())}function Vu(){return we(sa)}function Rm(){return se().memoizedState}function Om(){return se().memoizedState}function Ab(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=Ze();e=ms(a);var u=ps(s,e,a);u!==null&&(Le(u,s,a),Ur(u,s,a)),s={cache:xu()},e.payload=s;return}s=s.return}}function Cb(e,s,a){var u=Ze();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sl(e)?Nm(s,a):(a=cu(e,s,a,u),a!==null&&(Le(a,e,u),jm(a,s,u)))}function km(e,s,a){var u=Ze();Gr(e,s,a,u)}function Gr(e,s,a,u){var d={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))Nm(s,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,w=m(v,a);if(d.hasEagerState=!0,d.eagerState=w,Ve(w,v))return sl(e,s,d,0),Ht===null&&il(),!1}catch{}finally{}if(a=cu(e,s,d,u),a!==null)return Le(a,e,u),jm(a,s,u),!0}return!1}function Fu(e,s,a,u){if(u={lane:2,revertLane:Ec(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(s)throw Error(r(479))}else s=cu(e,a,u,2),s!==null&&Le(s,e,2)}function Sl(e){var s=e.alternate;return e===_t||s!==null&&s===_t}function Nm(e,s){Un=gl=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function jm(e,s,a){if((a&4194048)!==0){var u=s.lanes;u&=e.pendingLanes,a|=u,s.lanes=a,Bd(e,a)}}var qr={readContext:we,use:_l,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};qr.useEffectEvent=Zt;var Dm={readContext:we,use:_l,useCallback:function(e,s){return Oe().memoizedState=[e,s===void 0?null:s],e},useContext:we,useEffect:ym,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,xl(4194308,4,xm.bind(null,s,e),a)},useLayoutEffect:function(e,s){return xl(4194308,4,e,s)},useInsertionEffect:function(e,s){xl(4,2,e,s)},useMemo:function(e,s){var a=Oe();s=s===void 0?null:s;var u=e();if(Ws){as(!0);try{e()}finally{as(!1)}}return a.memoizedState=[u,s],u},useReducer:function(e,s,a){var u=Oe();if(a!==void 0){var d=a(s);if(Ws){as(!0);try{a(s)}finally{as(!1)}}}else d=s;return u.memoizedState=u.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},u.queue=e,e=e.dispatch=Cb.bind(null,_t,e),[u.memoizedState,e]},useRef:function(e){var s=Oe();return e={current:e},s.memoizedState=e},useState:function(e){e=Gu(e);var s=e.queue,a=km.bind(null,_t,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:$u,useDeferredValue:function(e,s){var a=Oe();return Iu(a,e,s)},useTransition:function(){var e=Gu(!1);return e=Am.bind(null,_t,e.queue,!0,!1),Oe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var u=_t,d=Oe();if(Mt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Ht===null)throw Error(r(349));(At&127)!==0||em(u,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,ym(sm.bind(null,u,m,e),[e]),u.flags|=2048,Bn(9,{destroy:void 0},im.bind(null,u,m,a,s),null),a},useId:function(){var e=Oe(),s=Ht.identifierPrefix;if(Mt){var a=Ei,u=Ti;a=(u&~(1<<32-Ye(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=yl++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=bb++,s="_"+s+"r_"+a.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:Vu,useFormState:dm,useActionState:dm,useOptimistic:function(e){var s=Oe();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Fu.bind(null,_t,!0,a),a.dispatch=s,[e,s]},useMemoCache:Bu,useCacheRefresh:function(){return Oe().memoizedState=Ab.bind(null,_t)},useEffectEvent:function(e){var s=Oe(),a={impl:e};return s.memoizedState=a,function(){if((jt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Xu={readContext:we,use:_l,useCallback:Sm,useContext:we,useEffect:Hu,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:bm,useMemo:Tm,useReducer:bl,useRef:gm,useState:function(){return bl(Ii)},useDebugValue:$u,useDeferredValue:function(e,s){var a=se();return Em(a,Lt.memoizedState,e,s)},useTransition:function(){var e=bl(Ii)[0],s=se().memoizedState;return[typeof e=="boolean"?e:Lr(e),s]},useSyncExternalStore:tm,useId:Rm,useHostTransitionStatus:Vu,useFormState:fm,useActionState:fm,useOptimistic:function(e,s){var a=se();return am(a,Lt,e,s)},useMemoCache:Bu,useCacheRefresh:Om};Xu.useEffectEvent=vm;var Um={readContext:we,use:_l,useCallback:Sm,useContext:we,useEffect:Hu,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:bm,useMemo:Tm,useReducer:Lu,useRef:gm,useState:function(){return Lu(Ii)},useDebugValue:$u,useDeferredValue:function(e,s){var a=se();return Lt===null?Iu(a,e,s):Em(a,Lt.memoizedState,e,s)},useTransition:function(){var e=Lu(Ii)[0],s=se().memoizedState;return[typeof e=="boolean"?e:Lr(e),s]},useSyncExternalStore:tm,useId:Rm,useHostTransitionStatus:Vu,useFormState:pm,useActionState:pm,useOptimistic:function(e,s){var a=se();return Lt!==null?am(a,Lt,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Bu,useCacheRefresh:Om};Um.useEffectEvent=vm;function Ku(e,s,a,u){s=e.memoizedState,a=a(u,s),a=a==null?s:y({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Wu={enqueueSetState:function(e,s,a){e=e._reactInternals;var u=Ze(),d=ms(u);d.payload=s,a!=null&&(d.callback=a),s=ps(e,d,u),s!==null&&(Le(s,e,u),Ur(s,e,u))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var u=Ze(),d=ms(u);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=ps(e,d,u),s!==null&&(Le(s,e,u),Ur(s,e,u))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=Ze(),u=ms(a);u.tag=2,s!=null&&(u.callback=s),s=ps(e,u,a),s!==null&&(Le(s,e,a),Ur(s,e,a))}};function zm(e,s,a,u,d,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,m,v):s.prototype&&s.prototype.isPureReactComponent?!Cr(a,u)||!Cr(d,m):!0}function Bm(e,s,a,u){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==e&&Wu.enqueueReplaceState(s,s.state,null)}function Qs(e,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(e=e.defaultProps){a===s&&(a=y({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function Pm(e){el(e)}function Lm(e){console.error(e)}function Gm(e){el(e)}function Tl(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function qm(e,s,a){try{var u=e.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Qu(e,s,a){return a=ms(a),a.tag=3,a.payload={element:null},a.callback=function(){Tl(e,s)},a}function Hm(e){return e=ms(e),e.tag=3,e}function $m(e,s,a,u){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;e.payload=function(){return d(m)},e.callback=function(){qm(s,a,u)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){qm(s,a,u),typeof d!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function Mb(e,s,a,u,d){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&Rn(s,a,d,!0),a=Xe.current,a!==null){switch(a.tag){case 31:case 13:return di===null?zl():a.alternate===null&&Jt===0&&(Jt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,u===hl?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),wc(e,u,d)),!1;case 22:return a.flags|=65536,u===hl?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),wc(e,u,d)),!1}throw Error(r(435,a.tag))}return wc(e,u,d),zl(),!1}if(Mt)return s=Xe.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==gu&&(e=Error(r(422),{cause:u}),Or(oi(e,a)))):(u!==gu&&(s=Error(r(423),{cause:u}),Or(oi(s,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,u=oi(u,a),d=Qu(e.stateNode,u,d),Cu(e,d),Jt!==4&&(Jt=2)),!1;var m=Error(r(520),{cause:u});if(m=oi(m,a),Kr===null?Kr=[m]:Kr.push(m),Jt!==4&&(Jt=2),s===null)return!0;u=oi(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Qu(a.stateNode,u,e),Cu(a,e),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(xs===null||!xs.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Hm(d),$m(d,e,a,u),Cu(a,d),!1}a=a.return}while(a!==null);return!1}var Zu=Error(r(461)),le=!1;function Se(e,s,a,u){s.child=e===null?Ff(s,null,a,u):Ks(s,e.child,a,u)}function Im(e,s,a,u,d){a=a.render;var m=s.ref;if("ref"in u){var v={};for(var w in u)w!=="ref"&&(v[w]=u[w])}else v=u;return Ys(s),u=ju(e,s,a,v,m,d),w=Du(),e!==null&&!le?(Uu(e,s,d),Yi(e,s,d)):(Mt&&w&&mu(s),s.flags|=1,Se(e,s,u,d),s.child)}function Ym(e,s,a,u,d){if(e===null){var m=a.type;return typeof m=="function"&&!hu(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Vm(e,s,m,u,d)):(e=rl(a.type,null,u,s,s.mode,d),e.ref=s.ref,e.return=s,s.child=e)}if(m=e.child,!ac(e,d)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Cr,a(v,u)&&e.ref===s.ref)return Yi(e,s,d)}return s.flags|=1,e=Li(m,u),e.ref=s.ref,e.return=s,s.child=e}function Vm(e,s,a,u,d){if(e!==null){var m=e.memoizedProps;if(Cr(m,u)&&e.ref===s.ref)if(le=!1,s.pendingProps=u=m,ac(e,d))(e.flags&131072)!==0&&(le=!0);else return s.lanes=e.lanes,Yi(e,s,d)}return Ju(e,s,a,u,d)}function Fm(e,s,a,u){var d=u.children,m=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(u=s.child=e.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~m}else u=0,s.child=null;return Xm(e,s,m,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&ul(s,m!==null?m.cachePool:null),m!==null?Wf(s,m):Ru(),Qf(s);else return u=s.lanes=536870912,Xm(e,s,m!==null?m.baseLanes|a:a,a,u)}else m!==null?(ul(s,m.cachePool),Wf(s,m),ys(),s.memoizedState=null):(e!==null&&ul(s,null),Ru(),ys());return Se(e,s,d,a),s.child}function Hr(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Xm(e,s,a,u,d){var m=Su();return m=m===null?null:{parent:re._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},e!==null&&ul(s,null),Ru(),Qf(s),e!==null&&Rn(e,s,u,!0),s.childLanes=d,null}function El(e,s){return s=Cl({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function Km(e,s,a){return Ks(s,e.child,null,a),e=El(s,s.pendingProps),e.flags|=2,Ke(s),s.memoizedState=null,e}function Rb(e,s,a){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(Mt){if(u.mode==="hidden")return e=El(s,u),s.lanes=536870912,Hr(null,e);if(ku(s),(e=Yt)?(e=lp(e,hi),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:us!==null?{id:Ti,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},a=Nf(e),a.return=s,s.child=a,xe=s,Yt=null)):e=null,e===null)throw hs(s);return s.lanes=536870912,null}return El(s,u)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(ku(s),d)if(s.flags&256)s.flags&=-257,s=Km(e,s,a);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(r(558));else if(le||Rn(e,s,a,!1),d=(a&e.childLanes)!==0,le||d){if(u=Ht,u!==null&&(v=Pd(u,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,qs(e,v),Le(u,e,v),Zu;zl(),s=Km(e,s,a)}else e=m.treeContext,Yt=fi(v.nextSibling),xe=s,Mt=!0,cs=null,hi=!1,e!==null&&Uf(s,e),s=El(s,u),s.flags|=4096;return s}return e=Li(e.child,{mode:u.mode,children:u.children}),e.ref=s.ref,s.child=e,e.return=s,e}function Al(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function Ju(e,s,a,u,d){return Ys(s),a=ju(e,s,a,u,void 0,d),u=Du(),e!==null&&!le?(Uu(e,s,d),Yi(e,s,d)):(Mt&&u&&mu(s),s.flags|=1,Se(e,s,a,d),s.child)}function Wm(e,s,a,u,d,m){return Ys(s),s.updateQueue=null,a=Jf(s,u,a,d),Zf(e),u=Du(),e!==null&&!le?(Uu(e,s,m),Yi(e,s,m)):(Mt&&u&&mu(s),s.flags|=1,Se(e,s,a,m),s.child)}function Qm(e,s,a,u,d){if(Ys(s),s.stateNode===null){var m=En,v=a.contextType;typeof v=="object"&&v!==null&&(m=we(v)),m=new a(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Wu,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Eu(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?we(v):En,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ku(s,a,v,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Wu.enqueueReplaceState(m,m.state,null),Br(s,u,m,d),zr(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(e===null){m=s.stateNode;var w=s.memoizedProps,N=Qs(a,w);m.props=N;var q=m.context,F=a.contextType;v=En,typeof F=="object"&&F!==null&&(v=we(F));var W=a.getDerivedStateFromProps;F=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,F||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||q!==v)&&Bm(s,m,u,v),fs=!1;var I=s.memoizedState;m.state=I,Br(s,u,m,d),zr(),q=s.memoizedState,w||I!==q||fs?(typeof W=="function"&&(Ku(s,a,W,u),q=s.memoizedState),(N=fs||zm(s,a,N,u,I,q,v))?(F||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=q),m.props=u,m.state=q,m.context=v,u=N):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Au(e,s),v=s.memoizedProps,F=Qs(a,v),m.props=F,W=s.pendingProps,I=m.context,q=a.contextType,N=En,typeof q=="object"&&q!==null&&(N=we(q)),w=a.getDerivedStateFromProps,(q=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==W||I!==N)&&Bm(s,m,u,N),fs=!1,I=s.memoizedState,m.state=I,Br(s,u,m,d),zr();var V=s.memoizedState;v!==W||I!==V||fs||e!==null&&e.dependencies!==null&&ll(e.dependencies)?(typeof w=="function"&&(Ku(s,a,w,u),V=s.memoizedState),(F=fs||zm(s,a,F,u,I,V,N)||e!==null&&e.dependencies!==null&&ll(e.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,V,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,V,N)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=V),m.props=u,m.state=V,m.context=N,u=F):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(s.flags|=1024),u=!1)}return m=u,Al(e,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,e!==null&&u?(s.child=Ks(s,e.child,null,d),s.child=Ks(s,null,a,d)):Se(e,s,a,d),s.memoizedState=m.state,e=s.child):e=Yi(e,s,d),e}function Zm(e,s,a,u){return $s(),s.flags|=256,Se(e,s,a,u),s.child}var tc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ec(e){return{baseLanes:e,cachePool:qf()}}function ic(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=Qe),e}function Jm(e,s,a){var u=s.pendingProps,d=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(ie.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,e===null){if(Mt){if(d?gs(s):ys(),(e=Yt)?(e=lp(e,hi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:us!==null?{id:Ti,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},a=Nf(e),a.return=s,s.child=a,xe=s,Yt=null)):e=null,e===null)throw hs(s);return Pc(e)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,d?(ys(),d=s.mode,w=Cl({mode:"hidden",children:w},d),u=Hs(u,d,a,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=ec(a),u.childLanes=ic(e,v,a),s.memoizedState=tc,Hr(null,u)):(gs(s),sc(s,w))}var N=e.memoizedState;if(N!==null&&(w=N.dehydrated,w!==null)){if(m)s.flags&256?(gs(s),s.flags&=-257,s=nc(e,s,a)):s.memoizedState!==null?(ys(),s.child=e.child,s.flags|=128,s=null):(ys(),w=u.fallback,d=s.mode,u=Cl({mode:"visible",children:u.children},d),w=Hs(w,d,a,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,Ks(s,e.child,null,a),u=s.child,u.memoizedState=ec(a),u.childLanes=ic(e,v,a),s.memoizedState=tc,s=Hr(null,u));else if(gs(s),Pc(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var q=v.dgst;v=q,u=Error(r(419)),u.stack="",u.digest=v,Or({value:u,source:null,stack:null}),s=nc(e,s,a)}else if(le||Rn(e,s,a,!1),v=(a&e.childLanes)!==0,le||v){if(v=Ht,v!==null&&(u=Pd(v,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,qs(e,u),Le(v,e,u),Zu;Bc(w)||zl(),s=nc(e,s,a)}else Bc(w)?(s.flags|=192,s.child=e.child,s=null):(e=N.treeContext,Yt=fi(w.nextSibling),xe=s,Mt=!0,cs=null,hi=!1,e!==null&&Uf(s,e),s=sc(s,u.children),s.flags|=4096);return s}return d?(ys(),w=u.fallback,d=s.mode,N=e.child,q=N.sibling,u=Li(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,q!==null?w=Li(q,w):(w=Hs(w,d,a,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,Hr(null,u),u=s.child,w=e.child.memoizedState,w===null?w=ec(a):(d=w.cachePool,d!==null?(N=re._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=qf(),w={baseLanes:w.baseLanes|a,cachePool:d}),u.memoizedState=w,u.childLanes=ic(e,v,a),s.memoizedState=tc,Hr(e.child,u)):(gs(s),a=e.child,e=a.sibling,a=Li(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,e!==null&&(v=s.deletions,v===null?(s.deletions=[e],s.flags|=16):v.push(e)),s.child=a,s.memoizedState=null,a)}function sc(e,s){return s=Cl({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Cl(e,s){return e=Fe(22,e,null,s),e.lanes=0,e}function nc(e,s,a){return Ks(s,e.child,null,a),e=sc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function t0(e,s,a){e.lanes|=s;var u=e.alternate;u!==null&&(u.lanes|=s),_u(e.return,s,a)}function rc(e,s,a,u,d,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=a,v.tailMode=d,v.treeForkCount=m)}function e0(e,s,a){var u=s.pendingProps,d=u.revealOrder,m=u.tail;u=u.children;var v=ie.current,w=(v&2)!==0;if(w?(v=v&1|2,s.flags|=128):v&=1,$(ie,v),Se(e,s,u,a),u=Mt?Rr:0,!w&&e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&t0(e,a,s);else if(e.tag===19)t0(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)e=a.alternate,e!==null&&pl(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),rc(s,!1,d,a,m,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(e=d.alternate,e!==null&&pl(e)===null){s.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}rc(s,!0,a,null,m,u);break;case"together":rc(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Yi(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),bs|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(Rn(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(r(153));if(s.child!==null){for(e=s.child,a=Li(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Li(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function ac(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&ll(e)))}function Ob(e,s,a){switch(s.tag){case 3:ut(s,s.stateNode.containerInfo),ds(s,re,e.memoizedState.cache),$s();break;case 27:case 5:wt(s);break;case 4:ut(s,s.stateNode.containerInfo);break;case 10:ds(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ku(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(gs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Jm(e,s,a):(gs(s),e=Yi(e,s,a),e!==null?e.sibling:null);gs(s);break;case 19:var d=(e.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(Rn(e,s,a,!1),u=(a&s.childLanes)!==0),d){if(u)return e0(e,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),$(ie,ie.current),u)break;return null;case 22:return s.lanes=0,Fm(e,s,a,s.pendingProps);case 24:ds(s,re,e.memoizedState.cache)}return Yi(e,s,a)}function i0(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)le=!0;else{if(!ac(e,a)&&(s.flags&128)===0)return le=!1,Ob(e,s,a);le=(e.flags&131072)!==0}else le=!1,Mt&&(s.flags&1048576)!==0&&Df(s,Rr,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(e=Fs(s.elementType),s.type=e,typeof e=="function")hu(e)?(u=Qs(e,u),s.tag=1,s=Qm(null,s,e,u,a)):(s.tag=0,s=Ju(null,s,e,u,a));else{if(e!=null){var d=e.$$typeof;if(d===H){s.tag=11,s=Im(null,s,e,u,a);break t}else if(d===L){s.tag=14,s=Ym(null,s,e,u,a);break t}}throw s=Dt(e)||e,Error(r(306,s,""))}}return s;case 0:return Ju(e,s,s.type,s.pendingProps,a);case 1:return u=s.type,d=Qs(u,s.pendingProps),Qm(e,s,u,d,a);case 3:t:{if(ut(s,s.stateNode.containerInfo),e===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;d=m.element,Au(e,s),Br(s,u,null,a);var v=s.memoizedState;if(u=v.cache,ds(s,re,u),u!==m.cache&&bu(s,[re],a,!0),zr(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Zm(e,s,u,a);break t}else if(u!==d){d=oi(Error(r(424)),s),Or(d),s=Zm(e,s,u,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Yt=fi(e.firstChild),xe=s,Mt=!0,cs=null,hi=!0,a=Ff(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($s(),u===d){s=Yi(e,s,a);break t}Se(e,s,u,a)}s=s.child}return s;case 26:return Al(e,s),e===null?(a=fp(s.type,null,s.pendingProps,null))?s.memoizedState=a:Mt||(a=s.type,e=s.pendingProps,u=$l(et.current).createElement(a),u[be]=s,u[je]=e,Te(u,a,e),pe(u),s.stateNode=u):s.memoizedState=fp(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return wt(s),e===null&&Mt&&(u=s.stateNode=cp(s.type,s.pendingProps,et.current),xe=s,hi=!0,d=Yt,Es(s.type)?(Lc=d,Yt=fi(u.firstChild)):Yt=d),Se(e,s,s.pendingProps.children,a),Al(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Mt&&((d=u=Yt)&&(u=ax(u,s.type,s.pendingProps,hi),u!==null?(s.stateNode=u,xe=s,Yt=fi(u.firstChild),hi=!1,d=!0):d=!1),d||hs(s)),wt(s),d=s.type,m=s.pendingProps,v=e!==null?e.memoizedProps:null,u=m.children,Dc(d,m)?u=null:v!==null&&Dc(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=ju(e,s,xb,null,null,a),sa._currentValue=d),Al(e,s),Se(e,s,u,a),s.child;case 6:return e===null&&Mt&&((e=a=Yt)&&(a=lx(a,s.pendingProps,hi),a!==null?(s.stateNode=a,xe=s,Yt=null,e=!0):e=!1),e||hs(s)),null;case 13:return Jm(e,s,a);case 4:return ut(s,s.stateNode.containerInfo),u=s.pendingProps,e===null?s.child=Ks(s,null,u,a):Se(e,s,u,a),s.child;case 11:return Im(e,s,s.type,s.pendingProps,a);case 7:return Se(e,s,s.pendingProps,a),s.child;case 8:return Se(e,s,s.pendingProps.children,a),s.child;case 12:return Se(e,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,ds(s,s.type,u.value),Se(e,s,u.children,a),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Ys(s),d=we(d),u=u(d),s.flags|=1,Se(e,s,u,a),s.child;case 14:return Ym(e,s,s.type,s.pendingProps,a);case 15:return Vm(e,s,s.type,s.pendingProps,a);case 19:return e0(e,s,a);case 31:return Rb(e,s,a);case 22:return Fm(e,s,a,s.pendingProps);case 24:return Ys(s),u=we(re),e===null?(d=Su(),d===null&&(d=Ht,m=xu(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:u,cache:d},Eu(s),ds(s,re,d)):((e.lanes&a)!==0&&(Au(e,s),Br(s,null,null,a),zr()),d=e.memoizedState,m=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ds(s,re,u)):(u=m.cache,ds(s,re,u),u!==d.cache&&bu(s,[re],a,!0))),Se(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Vi(e){e.flags|=4}function lc(e,s,a,u,d){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(R0())e.flags|=8192;else throw Xs=hl,Tu}else e.flags&=-16777217}function s0(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!vp(s))if(R0())e.flags|=8192;else throw Xs=hl,Tu}function Ml(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Ud():536870912,e.lanes|=s,qn|=s)}function $r(e,s){if(!Mt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Vt(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(s)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=u,e.childLanes=a,s}function kb(e,s,a){var u=s.pendingProps;switch(pu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(s),null;case 1:return Vt(s),null;case 3:return a=s.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Hi(re),pt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Mn(s)?Vi(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,yu())),Vt(s),null;case 26:var d=s.type,m=s.memoizedState;return e===null?(Vi(s),m!==null?(Vt(s),s0(s,m)):(Vt(s),lc(s,d,null,u,a))):m?m!==e.memoizedState?(Vi(s),Vt(s),s0(s,m)):(Vt(s),s.flags&=-16777217):(e=e.memoizedProps,e!==u&&Vi(s),Vt(s),lc(s,d,e,u,a)),null;case 27:if(Ne(s),a=et.current,d=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==u&&Vi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Vt(s),null}e=Q.current,Mn(s)?zf(s):(e=cp(d,u,a),s.stateNode=e,Vi(s))}return Vt(s),null;case 5:if(Ne(s),d=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==u&&Vi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Vt(s),null}if(m=Q.current,Mn(s))zf(s);else{var v=$l(et.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}m[be]=s,m[je]=u;t:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break t;for(;v.sibling===null;){if(v.return===null||v.return===s)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;t:switch(Te(m,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Vi(s)}}return Vt(s),lc(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,a),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==u&&Vi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(e=et.current,Mn(s)){if(e=s.stateNode,a=s.memoizedProps,u=null,d=xe,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}e[be]=s,e=!!(e.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||J0(e.nodeValue,a)),e||hs(s,!0)}else e=$l(e).createTextNode(u),e[be]=s,s.stateNode=e}return Vt(s),null;case 31:if(a=s.memoizedState,e===null||e.memoizedState!==null){if(u=Mn(s),a!==null){if(e===null){if(!u)throw Error(r(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[be]=s}else $s(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),e=!1}else a=yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return s.flags&256?(Ke(s),s):(Ke(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Vt(s),null;case 13:if(u=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Mn(s),u!==null&&u.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[be]=s}else $s(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),d=!1}else d=yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ke(s),s):(Ke(s),null)}return Ke(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,e=e!==null&&e.memoizedState!==null,a&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)),a!==e&&a&&(s.child.flags|=8192),Ml(s,s.updateQueue),Vt(s),null);case 4:return pt(),e===null&&Rc(s.stateNode.containerInfo),Vt(s),null;case 10:return Hi(s.type),Vt(s),null;case 19:if(D(ie),u=s.memoizedState,u===null)return Vt(s),null;if(d=(s.flags&128)!==0,m=u.rendering,m===null)if(d)$r(u,!1);else{if(Jt!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(m=pl(e),m!==null){for(s.flags|=128,$r(u,!1),e=m.updateQueue,s.updateQueue=e,Ml(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)kf(a,e),a=a.sibling;return $(ie,ie.current&1|2),Mt&&Gi(s,u.treeForkCount),s.child}e=e.sibling}u.tail!==null&&$e()>jl&&(s.flags|=128,d=!0,$r(u,!1),s.lanes=4194304)}else{if(!d)if(e=pl(m),e!==null){if(s.flags|=128,d=!0,e=e.updateQueue,s.updateQueue=e,Ml(s,e),$r(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Mt)return Vt(s),null}else 2*$e()-u.renderingStartTime>jl&&a!==536870912&&(s.flags|=128,d=!0,$r(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(e=u.last,e!==null?e.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=$e(),e.sibling=null,a=ie.current,$(ie,d?a&1|2:a&1),Mt&&Gi(s,u.treeForkCount),e):(Vt(s),null);case 22:case 23:return Ke(s),Ou(),u=s.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(Vt(s),s.subtreeFlags&6&&(s.flags|=8192)):Vt(s),a=s.updateQueue,a!==null&&Ml(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),e!==null&&D(Vs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Hi(re),Vt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Nb(e,s){switch(pu(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Hi(re),pt(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Ne(s),null;case 31:if(s.memoizedState!==null){if(Ke(s),s.alternate===null)throw Error(r(340));$s()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if(Ke(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(r(340));$s()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return D(ie),null;case 4:return pt(),null;case 10:return Hi(s.type),null;case 22:case 23:return Ke(s),Ou(),e!==null&&D(Vs),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Hi(re),null;case 25:return null;default:return null}}function n0(e,s){switch(pu(s),s.tag){case 3:Hi(re),pt();break;case 26:case 27:case 5:Ne(s);break;case 4:pt();break;case 31:s.memoizedState!==null&&Ke(s);break;case 13:Ke(s);break;case 19:D(ie);break;case 10:Hi(s.type);break;case 22:case 23:Ke(s),Ou(),e!==null&&D(Vs);break;case 24:Hi(re)}}function Ir(e,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&e)===e){u=void 0;var m=a.create,v=a.inst;u=m(),v.destroy=u}a=a.next}while(a!==d)}}catch(w){Bt(s,s.return,w)}}function vs(e,s,a){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&e)===e){var v=u.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,d=s;var N=a,q=w;try{q()}catch(F){Bt(d,N,F)}}}u=u.next}while(u!==m)}}catch(F){Bt(s,s.return,F)}}function r0(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{Kf(s,a)}catch(u){Bt(e,e.return,u)}}}function a0(e,s,a){a.props=Qs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(u){Bt(e,s,u)}}function Yr(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof a=="function"?e.refCleanup=a(u):a.current=u}}catch(d){Bt(e,s,d)}}function Ai(e,s){var a=e.ref,u=e.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(d){Bt(e,s,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Bt(e,s,d)}else a.current=null}function l0(e){var s=e.type,a=e.memoizedProps,u=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(d){Bt(e,e.return,d)}}function oc(e,s,a){try{var u=e.stateNode;tx(u,e.type,a,s),u[je]=s}catch(d){Bt(e,e.return,d)}}function o0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Es(e.type)||e.tag===4}function uc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||o0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Es(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cc(e,s,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Bi));else if(u!==4&&(u===27&&Es(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(cc(e,s,a),e=e.sibling;e!==null;)cc(e,s,a),e=e.sibling}function Rl(e,s,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(u!==4&&(u===27&&Es(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Rl(e,s,a),e=e.sibling;e!==null;)Rl(e,s,a),e=e.sibling}function u0(e){var s=e.stateNode,a=e.memoizedProps;try{for(var u=e.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Te(s,u,a),s[be]=e,s[je]=a}catch(m){Bt(e,e.return,m)}}var Fi=!1,oe=!1,hc=!1,c0=typeof WeakSet=="function"?WeakSet:Set,ge=null;function jb(e,s){if(e=e.containerInfo,Nc=Wl,e=wf(e),nu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,w=-1,N=-1,q=0,F=0,W=e,I=null;e:for(;;){for(var V;W!==a||d!==0&&W.nodeType!==3||(w=v+d),W!==m||u!==0&&W.nodeType!==3||(N=v+u),W.nodeType===3&&(v+=W.nodeValue.length),(V=W.firstChild)!==null;)I=W,W=V;for(;;){if(W===e)break e;if(I===a&&++q===d&&(w=v),I===m&&++F===u&&(N=v),(V=W.nextSibling)!==null)break;W=I,I=W.parentNode}W=V}a=w===-1||N===-1?null:{start:w,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(jc={focusedElem:e,selectionRange:a},Wl=!1,ge=s;ge!==null;)if(s=ge,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,ge=e;else for(;ge!==null;){switch(s=ge,m=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var at=Qs(a.type,d);e=u.getSnapshotBeforeUpdate(at,m),u.__reactInternalSnapshotBeforeUpdate=e}catch(dt){Bt(a,a.return,dt)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)zc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":zc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=s.sibling,e!==null){e.return=s.return,ge=e;break}ge=s.return}}function h0(e,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(e,a),u&4&&Ir(5,a);break;case 1:if(Ki(e,a),u&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(v){Bt(a,a.return,v)}else{var d=Qs(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(d,s,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Bt(a,a.return,v)}}u&64&&r0(a),u&512&&Yr(a,a.return);break;case 3:if(Ki(e,a),u&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Kf(e,s)}catch(v){Bt(a,a.return,v)}}break;case 27:s===null&&u&4&&u0(a);case 26:case 5:Ki(e,a),s===null&&u&4&&l0(a),u&512&&Yr(a,a.return);break;case 12:Ki(e,a);break;case 31:Ki(e,a),u&4&&m0(e,a);break;case 13:Ki(e,a),u&4&&p0(e,a),u&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Hb.bind(null,a),ox(e,a))));break;case 22:if(u=a.memoizedState!==null||Fi,!u){s=s!==null&&s.memoizedState!==null||oe,d=Fi;var m=oe;Fi=u,(oe=s)&&!m?Wi(e,a,(a.subtreeFlags&8772)!==0):Ki(e,a),Fi=d,oe=m}break;case 30:break;default:Ki(e,a)}}function d0(e){var s=e.alternate;s!==null&&(e.alternate=null,d0(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&qo(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xt=null,Ue=!1;function Xi(e,s,a){for(a=a.child;a!==null;)f0(e,s,a),a=a.sibling}function f0(e,s,a){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(pr,a)}catch{}switch(a.tag){case 26:oe||Ai(a,s),Xi(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:oe||Ai(a,s);var u=Xt,d=Ue;Es(a.type)&&(Xt=a.stateNode,Ue=!1),Xi(e,s,a),ta(a.stateNode),Xt=u,Ue=d;break;case 5:oe||Ai(a,s);case 6:if(u=Xt,d=Ue,Xt=null,Xi(e,s,a),Xt=u,Ue=d,Xt!==null)if(Ue)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(a.stateNode)}catch(m){Bt(a,s,m)}else try{Xt.removeChild(a.stateNode)}catch(m){Bt(a,s,m)}break;case 18:Xt!==null&&(Ue?(e=Xt,rp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Kn(e)):rp(Xt,a.stateNode));break;case 4:u=Xt,d=Ue,Xt=a.stateNode.containerInfo,Ue=!0,Xi(e,s,a),Xt=u,Ue=d;break;case 0:case 11:case 14:case 15:vs(2,a,s),oe||vs(4,a,s),Xi(e,s,a);break;case 1:oe||(Ai(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&a0(a,s,u)),Xi(e,s,a);break;case 21:Xi(e,s,a);break;case 22:oe=(u=oe)||a.memoizedState!==null,Xi(e,s,a),oe=u;break;default:Xi(e,s,a)}}function m0(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Kn(e)}catch(a){Bt(s,s.return,a)}}}function p0(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Kn(e)}catch(a){Bt(s,s.return,a)}}function Db(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new c0),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new c0),s;default:throw Error(r(435,e.tag))}}function Ol(e,s){var a=Db(e);s.forEach(function(u){if(!a.has(u)){a.add(u);var d=$b.bind(null,e,u);u.then(d,d)}})}function ze(e,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u],m=e,v=s,w=v;t:for(;w!==null;){switch(w.tag){case 27:if(Es(w.type)){Xt=w.stateNode,Ue=!1;break t}break;case 5:Xt=w.stateNode,Ue=!1;break t;case 3:case 4:Xt=w.stateNode.containerInfo,Ue=!0;break t}w=w.return}if(Xt===null)throw Error(r(160));f0(m,v,d),Xt=null,Ue=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)g0(s,e),s=s.sibling}var yi=null;function g0(e,s){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ze(s,e),Be(e),u&4&&(vs(3,e,e.return),Ir(3,e),vs(5,e,e.return));break;case 1:ze(s,e),Be(e),u&512&&(oe||a===null||Ai(a,a.return)),u&64&&Fi&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var d=yi;if(ze(s,e),Be(e),u&512&&(oe||a===null||Ai(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=e.memoizedState,a===null)if(u===null)if(e.stateNode===null){t:{u=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[vr]||m[be]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),Te(m,u,a),m[be]=e,pe(m),u=m;break t;case"link":var v=gp("link","href",d).get(u+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break e}}m=d.createElement(u),Te(m,u,a),d.head.appendChild(m);break;case"meta":if(v=gp("meta","content",d).get(u+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break e}}m=d.createElement(u),Te(m,u,a),d.head.appendChild(m);break;default:throw Error(r(468,u))}m[be]=e,pe(m),u=m}e.stateNode=u}else yp(d,e.type,e.stateNode);else e.stateNode=pp(d,u,e.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?yp(d,e.type,e.stateNode):pp(d,u,e.memoizedProps)):u===null&&e.stateNode!==null&&oc(e,e.memoizedProps,a.memoizedProps)}break;case 27:ze(s,e),Be(e),u&512&&(oe||a===null||Ai(a,a.return)),a!==null&&u&4&&oc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ze(s,e),Be(e),u&512&&(oe||a===null||Ai(a,a.return)),e.flags&32){d=e.stateNode;try{vn(d,"")}catch(at){Bt(e,e.return,at)}}u&4&&e.stateNode!=null&&(d=e.memoizedProps,oc(e,d,a!==null?a.memoizedProps:d)),u&1024&&(hc=!0);break;case 6:if(ze(s,e),Be(e),u&4){if(e.stateNode===null)throw Error(r(162));u=e.memoizedProps,a=e.stateNode;try{a.nodeValue=u}catch(at){Bt(e,e.return,at)}}break;case 3:if(Vl=null,d=yi,yi=Il(s.containerInfo),ze(s,e),yi=d,Be(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Kn(s.containerInfo)}catch(at){Bt(e,e.return,at)}hc&&(hc=!1,y0(e));break;case 4:u=yi,yi=Il(e.stateNode.containerInfo),ze(s,e),Be(e),yi=u;break;case 12:ze(s,e),Be(e);break;case 31:ze(s,e),Be(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Ol(e,u)));break;case 13:ze(s,e),Be(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nl=$e()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Ol(e,u)));break;case 22:d=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=Fi,F=oe;if(Fi=q||d,oe=F||N,ze(s,e),oe=F,Fi=q,Be(e),u&8192)t:for(s=e.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||N||Fi||oe||Zs(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(m=N.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=N.stateNode;var W=N.memoizedProps.style,I=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(at){Bt(N,N.return,at)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(at){Bt(N,N.return,at)}}}else if(s.tag===18){if(a===null){N=s;try{var V=N.stateNode;d?ap(V,!0):ap(N.stateNode,!1)}catch(at){Bt(N,N.return,at)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=e.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Ol(e,a))));break;case 19:ze(s,e),Be(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Ol(e,u)));break;case 30:break;case 21:break;default:ze(s,e),Be(e)}}function Be(e){var s=e.flags;if(s&2){try{for(var a,u=e.return;u!==null;){if(o0(u)){a=u;break}u=u.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=uc(e);Rl(e,m,d);break;case 5:var v=a.stateNode;a.flags&32&&(vn(v,""),a.flags&=-33);var w=uc(e);Rl(e,w,v);break;case 3:case 4:var N=a.stateNode.containerInfo,q=uc(e);cc(e,q,N);break;default:throw Error(r(161))}}catch(F){Bt(e,e.return,F)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function y0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;y0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Ki(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)h0(e,s.alternate,s),s=s.sibling}function Zs(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:vs(4,s,s.return),Zs(s);break;case 1:Ai(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&a0(s,s.return,a),Zs(s);break;case 27:ta(s.stateNode);case 26:case 5:Ai(s,s.return),Zs(s);break;case 22:s.memoizedState===null&&Zs(s);break;case 30:Zs(s);break;default:Zs(s)}e=e.sibling}}function Wi(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=e,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:Wi(d,m,a),Ir(4,m);break;case 1:if(Wi(d,m,a),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){Bt(u,u.return,q)}if(u=m,d=u.updateQueue,d!==null){var w=u.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)Xf(N[d],w)}catch(q){Bt(u,u.return,q)}}a&&v&64&&r0(m),Yr(m,m.return);break;case 27:u0(m);case 26:case 5:Wi(d,m,a),a&&u===null&&v&4&&l0(m),Yr(m,m.return);break;case 12:Wi(d,m,a);break;case 31:Wi(d,m,a),a&&v&4&&m0(d,m);break;case 13:Wi(d,m,a),a&&v&4&&p0(d,m);break;case 22:m.memoizedState===null&&Wi(d,m,a),Yr(m,m.return);break;case 30:break;default:Wi(d,m,a)}s=s.sibling}}function dc(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&kr(a))}function fc(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&kr(e))}function vi(e,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)v0(e,s,a,u),s=s.sibling}function v0(e,s,a,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:vi(e,s,a,u),d&2048&&Ir(9,s);break;case 1:vi(e,s,a,u);break;case 3:vi(e,s,a,u),d&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&kr(e)));break;case 12:if(d&2048){vi(e,s,a,u),e=s.stateNode;try{var m=s.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Bt(s,s.return,N)}}else vi(e,s,a,u);break;case 31:vi(e,s,a,u);break;case 13:vi(e,s,a,u);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?vi(e,s,a,u):Vr(e,s):m._visibility&2?vi(e,s,a,u):(m._visibility|=2,Pn(e,s,a,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&dc(v,s);break;case 24:vi(e,s,a,u),d&2048&&fc(s.alternate,s);break;default:vi(e,s,a,u)}}function Pn(e,s,a,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=e,v=s,w=a,N=u,q=v.flags;switch(v.tag){case 0:case 11:case 15:Pn(m,v,w,N,d),Ir(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?Pn(m,v,w,N,d):Vr(m,v):(F._visibility|=2,Pn(m,v,w,N,d)),d&&q&2048&&dc(v.alternate,v);break;case 24:Pn(m,v,w,N,d),d&&q&2048&&fc(v.alternate,v);break;default:Pn(m,v,w,N,d)}s=s.sibling}}function Vr(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,u=s,d=u.flags;switch(u.tag){case 22:Vr(a,u),d&2048&&dc(u.alternate,u);break;case 24:Vr(a,u),d&2048&&fc(u.alternate,u);break;default:Vr(a,u)}s=s.sibling}}var Fr=8192;function Ln(e,s,a){if(e.subtreeFlags&Fr)for(e=e.child;e!==null;)_0(e,s,a),e=e.sibling}function _0(e,s,a){switch(e.tag){case 26:Ln(e,s,a),e.flags&Fr&&e.memoizedState!==null&&bx(a,yi,e.memoizedState,e.memoizedProps);break;case 5:Ln(e,s,a);break;case 3:case 4:var u=yi;yi=Il(e.stateNode.containerInfo),Ln(e,s,a),yi=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=Fr,Fr=16777216,Ln(e,s,a),Fr=u):Ln(e,s,a));break;default:Ln(e,s,a)}}function b0(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function Xr(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ge=u,w0(u,e)}b0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)x0(e),e=e.sibling}function x0(e){switch(e.tag){case 0:case 11:case 15:Xr(e),e.flags&2048&&vs(9,e,e.return);break;case 3:Xr(e);break;case 12:Xr(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,kl(e)):Xr(e);break;default:Xr(e)}}function kl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ge=u,w0(u,e)}b0(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:vs(8,s,s.return),kl(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,kl(s));break;default:kl(s)}e=e.sibling}}function w0(e,s){for(;ge!==null;){var a=ge;switch(a.tag){case 0:case 11:case 15:vs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:kr(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,ge=u;else t:for(a=e;ge!==null;){u=ge;var d=u.sibling,m=u.return;if(d0(u),u===a){ge=null;break t}if(d!==null){d.return=m,ge=d;break t}ge=m}}}var Ub={getCacheForType:function(e){var s=we(re),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a},cacheSignal:function(){return we(re).controller.signal}},zb=typeof WeakMap=="function"?WeakMap:Map,jt=0,Ht=null,St=null,At=0,zt=0,We=null,_s=!1,Gn=!1,mc=!1,Qi=0,Jt=0,bs=0,Js=0,pc=0,Qe=0,qn=0,Kr=null,Pe=null,gc=!1,Nl=0,S0=0,jl=1/0,Dl=null,xs=null,ce=0,ws=null,Hn=null,Zi=0,yc=0,vc=null,T0=null,Wr=0,_c=null;function Ze(){return(jt&2)!==0&&At!==0?At&-At:x.T!==null?Ec():Ld()}function E0(){if(Qe===0)if((At&536870912)===0||Mt){var e=Ha;Ha<<=1,(Ha&3932160)===0&&(Ha=262144),Qe=e}else Qe=536870912;return e=Xe.current,e!==null&&(e.flags|=32),Qe}function Le(e,s,a){(e===Ht&&(zt===2||zt===9)||e.cancelPendingCommit!==null)&&($n(e,0),Ss(e,At,Qe,!1)),yr(e,a),((jt&2)===0||e!==Ht)&&(e===Ht&&((jt&2)===0&&(Js|=a),Jt===4&&Ss(e,At,Qe,!1)),Ci(e))}function A0(e,s,a){if((jt&6)!==0)throw Error(r(327));var u=!a&&(s&127)===0&&(s&e.expiredLanes)===0||gr(e,s),d=u?Lb(e,s):xc(e,s,!0),m=u;do{if(d===0){Gn&&!u&&Ss(e,s,0,!1);break}else{if(a=e.current.alternate,m&&!Bb(a)){d=xc(e,s,!1),m=!1;continue}if(d===2){if(m=s,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;t:{var w=e;d=Kr;var N=w.current.memoizedState.isDehydrated;if(N&&($n(w,v).flags|=256),v=xc(w,v,!1),v!==2){if(mc&&!N){w.errorRecoveryDisabledLanes|=m,Js|=m,d=4;break t}m=Pe,Pe=d,m!==null&&(Pe===null?Pe=m:Pe.push.apply(Pe,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){$n(e,0),Ss(e,s,0,!0);break}t:{switch(u=e,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ss(u,s,Qe,!_s);break t;case 2:Pe=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Nl+300-$e(),10<d)){if(Ss(u,s,Qe,!_s),Ia(u,0,!0)!==0)break t;Zi=s,u.timeoutHandle=sp(C0.bind(null,u,a,Pe,Dl,gc,s,Qe,Js,qn,_s,m,"Throttled",-0,0),d);break t}C0(u,a,Pe,Dl,gc,s,Qe,Js,qn,_s,m,null,-0,0)}}break}while(!0);Ci(e)}function C0(e,s,a,u,d,m,v,w,N,q,F,W,I,V){if(e.timeoutHandle=-1,W=s.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bi},_0(s,m,W);var at=(m&62914560)===m?Nl-$e():(m&4194048)===m?S0-$e():0;if(at=xx(W,at),at!==null){Zi=m,e.cancelPendingCommit=at(U0.bind(null,e,s,m,a,u,d,v,w,N,F,W,null,I,V)),Ss(e,m,v,!q);return}}U0(e,s,m,a,u,d,v,w,N)}function Bb(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var d=a[u],m=d.getSnapshot;d=d.value;try{if(!Ve(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ss(e,s,a,u){s&=~pc,s&=~Js,e.suspendedLanes|=s,e.pingedLanes&=~s,u&&(e.warmLanes|=s),u=e.expirationTimes;for(var d=s;0<d;){var m=31-Ye(d),v=1<<m;u[m]=-1,d&=~v}a!==0&&zd(e,a,s)}function Ul(){return(jt&6)===0?(Qr(0),!1):!0}function bc(){if(St!==null){if(zt===0)var e=St.return;else e=St,qi=Is=null,zu(e),jn=null,jr=0,e=St;for(;e!==null;)n0(e.alternate,e),e=e.return;St=null}}function $n(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,sx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Zi=0,bc(),Ht=e,St=a=Li(e.current,null),At=s,zt=0,We=null,_s=!1,Gn=gr(e,s),mc=!1,qn=Qe=pc=Js=bs=Jt=0,Pe=Kr=null,gc=!1,(s&8)!==0&&(s|=s&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=s;0<u;){var d=31-Ye(u),m=1<<d;s|=e[d],u&=~m}return Qi=s,il(),a}function M0(e,s){_t=null,x.H=qr,s===Nn||s===cl?(s=If(),zt=3):s===Tu?(s=If(),zt=4):zt=s===Zu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,We=s,St===null&&(Jt=1,Tl(e,oi(s,e.current)))}function R0(){var e=Xe.current;return e===null?!0:(At&4194048)===At?di===null:(At&62914560)===At||(At&536870912)!==0?e===di:!1}function O0(){var e=x.H;return x.H=qr,e===null?qr:e}function k0(){var e=x.A;return x.A=Ub,e}function zl(){Jt=4,_s||(At&4194048)!==At&&Xe.current!==null||(Gn=!0),(bs&134217727)===0&&(Js&134217727)===0||Ht===null||Ss(Ht,At,Qe,!1)}function xc(e,s,a){var u=jt;jt|=2;var d=O0(),m=k0();(Ht!==e||At!==s)&&(Dl=null,$n(e,s)),s=!1;var v=Jt;t:do try{if(zt!==0&&St!==null){var w=St,N=We;switch(zt){case 8:bc(),v=6;break t;case 3:case 2:case 9:case 6:Xe.current===null&&(s=!0);var q=zt;if(zt=0,We=null,In(e,w,N,q),a&&Gn){v=0;break t}break;default:q=zt,zt=0,We=null,In(e,w,N,q)}}Pb(),v=Jt;break}catch(F){M0(e,F)}while(!0);return s&&e.shellSuspendCounter++,qi=Is=null,jt=u,x.H=d,x.A=m,St===null&&(Ht=null,At=0,il()),v}function Pb(){for(;St!==null;)N0(St)}function Lb(e,s){var a=jt;jt|=2;var u=O0(),d=k0();Ht!==e||At!==s?(Dl=null,jl=$e()+500,$n(e,s)):Gn=gr(e,s);t:do try{if(zt!==0&&St!==null){s=St;var m=We;e:switch(zt){case 1:zt=0,We=null,In(e,s,m,1);break;case 2:case 9:if(Hf(m)){zt=0,We=null,j0(s);break}s=function(){zt!==2&&zt!==9||Ht!==e||(zt=7),Ci(e)},m.then(s,s);break t;case 3:zt=7;break t;case 4:zt=5;break t;case 7:Hf(m)?(zt=0,We=null,j0(s)):(zt=0,We=null,In(e,s,m,7));break;case 5:var v=null;switch(St.tag){case 26:v=St.memoizedState;case 5:case 27:var w=St;if(v?vp(v):w.stateNode.complete){zt=0,We=null;var N=w.sibling;if(N!==null)St=N;else{var q=w.return;q!==null?(St=q,Bl(q)):St=null}break e}}zt=0,We=null,In(e,s,m,5);break;case 6:zt=0,We=null,In(e,s,m,6);break;case 8:bc(),Jt=6;break t;default:throw Error(r(462))}}Gb();break}catch(F){M0(e,F)}while(!0);return qi=Is=null,x.H=u,x.A=d,jt=a,St!==null?0:(Ht=null,At=0,il(),Jt)}function Gb(){for(;St!==null&&!u_();)N0(St)}function N0(e){var s=i0(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,s===null?Bl(e):St=s}function j0(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=Wm(a,s,s.pendingProps,s.type,void 0,At);break;case 11:s=Wm(a,s,s.pendingProps,s.type.render,s.ref,At);break;case 5:zu(s);default:n0(a,s),s=St=kf(s,Qi),s=i0(a,s,Qi)}e.memoizedProps=e.pendingProps,s===null?Bl(e):St=s}function In(e,s,a,u){qi=Is=null,zu(s),jn=null,jr=0;var d=s.return;try{if(Mb(e,d,s,a,At)){Jt=1,Tl(e,oi(a,e.current)),St=null;return}}catch(m){if(d!==null)throw St=d,m;Jt=1,Tl(e,oi(a,e.current)),St=null;return}s.flags&32768?(Mt||u===1?e=!0:Gn||(At&536870912)!==0?e=!1:(_s=e=!0,(u===2||u===9||u===3||u===6)&&(u=Xe.current,u!==null&&u.tag===13&&(u.flags|=16384))),D0(s,e)):Bl(s)}function Bl(e){var s=e;do{if((s.flags&32768)!==0){D0(s,_s);return}e=s.return;var a=kb(s.alternate,s,Qi);if(a!==null){St=a;return}if(s=s.sibling,s!==null){St=s;return}St=s=e}while(s!==null);Jt===0&&(Jt=5)}function D0(e,s){do{var a=Nb(e.alternate,e);if(a!==null){a.flags&=32767,St=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){St=e;return}St=e=a}while(e!==null);Jt=6,St=null}function U0(e,s,a,u,d,m,v,w,N){e.cancelPendingCommit=null;do Pl();while(ce!==0);if((jt&6)!==0)throw Error(r(327));if(s!==null){if(s===e.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=uu,__(e,a,m,v,w,N),e===Ht&&(St=Ht=null,At=0),Hn=s,ws=e,Zi=a,yc=m,vc=d,T0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ib(Ga,function(){return G0(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=x.T,x.T=null,d=C.p,C.p=2,v=jt,jt|=4;try{jb(e,s,a)}finally{jt=v,C.p=d,x.T=u}}ce=1,z0(),B0(),P0()}}function z0(){if(ce===1){ce=0;var e=ws,s=Hn,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=x.T,x.T=null;var u=C.p;C.p=2;var d=jt;jt|=4;try{g0(s,e);var m=jc,v=wf(e.containerInfo),w=m.focusedElem,N=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&xf(w.ownerDocument.documentElement,w)){if(N!==null&&nu(w)){var q=N.start,F=N.end;if(F===void 0&&(F=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(F,w.value.length);else{var W=w.ownerDocument||document,I=W&&W.defaultView||window;if(I.getSelection){var V=I.getSelection(),at=w.textContent.length,dt=Math.min(N.start,at),qt=N.end===void 0?dt:Math.min(N.end,at);!V.extend&&dt>qt&&(v=qt,qt=dt,dt=v);var z=bf(w,dt),U=bf(w,qt);if(z&&U&&(V.rangeCount!==1||V.anchorNode!==z.node||V.anchorOffset!==z.offset||V.focusNode!==U.node||V.focusOffset!==U.offset)){var G=W.createRange();G.setStart(z.node,z.offset),V.removeAllRanges(),dt>qt?(V.addRange(G),V.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),V.addRange(G))}}}}for(W=[],V=w;V=V.parentNode;)V.nodeType===1&&W.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var K=W[w];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Wl=!!Nc,jc=Nc=null}finally{jt=d,C.p=u,x.T=a}}e.current=s,ce=2}}function B0(){if(ce===2){ce=0;var e=ws,s=Hn,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=x.T,x.T=null;var u=C.p;C.p=2;var d=jt;jt|=4;try{h0(e,s.alternate,s)}finally{jt=d,C.p=u,x.T=a}}ce=3}}function P0(){if(ce===4||ce===3){ce=0,c_();var e=ws,s=Hn,a=Zi,u=T0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ce=5:(ce=0,Hn=ws=null,L0(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(xs=null),Lo(a),s=s.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(pr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=x.T,d=C.p,C.p=2,x.T=null;try{for(var m=e.onRecoverableError,v=0;v<u.length;v++){var w=u[v];m(w.value,{componentStack:w.stack})}}finally{x.T=s,C.p=d}}(Zi&3)!==0&&Pl(),Ci(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===_c?Wr++:(Wr=0,_c=e):Wr=0,Qr(0)}}function L0(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,kr(s)))}function Pl(){return z0(),B0(),P0(),G0()}function G0(){if(ce!==5)return!1;var e=ws,s=yc;yc=0;var a=Lo(Zi),u=x.T,d=C.p;try{C.p=32>a?32:a,x.T=null,a=vc,vc=null;var m=ws,v=Zi;if(ce=0,Hn=ws=null,Zi=0,(jt&6)!==0)throw Error(r(331));var w=jt;if(jt|=4,x0(m.current),v0(m,m.current,v,a),jt=w,Qr(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(pr,m)}catch{}return!0}finally{C.p=d,x.T=u,L0(e,s)}}function q0(e,s,a){s=oi(a,s),s=Qu(e.stateNode,s,2),e=ps(e,s,2),e!==null&&(yr(e,2),Ci(e))}function Bt(e,s,a){if(e.tag===3)q0(e,e,a);else for(;s!==null;){if(s.tag===3){q0(s,e,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(xs===null||!xs.has(u))){e=oi(a,e),a=Hm(2),u=ps(s,a,2),u!==null&&($m(a,u,s,e),yr(u,2),Ci(u));break}}s=s.return}}function wc(e,s,a){var u=e.pingCache;if(u===null){u=e.pingCache=new zb;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(a)||(mc=!0,d.add(a),e=qb.bind(null,e,s,a),s.then(e,e))}function qb(e,s,a){var u=e.pingCache;u!==null&&u.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ht===e&&(At&a)===a&&(Jt===4||Jt===3&&(At&62914560)===At&&300>$e()-Nl?(jt&2)===0&&$n(e,0):pc|=a,qn===At&&(qn=0)),Ci(e)}function H0(e,s){s===0&&(s=Ud()),e=qs(e,s),e!==null&&(yr(e,s),Ci(e))}function Hb(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),H0(e,a)}function $b(e,s){var a=0;switch(e.tag){case 31:case 13:var u=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),H0(e,a)}function Ib(e,s){return Uo(e,s)}var Ll=null,Yn=null,Sc=!1,Gl=!1,Tc=!1,Ts=0;function Ci(e){e!==Yn&&e.next===null&&(Yn===null?Ll=Yn=e:Yn=Yn.next=e),Gl=!0,Sc||(Sc=!0,Vb())}function Qr(e,s){if(!Tc&&Gl){Tc=!0;do for(var a=!1,u=Ll;u!==null;){if(e!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var v=u.suspendedLanes,w=u.pingedLanes;m=(1<<31-Ye(42|e)+1)-1,m&=d&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,V0(u,m))}else m=At,m=Ia(u,u===Ht?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||gr(u,m)||(a=!0,V0(u,m));u=u.next}while(a);Tc=!1}}function Yb(){$0()}function $0(){Gl=Sc=!1;var e=0;Ts!==0&&ix()&&(e=Ts);for(var s=$e(),a=null,u=Ll;u!==null;){var d=u.next,m=I0(u,s);m===0?(u.next=null,a===null?Ll=d:a.next=d,d===null&&(Yn=a)):(a=u,(e!==0||(m&3)!==0)&&(Gl=!0)),u=d}ce!==0&&ce!==5||Qr(e),Ts!==0&&(Ts=0)}function I0(e,s){for(var a=e.suspendedLanes,u=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Ye(m),w=1<<v,N=d[v];N===-1?((w&a)===0||(w&u)!==0)&&(d[v]=v_(w,s)):N<=s&&(e.expiredLanes|=w),m&=~w}if(s=Ht,a=At,a=Ia(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,a===0||e===s&&(zt===2||zt===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&zo(u),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||gr(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(u!==null&&zo(u),Lo(a)){case 2:case 8:a=jd;break;case 32:a=Ga;break;case 268435456:a=Dd;break;default:a=Ga}return u=Y0.bind(null,e),a=Uo(a,u),e.callbackPriority=s,e.callbackNode=a,s}return u!==null&&u!==null&&zo(u),e.callbackPriority=2,e.callbackNode=null,2}function Y0(e,s){if(ce!==0&&ce!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Pl()&&e.callbackNode!==a)return null;var u=At;return u=Ia(e,e===Ht?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(A0(e,u,s),I0(e,$e()),e.callbackNode!=null&&e.callbackNode===a?Y0.bind(null,e):null)}function V0(e,s){if(Pl())return null;A0(e,s,!0)}function Vb(){nx(function(){(jt&6)!==0?Uo(Nd,Yb):$0()})}function Ec(){if(Ts===0){var e=On;e===0&&(e=qa,qa<<=1,(qa&261888)===0&&(qa=256)),Ts=e}return Ts}function F0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xa(""+e)}function X0(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function Fb(e,s,a,u,d){if(s==="submit"&&a&&a.stateNode===d){var m=F0((d[je]||null).action),v=u.submitter;v&&(s=(s=v[je]||null)?F0(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var w=new Za("action","action",null,u,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ts!==0){var N=v?X0(d,v):new FormData(d);Yu(a,{pending:!0,data:N,method:d.method,action:m},null,N)}}else typeof m=="function"&&(w.preventDefault(),N=v?X0(d,v):new FormData(d),Yu(a,{pending:!0,data:N,method:d.method,action:m},m,N))},currentTarget:d}]})}}for(var Ac=0;Ac<ou.length;Ac++){var Cc=ou[Ac],Xb=Cc.toLowerCase(),Kb=Cc[0].toUpperCase()+Cc.slice(1);gi(Xb,"on"+Kb)}gi(Ef,"onAnimationEnd"),gi(Af,"onAnimationIteration"),gi(Cf,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(hb,"onTransitionRun"),gi(db,"onTransitionStart"),gi(fb,"onTransitionCancel"),gi(Mf,"onTransitionEnd"),gn("onMouseEnter",["mouseout","mouseover"]),gn("onMouseLeave",["mouseout","mouseover"]),gn("onPointerEnter",["pointerout","pointerover"]),gn("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zr));function K0(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var u=e[a],d=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var v=u.length-1;0<=v;v--){var w=u[v],N=w.instance,q=w.currentTarget;if(w=w.listener,N!==m&&d.isPropagationStopped())break t;m=w,d.currentTarget=q;try{m(d)}catch(F){el(F)}d.currentTarget=null,m=N}else for(v=0;v<u.length;v++){if(w=u[v],N=w.instance,q=w.currentTarget,w=w.listener,N!==m&&d.isPropagationStopped())break t;m=w,d.currentTarget=q;try{m(d)}catch(F){el(F)}d.currentTarget=null,m=N}}}}function Tt(e,s){var a=s[Go];a===void 0&&(a=s[Go]=new Set);var u=e+"__bubble";a.has(u)||(W0(s,e,2,!1),a.add(u))}function Mc(e,s,a){var u=0;s&&(u|=4),W0(a,e,u,s)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[ql]){e[ql]=!0,Hd.forEach(function(a){a!=="selectionchange"&&(Wb.has(a)||Mc(a,!1,e),Mc(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[ql]||(s[ql]=!0,Mc("selectionchange",!1,s))}}function W0(e,s,a,u){switch(Ep(s)){case 2:var d=Tx;break;case 8:d=Ex;break;default:d=Ic}a=d.bind(null,s,a,e),d=void 0,!Ko||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?e.addEventListener(s,a,{capture:!0,passive:d}):e.addEventListener(s,a,!0):d!==void 0?e.addEventListener(s,a,{passive:d}):e.addEventListener(s,a,!1)}function Oc(e,s,a,u,d){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var w=u.stateNode.containerInfo;if(w===d)break;if(v===4)for(v=u.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;w!==null;){if(v=fn(w),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){u=m=v;continue t}w=w.parentNode}}u=u.return}tf(function(){var q=m,F=Fo(a),W=[];t:{var I=Rf.get(e);if(I!==void 0){var V=Za,at=e;switch(e){case"keypress":if(Wa(a)===0)break t;case"keydown":case"keyup":V=$_;break;case"focusin":at="focus",V=Jo;break;case"focusout":at="blur",V=Jo;break;case"beforeblur":case"afterblur":V=Jo;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=k_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=V_;break;case Ef:case Af:case Cf:V=D_;break;case Mf:V=X_;break;case"scroll":case"scrollend":V=R_;break;case"wheel":V=W_;break;case"copy":case"cut":case"paste":V=z_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=af;break;case"toggle":case"beforetoggle":V=Z_}var dt=(s&4)!==0,qt=!dt&&(e==="scroll"||e==="scrollend"),z=dt?I!==null?I+"Capture":null:I;dt=[];for(var U=q,G;U!==null;){var K=U;if(G=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||G===null||z===null||(K=br(U,z),K!=null&&dt.push(Jr(U,K,G))),qt)break;U=U.return}0<dt.length&&(I=new V(I,at,null,a,F),W.push({event:I,listeners:dt}))}}if((s&7)===0){t:{if(I=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",I&&a!==Vo&&(at=a.relatedTarget||a.fromElement)&&(fn(at)||at[dn]))break t;if((V||I)&&(I=F.window===F?F:(I=F.ownerDocument)?I.defaultView||I.parentWindow:window,V?(at=a.relatedTarget||a.toElement,V=q,at=at?fn(at):null,at!==null&&(qt=o(at),dt=at.tag,at!==qt||dt!==5&&dt!==27&&dt!==6)&&(at=null)):(V=null,at=q),V!==at)){if(dt=nf,K="onMouseLeave",z="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(dt=af,K="onPointerLeave",z="onPointerEnter",U="pointer"),qt=V==null?I:_r(V),G=at==null?I:_r(at),I=new dt(K,U+"leave",V,a,F),I.target=qt,I.relatedTarget=G,K=null,fn(F)===q&&(dt=new dt(z,U+"enter",at,a,F),dt.target=G,dt.relatedTarget=qt,K=dt),qt=K,V&&at)e:{for(dt=Qb,z=V,U=at,G=0,K=z;K;K=dt(K))G++;K=0;for(var ht=U;ht;ht=dt(ht))K++;for(;0<G-K;)z=dt(z),G--;for(;0<K-G;)U=dt(U),K--;for(;G--;){if(z===U||U!==null&&z===U.alternate){dt=z;break e}z=dt(z),U=dt(U)}dt=null}else dt=null;V!==null&&Q0(W,I,V,dt,!1),at!==null&&qt!==null&&Q0(W,qt,at,dt,!0)}}t:{if(I=q?_r(q):window,V=I.nodeName&&I.nodeName.toLowerCase(),V==="select"||V==="input"&&I.type==="file")var Ot=mf;else if(df(I))if(pf)Ot=ob;else{Ot=ab;var ot=rb}else V=I.nodeName,!V||V.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?q&&Yo(q.elementType)&&(Ot=mf):Ot=lb;if(Ot&&(Ot=Ot(e,q))){ff(W,Ot,a,F);break t}ot&&ot(e,I,q),e==="focusout"&&q&&I.type==="number"&&q.memoizedProps.value!=null&&Io(I,"number",I.value)}switch(ot=q?_r(q):window,e){case"focusin":(df(ot)||ot.contentEditable==="true")&&(wn=ot,ru=q,Mr=null);break;case"focusout":Mr=ru=wn=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,Sf(W,a,F);break;case"selectionchange":if(cb)break;case"keydown":case"keyup":Sf(W,a,F)}var bt;if(eu)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else xn?cf(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(lf&&a.locale!=="ko"&&(xn||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&xn&&(bt=ef()):(os=F,Wo="value"in os?os.value:os.textContent,xn=!0)),ot=Hl(q,Ct),0<ot.length&&(Ct=new rf(Ct,e,null,a,F),W.push({event:Ct,listeners:ot}),bt?Ct.data=bt:(bt=hf(a),bt!==null&&(Ct.data=bt)))),(bt=tb?eb(e,a):ib(e,a))&&(Ct=Hl(q,"onBeforeInput"),0<Ct.length&&(ot=new rf("onBeforeInput","beforeinput",null,a,F),W.push({event:ot,listeners:Ct}),ot.data=bt)),Fb(W,e,q,a,F)}K0(W,s)})}function Jr(e,s,a){return{instance:e,listener:s,currentTarget:a}}function Hl(e,s){for(var a=s+"Capture",u=[];e!==null;){var d=e,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=br(e,a),d!=null&&u.unshift(Jr(e,d,m)),d=br(e,s),d!=null&&u.push(Jr(e,d,m))),e.tag===3)return u;e=e.return}return[]}function Qb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Q0(e,s,a,u,d){for(var m=s._reactName,v=[];a!==null&&a!==u;){var w=a,N=w.alternate,q=w.stateNode;if(w=w.tag,N!==null&&N===u)break;w!==5&&w!==26&&w!==27||q===null||(N=q,d?(q=br(a,m),q!=null&&v.unshift(Jr(a,q,N))):d||(q=br(a,m),q!=null&&v.push(Jr(a,q,N)))),a=a.return}v.length!==0&&e.push({event:s,listeners:v})}var Zb=/\r\n?/g,Jb=/\u0000|\uFFFD/g;function Z0(e){return(typeof e=="string"?e:""+e).replace(Zb,`
`).replace(Jb,"")}function J0(e,s){return s=Z0(s),Z0(e)===s}function Gt(e,s,a,u,d,m){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||vn(e,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&vn(e,""+u);break;case"className":Va(e,"class",u);break;case"tabIndex":Va(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(e,a,u);break;case"style":Zd(e,u,m);break;case"data":if(s!=="object"){Va(e,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=Xa(""+u),e.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Gt(e,s,"name",d.name,d,null),Gt(e,s,"formEncType",d.formEncType,d,null),Gt(e,s,"formMethod",d.formMethod,d,null),Gt(e,s,"formTarget",d.formTarget,d,null)):(Gt(e,s,"encType",d.encType,d,null),Gt(e,s,"method",d.method,d,null),Gt(e,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=Xa(""+u),e.setAttribute(a,u);break;case"onClick":u!=null&&(e.onclick=Bi);break;case"onScroll":u!=null&&Tt("scroll",e);break;case"onScrollEnd":u!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}a=Xa(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""+u):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":u===!0?e.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,u):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(a,u):e.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(a):e.setAttribute(a,u);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),Ya(e,"popover",u);break;case"xlinkActuate":zi(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zi(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zi(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zi(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zi(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zi(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zi(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ya(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=C_.get(a)||a,Ya(e,a,u))}}function kc(e,s,a,u,d,m){switch(a){case"style":Zd(e,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof u=="string"?vn(e,u):(typeof u=="number"||typeof u=="bigint")&&vn(e,""+u);break;case"onScroll":u!=null&&Tt("scroll",e);break;case"onScrollEnd":u!=null&&Tt("scrollend",e);break;case"onClick":u!=null&&(e.onclick=Bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$d.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=e[je]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(s,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,u,d);break t}a in e?e[a]=u:u===!0?e.setAttribute(a,""):Ya(e,a,u)}}}function Te(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var u=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Gt(e,s,m,v,a,null)}}d&&Gt(e,s,"srcSet",a.srcSet,a,null),u&&Gt(e,s,"src",a.src,a,null);return;case"input":Tt("invalid",e);var w=m=v=d=null,N=null,q=null;for(u in a)if(a.hasOwnProperty(u)){var F=a[u];if(F!=null)switch(u){case"name":d=F;break;case"type":v=F;break;case"checked":N=F;break;case"defaultChecked":q=F;break;case"value":m=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:Gt(e,s,u,F,a,null)}}Xd(e,m,w,N,q,v,d,!1);return;case"select":Tt("invalid",e),u=v=m=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":u=w;default:Gt(e,s,d,w,a,null)}s=m,a=v,e.multiple=!!u,s!=null?yn(e,!!u,s,!1):a!=null&&yn(e,!!u,a,!0);return;case"textarea":Tt("invalid",e),m=d=u=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":u=w;break;case"defaultValue":d=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:Gt(e,s,v,w,a,null)}Wd(e,u,d,m);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Gt(e,s,N,u,a,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(u=0;u<Zr.length;u++)Tt(Zr[u],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(u=a[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Gt(e,s,q,u,a,null)}return;default:if(Yo(s)){for(F in a)a.hasOwnProperty(F)&&(u=a[F],u!==void 0&&kc(e,s,F,u,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(u=a[w],u!=null&&Gt(e,s,w,u,a,null))}function tx(e,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,w=null,N=null,q=null,F=null;for(V in a){var W=a[V];if(a.hasOwnProperty(V)&&W!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":N=W;default:u.hasOwnProperty(V)||Gt(e,s,V,null,u,W)}}for(var I in u){var V=u[I];if(W=a[I],u.hasOwnProperty(I)&&(V!=null||W!=null))switch(I){case"type":m=V;break;case"name":d=V;break;case"checked":q=V;break;case"defaultChecked":F=V;break;case"value":v=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,s));break;default:V!==W&&Gt(e,s,I,V,u,W)}}$o(e,v,w,N,q,F,m,d);return;case"select":V=v=w=I=null;for(m in a)if(N=a[m],a.hasOwnProperty(m)&&N!=null)switch(m){case"value":break;case"multiple":V=N;default:u.hasOwnProperty(m)||Gt(e,s,m,null,u,N)}for(d in u)if(m=u[d],N=a[d],u.hasOwnProperty(d)&&(m!=null||N!=null))switch(d){case"value":I=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==N&&Gt(e,s,d,m,u,N)}s=w,a=v,u=V,I!=null?yn(e,!!a,I,!1):!!u!=!!a&&(s!=null?yn(e,!!a,s,!0):yn(e,!!a,a?[]:"",!1));return;case"textarea":V=I=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Gt(e,s,w,null,u,d)}for(v in u)if(d=u[v],m=a[v],u.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":I=d;break;case"defaultValue":V=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&Gt(e,s,v,d,u,m)}Kd(e,I,V);return;case"option":for(var at in a)if(I=a[at],a.hasOwnProperty(at)&&I!=null&&!u.hasOwnProperty(at))switch(at){case"selected":e.selected=!1;break;default:Gt(e,s,at,null,u,I)}for(N in u)if(I=u[N],V=a[N],u.hasOwnProperty(N)&&I!==V&&(I!=null||V!=null))switch(N){case"selected":e.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Gt(e,s,N,I,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in a)I=a[dt],a.hasOwnProperty(dt)&&I!=null&&!u.hasOwnProperty(dt)&&Gt(e,s,dt,null,u,I);for(q in u)if(I=u[q],V=a[q],u.hasOwnProperty(q)&&I!==V&&(I!=null||V!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,s));break;default:Gt(e,s,q,I,u,V)}return;default:if(Yo(s)){for(var qt in a)I=a[qt],a.hasOwnProperty(qt)&&I!==void 0&&!u.hasOwnProperty(qt)&&kc(e,s,qt,void 0,u,I);for(F in u)I=u[F],V=a[F],!u.hasOwnProperty(F)||I===V||I===void 0&&V===void 0||kc(e,s,F,I,u,V);return}}for(var z in a)I=a[z],a.hasOwnProperty(z)&&I!=null&&!u.hasOwnProperty(z)&&Gt(e,s,z,null,u,I);for(W in u)I=u[W],V=a[W],!u.hasOwnProperty(W)||I===V||I==null&&V==null||Gt(e,s,W,I,u,V)}function tp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ex(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var d=a[u],m=d.transferSize,v=d.initiatorType,w=d.duration;if(m&&w&&tp(v)){for(v=0,w=d.responseEnd,u+=1;u<a.length;u++){var N=a[u],q=N.startTime;if(q>w)break;var F=N.transferSize,W=N.initiatorType;F&&tp(W)&&(N=N.responseEnd,v+=F*(N<w?1:(w-q)/(N-q)))}if(--u,s+=8*(m+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nc=null,jc=null;function $l(e){return e.nodeType===9?e:e.ownerDocument}function ep(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ip(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Dc(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Uc=null;function ix(){var e=window.event;return e&&e.type==="popstate"?e===Uc?!1:(Uc=e,!0):(Uc=null,!1)}var sp=typeof setTimeout=="function"?setTimeout:void 0,sx=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,nx=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(e){return np.resolve(null).then(e).catch(rx)}:sp;function rx(e){setTimeout(function(){throw e})}function Es(e){return e==="head"}function rp(e,s){var a=s,u=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(u===0){e.removeChild(d),Kn(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ta(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ta(a);for(var m=a.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[vr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&ta(e.ownerDocument.body);a=d}while(a);Kn(s)}function ap(e,s){var a=e;e=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=u}while(a)}function zc(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zc(a),qo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ax(e,s,a,u){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[vr])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=fi(e.nextSibling),e===null)break}return null}function lx(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=fi(e.nextSibling),e===null))return null;return e}function lp(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=fi(e.nextSibling),e===null))return null;return e}function Bc(e){return e.data==="$?"||e.data==="$~"}function Pc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ox(e,s){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function fi(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var Lc=null;function op(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(s===0)return fi(e.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}e=e.nextSibling}return null}function up(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return e;s--}else a!=="/$"&&a!=="/&"||s++}e=e.previousSibling}return null}function cp(e,s,a){switch(s=$l(a),e){case"html":if(e=s.documentElement,!e)throw Error(r(452));return e;case"head":if(e=s.head,!e)throw Error(r(453));return e;case"body":if(e=s.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function ta(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);qo(e)}var mi=new Map,hp=new Set;function Il(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ji=C.d;C.d={f:ux,r:cx,D:hx,C:dx,L:fx,m:mx,X:gx,S:px,M:yx};function ux(){var e=Ji.f(),s=Ul();return e||s}function cx(e){var s=mn(e);s!==null&&s.tag===5&&s.type==="form"?Mm(s):Ji.r(e)}var Vn=typeof document>"u"?null:document;function dp(e,s,a){var u=Vn;if(u&&typeof s=="string"&&s){var d=ai(s);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),hp.has(d)||(hp.add(d),e={rel:e,crossOrigin:a,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Te(s,"link",e),pe(s),u.head.appendChild(s)))}}function hx(e){Ji.D(e),dp("dns-prefetch",e,null)}function dx(e,s){Ji.C(e,s),dp("preconnect",e,s)}function fx(e,s,a){Ji.L(e,s,a);var u=Vn;if(u&&e&&s){var d='link[rel="preload"][as="'+ai(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+ai(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+ai(a.imageSizes)+'"]')):d+='[href="'+ai(e)+'"]';var m=d;switch(s){case"style":m=Fn(e);break;case"script":m=Xn(e)}mi.has(m)||(e=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),mi.set(m,e),u.querySelector(d)!==null||s==="style"&&u.querySelector(ea(m))||s==="script"&&u.querySelector(ia(m))||(s=u.createElement("link"),Te(s,"link",e),pe(s),u.head.appendChild(s)))}}function mx(e,s){Ji.m(e,s);var a=Vn;if(a&&e){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+ai(u)+'"][href="'+ai(e)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Xn(e)}if(!mi.has(m)&&(e=y({rel:"modulepreload",href:e},s),mi.set(m,e),a.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ia(m)))return}u=a.createElement("link"),Te(u,"link",e),pe(u),a.head.appendChild(u)}}}function px(e,s,a){Ji.S(e,s,a);var u=Vn;if(u&&e){var d=pn(u).hoistableStyles,m=Fn(e);s=s||"default";var v=d.get(m);if(!v){var w={loading:0,preload:null};if(v=u.querySelector(ea(m)))w.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":s},a),(a=mi.get(m))&&Gc(e,a);var N=v=u.createElement("link");pe(N),Te(N,"link",e),N._p=new Promise(function(q,F){N.onload=q,N.onerror=F}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Yl(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:w},d.set(m,v)}}}function gx(e,s){Ji.X(e,s);var a=Vn;if(a&&e){var u=pn(a).hoistableScripts,d=Xn(e),m=u.get(d);m||(m=a.querySelector(ia(d)),m||(e=y({src:e,async:!0},s),(s=mi.get(d))&&qc(e,s),m=a.createElement("script"),pe(m),Te(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function yx(e,s){Ji.M(e,s);var a=Vn;if(a&&e){var u=pn(a).hoistableScripts,d=Xn(e),m=u.get(d);m||(m=a.querySelector(ia(d)),m||(e=y({src:e,async:!0,type:"module"},s),(s=mi.get(d))&&qc(e,s),m=a.createElement("script"),pe(m),Te(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function fp(e,s,a,u){var d=(d=et.current)?Il(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Fn(a.href),a=pn(d).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Fn(a.href);var m=pn(d).hoistableStyles,v=m.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=d.querySelector(ea(e)))&&!m._p&&(v.instance=m,v.state.loading=5),mi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},mi.set(e,a),m||vx(d,e,a,v.state))),s&&u===null)throw Error(r(528,""));return v}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xn(a),a=pn(d).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Fn(e){return'href="'+ai(e)+'"'}function ea(e){return'link[rel="stylesheet"]['+e+"]"}function mp(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function vx(e,s,a,u){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=e.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Te(s,"link",a),pe(s),e.head.appendChild(s))}function Xn(e){return'[src="'+ai(e)+'"]'}function ia(e){return"script[async]"+e}function pp(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=e.querySelector('style[data-href~="'+ai(a.href)+'"]');if(u)return s.instance=u,pe(u),u;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),pe(u),Te(u,"style",d),Yl(u,a.precedence,e),s.instance=u;case"stylesheet":d=Fn(a.href);var m=e.querySelector(ea(d));if(m)return s.state.loading|=4,s.instance=m,pe(m),m;u=mp(a),(d=mi.get(d))&&Gc(u,d),m=(e.ownerDocument||e).createElement("link"),pe(m);var v=m;return v._p=new Promise(function(w,N){v.onload=w,v.onerror=N}),Te(m,"link",u),s.state.loading|=4,Yl(m,a.precedence,e),s.instance=m;case"script":return m=Xn(a.src),(d=e.querySelector(ia(m)))?(s.instance=d,pe(d),d):(u=a,(d=mi.get(m))&&(u=y({},a),qc(u,d)),e=e.ownerDocument||e,d=e.createElement("script"),pe(d),Te(d,"link",u),e.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Yl(u,a.precedence,e));return s.instance}function Yl(e,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,v=0;v<u.length;v++){var w=u[v];if(w.dataset.precedence===s)m=w;else if(m!==d)break}m?m.parentNode.insertBefore(e,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function Gc(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function qc(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Vl=null;function gp(e,s,a){if(Vl===null){var u=new Map,d=Vl=new Map;d.set(a,u)}else d=Vl,u=d.get(a),u||(u=new Map,d.set(a,u));if(u.has(e))return u;for(u.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var m=a[d];if(!(m[vr]||m[be]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=e+v;var w=u.get(v);w?w.push(m):u.set(v,[m])}}return u}function yp(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function _x(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function bx(e,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Fn(u.href),m=s.querySelector(ea(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=Fl.bind(e),s.then(e,e)),a.state.loading|=4,a.instance=m,pe(m);return}m=s.ownerDocument||s,u=mp(u),(d=mi.get(d))&&Gc(u,d),m=m.createElement("link"),pe(m);var v=m;v._p=new Promise(function(w,N){v.onload=w,v.onerror=N}),Te(m,"link",u),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Fl.bind(e),s.addEventListener("load",a),s.addEventListener("error",a))}}var Hc=0;function xx(e,s){return e.stylesheets&&e.count===0&&Kl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var u=setTimeout(function(){if(e.stylesheets&&Kl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+s);0<e.imgBytes&&Hc===0&&(Hc=62500*ex());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Kl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Hc?50:800)+s);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Fl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xl=null;function Kl(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xl=new Map,s.forEach(wx,e),Xl=null,Fl.call(e))}function wx(e,s){if(!(s.state.loading&4)){var a=Xl.get(e);if(a)var u=a.get(null);else{a=new Map,Xl.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),u=v)}u&&a.set(null,u)}d=s.instance,v=d.getAttribute("data-precedence"),m=a.get(v)||u,m===u&&a.set(null,d),a.set(v,d),this.count++,u=Fl.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),s.state.loading|=4}}var sa={$$typeof:k,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Sx(e,s,a,u,d,m,v,w,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),this.hiddenUpdates=Bo(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function _p(e,s,a,u,d,m,v,w,N,q,F,W){return e=new Sx(e,s,a,v,N,q,F,W,w),s=1,m===!0&&(s|=24),m=Fe(3,null,null,s),e.current=m,m.stateNode=e,s=xu(),s.refCount++,e.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:s},Eu(m),e}function bp(e){return e?(e=En,e):En}function xp(e,s,a,u,d,m){d=bp(d),u.context===null?u.context=d:u.pendingContext=d,u=ms(s),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=ps(e,u,s),a!==null&&(Le(a,e,s),Ur(a,e,s))}function wp(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function $c(e,s){wp(e,s),(e=e.alternate)&&wp(e,s)}function Sp(e){if(e.tag===13||e.tag===31){var s=qs(e,67108864);s!==null&&Le(s,e,67108864),$c(e,67108864)}}function Tp(e){if(e.tag===13||e.tag===31){var s=Ze();s=Po(s);var a=qs(e,s);a!==null&&Le(a,e,s),$c(e,s)}}var Wl=!0;function Tx(e,s,a,u){var d=x.T;x.T=null;var m=C.p;try{C.p=2,Ic(e,s,a,u)}finally{C.p=m,x.T=d}}function Ex(e,s,a,u){var d=x.T;x.T=null;var m=C.p;try{C.p=8,Ic(e,s,a,u)}finally{C.p=m,x.T=d}}function Ic(e,s,a,u){if(Wl){var d=Yc(u);if(d===null)Oc(e,s,u,Ql,a),Ap(e,u);else if(Cx(d,e,s,a,u))u.stopPropagation();else if(Ap(e,u),s&4&&-1<Ax.indexOf(e)){for(;d!==null;){var m=mn(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=zs(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var N=1<<31-Ye(v);w.entanglements[1]|=N,v&=~N}Ci(m),(jt&6)===0&&(jl=$e()+500,Qr(0))}}break;case 31:case 13:w=qs(m,2),w!==null&&Le(w,m,2),Ul(),$c(m,2)}if(m=Yc(u),m===null&&Oc(e,s,u,Ql,a),m===d)break;d=m}d!==null&&u.stopPropagation()}else Oc(e,s,u,null,a)}}function Yc(e){return e=Fo(e),Vc(e)}var Ql=null;function Vc(e){if(Ql=null,e=fn(e),e!==null){var s=o(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=c(s),e!==null)return e;e=null}else if(a===31){if(e=h(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Ql=e,null}function Ep(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(h_()){case Nd:return 2;case jd:return 8;case Ga:case d_:return 32;case Dd:return 268435456;default:return 32}default:return 32}}var Fc=!1,As=null,Cs=null,Ms=null,na=new Map,ra=new Map,Rs=[],Ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ap(e,s){switch(e){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":na.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(s.pointerId)}}function aa(e,s,a,u,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},s!==null&&(s=mn(s),s!==null&&Sp(s)),e):(e.eventSystemFlags|=u,s=e.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),e)}function Cx(e,s,a,u,d){switch(s){case"focusin":return As=aa(As,e,s,a,u,d),!0;case"dragenter":return Cs=aa(Cs,e,s,a,u,d),!0;case"mouseover":return Ms=aa(Ms,e,s,a,u,d),!0;case"pointerover":var m=d.pointerId;return na.set(m,aa(na.get(m)||null,e,s,a,u,d)),!0;case"gotpointercapture":return m=d.pointerId,ra.set(m,aa(ra.get(m)||null,e,s,a,u,d)),!0}return!1}function Cp(e){var s=fn(e.target);if(s!==null){var a=o(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){e.blockedOn=s,Gd(e.priority,function(){Tp(a)});return}}else if(s===31){if(s=h(a),s!==null){e.blockedOn=s,Gd(e.priority,function(){Tp(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zl(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=Yc(e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a);Vo=u,a.target.dispatchEvent(u),Vo=null}else return s=mn(a),s!==null&&Sp(s),e.blockedOn=a,!1;s.shift()}return!0}function Mp(e,s,a){Zl(e)&&a.delete(s)}function Mx(){Fc=!1,As!==null&&Zl(As)&&(As=null),Cs!==null&&Zl(Cs)&&(Cs=null),Ms!==null&&Zl(Ms)&&(Ms=null),na.forEach(Mp),ra.forEach(Mp)}function Jl(e,s){e.blockedOn===s&&(e.blockedOn=null,Fc||(Fc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mx)))}var to=null;function Rp(e){to!==e&&(to=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){to===e&&(to=null);for(var s=0;s<e.length;s+=3){var a=e[s],u=e[s+1],d=e[s+2];if(typeof u!="function"){if(Vc(u||a)===null)continue;break}var m=mn(a);m!==null&&(e.splice(s,3),s-=3,Yu(m,{pending:!0,data:d,method:a.method,action:u},u,d))}}))}function Kn(e){function s(N){return Jl(N,e)}As!==null&&Jl(As,e),Cs!==null&&Jl(Cs,e),Ms!==null&&Jl(Ms,e),na.forEach(s),ra.forEach(s);for(var a=0;a<Rs.length;a++){var u=Rs[a];u.blockedOn===e&&(u.blockedOn=null)}for(;0<Rs.length&&(a=Rs[0],a.blockedOn===null);)Cp(a),a.blockedOn===null&&Rs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var d=a[u],m=a[u+1],v=d[je]||null;if(typeof m=="function")v||Rp(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[je]||null)w=v.formAction;else if(Vc(d)!==null)continue}else w=v.action;typeof w=="function"?a[u+1]=w:(a.splice(u,3),u-=3),Rp(a)}}}function Op(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Xc(e){this._internalRoot=e}eo.prototype.render=Xc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,u=Ze();xp(a,u,e,s,null,null)},eo.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;xp(e.current,2,null,e,null,null),Ul(),s[dn]=null}};function eo(e){this._internalRoot=e}eo.prototype.unstable_scheduleHydration=function(e){if(e){var s=Ld();e={blockedOn:null,target:e,priority:s};for(var a=0;a<Rs.length&&s!==0&&s<Rs[a].priority;a++);Rs.splice(a,0,e),a===0&&Cp(e)}};var kp=t.version;if(kp!=="19.2.3")throw Error(r(527,kp,"19.2.3"));C.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(s),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Rx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!io.isDisabled&&io.supportsFiber)try{pr=io.inject(Rx),Ie=io}catch{}}return oa.createRoot=function(e,s){if(!l(e))throw Error(r(299));var a=!1,u="",d=Pm,m=Lm,v=Gm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=_p(e,1,!1,null,null,a,u,null,d,m,v,Op),e[dn]=s.current,Rc(e),new Xc(s)},oa.hydrateRoot=function(e,s,a){if(!l(e))throw Error(r(299));var u=!1,d="",m=Pm,v=Lm,w=Gm,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=_p(e,1,!0,s,a??null,u,d,N,m,v,w,Op),s.context=bp(null),a=s.current,u=Ze(),u=Po(u),d=ms(u),d.callback=null,ps(a,d,u),a=u,s.current.lanes=a,yr(s,a),Ci(s),e[dn]=s.current,Rc(e),new eo(s)},oa.version="19.2.3",oa}var qp;function Gx(){if(qp)return Qc.exports;qp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Qc.exports=Lx(),Qc.exports}var qx=Gx();const Hx=Ua(qx);var ks=(n=>(n[n.START=0]="START",n[n.PLAYING=1]="PLAYING",n[n.GAME_OVER=2]="GAME_OVER",n))(ks||{}),is=(n=>(n.EASY="EASY",n.NORMAL="NORMAL",n.HARD="HARD",n))(is||{}),Z=(n=>(n[n.CHERRY=0]="CHERRY",n[n.STRAWBERRY=1]="STRAWBERRY",n[n.GRAPE=2]="GRAPE",n[n.CLEMENTINE=3]="CLEMENTINE",n[n.ORANGE=4]="ORANGE",n[n.APPLE=5]="APPLE",n[n.PINEAPPLE=6]="PINEAPPLE",n[n.COCONUT=7]="COCONUT",n[n.PUMPKIN=8]="PUMPKIN",n[n.WATERMELON=9]="WATERMELON",n[n.TOMATO=99]="TOMATO",n))(Z||{});/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ix=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,r)=>r?r.toUpperCase():i.toLowerCase()),Hp=n=>{const t=Ix(n);return t.charAt(0).toUpperCase()+t.slice(1)},vy=(...n)=>n.filter((t,i,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===i).join(" ").trim(),Yx=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Nt.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:l="",children:o,iconNode:c,...h},f)=>Nt.createElement("svg",{ref:f,...Vx,width:t,height:t,stroke:n,strokeWidth:r?Number(i)*24/Number(t):i,className:vy("lucide",l),...!o&&!Yx(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,g])=>Nt.createElement(p,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(n,t)=>{const i=Nt.forwardRef(({className:r,...l},o)=>Nt.createElement(Fx,{ref:o,iconNode:t,className:vy(`lucide-${$x(Hp(n))}`,`lucide-${n}`,r),...l}));return i.displayName=Hp(n),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_y=qe("clock",Xx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],by=qe("globe",Kx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],xy=qe("house",Wx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["path",{d:"m9 9 12-2",key:"1e64n2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],wy=qe("music-4",Qx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Sy=qe("music",Zx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],tw=qe("pause",Jx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ty=qe("play",ew);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ey=qe("rotate-ccw",iw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],To=qe("trophy",sw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ay=qe("user",nw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["path",{d:"M8 8v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2",key:"1hbad5"}],["path",{d:"M16 10.34V6c0-.55-.45-1-1-1h-4.34",key:"1x5tf0"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],Cy=qe("vibrate-off",rw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]],My=qe("vibrate",aw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Ry=qe("volume-2",lw);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Oy=qe("volume-x",ow),uw=({onStart:n,leaderboard:t,settings:i,onUpdateSettings:r})=>{const l=()=>r({...i,musicEnabled:!i.musicEnabled}),o=()=>r({...i,sfxEnabled:!i.sfxEnabled}),c=()=>r({...i,hapticsEnabled:!i.hapticsEnabled}),h=()=>r({...i,showLocalOnly:!i.showLocalOnly}),f=[...t].sort((g,y)=>y.score-g.score).slice(0,3),p=i.showLocalOnly?"Local Best":"Global Ranking";return j.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 z-20 text-center font-['Fredoka'] overflow-hidden",children:[j.jsxs("div",{className:"absolute top-[-20%] left-[-20%] w-[140%] h-[140%] pointer-events-none",children:[j.jsx("div",{className:"absolute top-[20%] left-[20%] w-64 h-64 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-float",style:{animationDuration:"8s"}}),j.jsx("div",{className:"absolute top-[30%] right-[20%] w-72 h-72 bg-yellow-300 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-float",style:{animationDuration:"10s",animationDelay:"2s"}}),j.jsx("div",{className:"absolute bottom-[20%] left-[30%] w-80 h-80 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-float",style:{animationDuration:"12s",animationDelay:"4s"}})]}),j.jsxs("div",{className:"relative bg-white/95 backdrop-blur-2xl border border-white/50 shadow-[0_20px_50px_rgba(0,0,0,0.15)] rounded-[3rem] p-8 w-full max-w-lg flex flex-col items-center",children:[j.jsxs("div",{className:"mb-6 relative",children:[j.jsxs("h1",{className:"text-6xl font-black text-gray-900 drop-shadow-sm tracking-tight leading-none",children:["FRUIT",j.jsx("br",{}),j.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500",children:"BOUNCE"})]}),j.jsx("div",{className:"absolute -right-6 -top-4 rotate-12 bg-white border border-gray-100 px-3 py-1 rounded-full text-xs font-bold text-orange-500 shadow-lg",children:"MERGE!"})]}),j.jsxs("div",{className:"mb-8 bg-slate-50 border border-slate-200 rounded-2xl p-4 shadow-inner w-full flex flex-col gap-2",children:[j.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400 uppercase tracking-widest text-xs font-bold mb-1",children:[j.jsx(To,{size:14})," ",p]}),f.length===0?j.jsx("div",{className:"text-slate-400 italic text-sm py-2",children:"No scores yet!"}):f.map((g,y)=>j.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700 border-b border-slate-100 last:border-0 pb-1 last:pb-0",children:[j.jsxs("div",{className:"flex gap-2",children:[j.jsxs("span",{className:`${y===0?"text-yellow-500":"text-slate-400"}`,children:["#",y+1]}),j.jsx("span",{children:g.name})]}),j.jsx("span",{children:g.score.toLocaleString()})]},y))]}),j.jsxs("button",{onClick:()=>n(is.HARD),className:"group relative w-full bg-gradient-to-r from-emerald-400 to-green-500 hover:from-emerald-300 hover:to-green-400 text-white font-black text-2xl py-6 rounded-3xl shadow-[0_10px_20px_rgba(16,185,129,0.4)] transition-all transform active:scale-95 active:shadow-inner overflow-hidden mb-6",children:[j.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-3 drop-shadow-md",children:[j.jsx(Ty,{size:32,fill:"currentColor"})," PLAY"]}),j.jsx("div",{className:"absolute top-0 -inset-full h-full w-1/2 z-5 block transform -skew-x-12 bg-gradient-to-r from-transparent to-white opacity-20 group-hover:animate-shine"})]}),j.jsxs("div",{className:"flex gap-3 w-full justify-center",children:[j.jsx("button",{onClick:l,className:`p-3 rounded-2xl shadow-md transition-all active:scale-95 flex justify-center items-center ${i.musicEnabled?"bg-blue-500 text-white hover:bg-blue-400":"bg-gray-200 text-gray-400 hover:bg-gray-300"}`,"aria-label":"Toggle Music",children:i.musicEnabled?j.jsx(Sy,{size:24}):j.jsx(wy,{size:24})}),j.jsx("button",{onClick:o,className:`p-3 rounded-2xl shadow-md transition-all active:scale-95 flex justify-center items-center ${i.sfxEnabled?"bg-orange-500 text-white hover:bg-orange-400":"bg-gray-200 text-gray-400 hover:bg-gray-300"}`,"aria-label":"Toggle SFX",children:i.sfxEnabled?j.jsx(Ry,{size:24}):j.jsx(Oy,{size:24})}),j.jsx("button",{onClick:c,className:`p-3 rounded-2xl shadow-md transition-all active:scale-95 flex justify-center items-center ${i.hapticsEnabled?"bg-purple-500 text-white hover:bg-purple-400":"bg-gray-200 text-gray-400 hover:bg-gray-300"}`,"aria-label":"Toggle Haptics",children:i.hapticsEnabled?j.jsx(My,{size:24}):j.jsx(Cy,{size:24})}),j.jsx("button",{onClick:h,className:`p-3 rounded-2xl shadow-md transition-all active:scale-95 flex justify-center items-center ${i.showLocalOnly?"bg-gray-200 text-gray-400 hover:bg-gray-300":"bg-teal-500 text-white hover:bg-teal-400"}`,"aria-label":"Toggle Leaderboard Mode",children:i.showLocalOnly?j.jsx(Ay,{size:24}):j.jsx(by,{size:24})})]})]}),j.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2",children:[j.jsx("div",{className:"text-gray-500/60 text-sm font-bold",children:"v2026.2 Jens Madsen"}),j.jsx("div",{className:"text-gray-400 text-xs font-medium max-w-[250px] leading-tight",children:"For my bro who's also called Jens, you're fkn awesome!"})]})]})},Si={[Z.CHERRY]:{tier:Z.CHERRY,name:"Cherry",radius:22,mass:1,color:"#D32F2F",patternColor:"#B71C1C",emoji:[],bounciness:.4},[Z.STRAWBERRY]:{tier:Z.STRAWBERRY,name:"Strawberry",radius:32,mass:1,color:"#F44336",patternColor:"#D32F2F",emoji:[],bounciness:.4},[Z.GRAPE]:{tier:Z.GRAPE,name:"Grape",radius:42,mass:1,color:"#7B1FA2",patternColor:"#4A148C",emoji:[],bounciness:.4},[Z.CLEMENTINE]:{tier:Z.CLEMENTINE,name:"Clementine",radius:52,mass:1,color:"#FF9800",patternColor:"#EF6C00",emoji:[],bounciness:.4},[Z.ORANGE]:{tier:Z.ORANGE,name:"Orange",radius:65,mass:1,color:"#FF5722",patternColor:"#E64A19",emoji:[],bounciness:.4},[Z.APPLE]:{tier:Z.APPLE,name:"Apple",radius:80,mass:1,color:"#8BC34A",patternColor:"#689F38",emoji:[],bounciness:.4},[Z.PINEAPPLE]:{tier:Z.PINEAPPLE,name:"Pineapple",radius:95,mass:1,color:"#FDD835",patternColor:"#F9A825",emoji:[],bounciness:.4},[Z.COCONUT]:{tier:Z.COCONUT,name:"Coconut",radius:110,mass:1,color:"#795548",patternColor:"#4E342E",emoji:[],bounciness:.4},[Z.PUMPKIN]:{tier:Z.PUMPKIN,name:"Pumpkin",radius:130,mass:1,color:"#FF7043",patternColor:"#D84315",emoji:[],bounciness:.4},[Z.WATERMELON]:{tier:Z.WATERMELON,name:"Watermelon",radius:155,mass:1,color:"#4CAF50",patternColor:"#1B5E20",emoji:[],bounciness:.4},[Z.TOMATO]:{tier:Z.TOMATO,name:"Tomato",radius:45,mass:1,color:"#FF1744",patternColor:"#D50000",emoji:[],bounciness:.6}},eh=.8,ih=.98,$p={[is.EASY]:{gravity:eh,friction:ih,aimAssist:!0,spawnDelay:400,spawnTiers:[Z.CHERRY,Z.STRAWBERRY,Z.GRAPE,Z.CLEMENTINE]},[is.NORMAL]:{gravity:eh,friction:ih,aimAssist:!0,spawnDelay:500,spawnTiers:[Z.CHERRY,Z.STRAWBERRY,Z.GRAPE]},[is.HARD]:{gravity:eh,friction:ih,aimAssist:!1,spawnDelay:600,spawnTiers:[Z.CHERRY,Z.STRAWBERRY]}},cw=10,so=.99,Ip=.5,hw=5e3,Yp=.15,sh=.08,dw=2,fw=1e4,ua=1500,ky="fruit_bounce_merge_v3",mw=({stats:n,isNewHigh:t,leaderboard:i,onRestart:r,onMenu:l,onSaveScore:o})=>{var A;const[c,h]=Nt.useState(""),[f,p]=Nt.useState(!1),g=()=>{c.trim().length>0&&(o(c.trim().substring(0,10)),p(!0))},y=T=>{const R=Math.floor(T/1e3),M=Math.floor(R/60),k=R%60;return`${M}:${k.toString().padStart(2,"0")}`},b=[...i].sort((T,R)=>R.score-T.score).slice(0,10),_=i.length>0?Math.max(...i.map(T=>T.score)):0,S=n.score>_;return j.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center p-6 z-30 text-white animate-fade-in font-['Fredoka']",children:j.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl border border-white/50 text-gray-800 rounded-[2.5rem] p-6 w-full max-w-lg text-center shadow-[0_20px_60px_rgba(0,0,0,0.3)] transform scale-100 animate-pop flex flex-col items-center max-h-[90vh] overflow-hidden",children:[j.jsx("h2",{className:"text-4xl font-black mb-2 text-red-500 drop-shadow-sm tracking-wide",children:"GAME OVER"}),t&&!f&&j.jsx("div",{className:"mb-2 w-full animate-bounce",children:j.jsxs("div",{className:`font-bold px-4 py-2 rounded-xl shadow-lg inline-flex items-center gap-2 ${S?"bg-gradient-to-r from-yellow-300 to-yellow-500 text-yellow-900":"bg-blue-100 text-blue-700"}`,children:[j.jsx(To,{size:18,fill:"currentColor"}),S?"NEW RECORD!":"HIGH SCORE!"]})}),j.jsx("div",{className:"text-5xl font-black text-gray-900 mb-4 font-mono tracking-tighter drop-shadow-sm",children:n.score.toLocaleString()}),j.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-4 w-full shrink-0",children:[j.jsxs("div",{className:"bg-slate-100 p-2 rounded-2xl flex flex-col items-center",children:[j.jsx("span",{className:"font-bold text-slate-400 uppercase text-[10px] tracking-wider mb-1",children:"Time"}),j.jsxs("span",{className:"text-lg font-black text-slate-700 flex items-center gap-1",children:[j.jsx(_y,{size:14})," ",y(n.timePlayed)]})]}),j.jsxs("div",{className:"bg-slate-100 p-2 rounded-2xl flex flex-col items-center",children:[j.jsx("span",{className:"font-bold text-slate-400 uppercase text-[10px] tracking-wider mb-1",children:"Level"}),j.jsxs("span",{className:"text-lg font-black text-slate-700 flex items-center gap-1",children:[j.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:((A=Si[n.maxTier])==null?void 0:A.color)||"#000"}}),n.maxTier+1]})]})]}),j.jsxs("div",{className:"w-full mb-4 bg-slate-50 border border-slate-200 rounded-2xl p-4 shadow-inner flex flex-col overflow-hidden min-h-0 flex-1",children:[j.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400 uppercase tracking-widest text-xs font-bold mb-2 shrink-0",children:[j.jsx(To,{size:14})," Global Leaderboard"]}),j.jsxs("div",{className:"flex justify-between items-center text-[10px] uppercase font-bold text-slate-400 px-2 mb-1 border-b border-slate-200 pb-1",children:[j.jsx("div",{className:"w-8 text-center",children:"#"}),j.jsx("div",{className:"flex-1 text-left",children:"Name"}),j.jsx("div",{className:"w-12 text-center",children:"Lvl"}),j.jsx("div",{className:"w-14 text-center",children:"Time"}),j.jsx("div",{className:"w-20 text-right",children:"Score"})]}),j.jsx("div",{className:"overflow-y-auto pr-1 custom-scrollbar",children:b.length===0?j.jsx("div",{className:"text-center text-slate-400 italic text-sm mt-4",children:"No scores yet. Be the first!"}):b.map((T,R)=>{var M;return j.jsxs("div",{className:`flex justify-between items-center text-sm font-bold border-b border-slate-100 last:border-0 py-2 px-1 ${T.score===n.score&&f&&T.name===c?"text-blue-600 bg-blue-50 rounded-md":"text-slate-700"}`,children:[j.jsxs("div",{className:`w-8 text-center ${R<3?"text-yellow-500":"text-slate-400"}`,children:["#",R+1]}),j.jsx("div",{className:"flex-1 text-left truncate pr-2",children:T.name}),j.jsxs("div",{className:"w-12 text-center flex justify-center items-center",children:[j.jsx("div",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:((M=Si[T.maxTier??0])==null?void 0:M.color)||"#999"}}),(T.maxTier??0)+1]}),j.jsx("div",{className:"w-14 text-center text-xs font-normal text-slate-500",children:y(T.timePlayed||0)}),j.jsx("div",{className:"w-20 text-right font-mono text-slate-800",children:T.score.toLocaleString()})]},R)})})]}),t&&!f&&j.jsxs("div",{className:"w-full mb-4 shrink-0 animate-fade-in",children:[j.jsx("label",{className:"block text-slate-500 text-sm font-bold mb-2 uppercase tracking-wide",children:S?"New Record! Enter Name:":"Enter Name for Leaderboard:"}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("input",{type:"text",value:c,onChange:T=>h(T.target.value),placeholder:"Player 1",maxLength:10,className:"flex-1 bg-slate-100 border-2 border-slate-200 rounded-2xl px-4 py-3 font-bold text-slate-800 text-lg focus:outline-none focus:border-blue-500 transition-colors placeholder:text-slate-300"}),j.jsx("button",{onClick:g,disabled:c.length===0,className:"bg-blue-500 text-white font-bold px-6 py-3 rounded-2xl shadow-md active:scale-95 disabled:opacity-50 disabled:active:scale-100",children:"SAVE"})]})]}),j.jsxs("div",{className:"w-full space-y-3 shrink-0",children:[j.jsxs("button",{onClick:r,className:"w-full bg-amber-500 hover:bg-amber-400 text-white font-black text-xl py-4 rounded-2xl shadow-[0_8px_16px_rgba(245,158,11,0.3)] active:scale-95 transition-all flex items-center justify-center gap-2",children:[j.jsx(Ey,{size:24,strokeWidth:3})," PLAY AGAIN"]}),j.jsxs("button",{onClick:l,className:"w-full bg-slate-200 hover:bg-slate-300 text-slate-600 font-bold text-lg py-4 rounded-2xl active:scale-95 transition-all flex items-center justify-center gap-2",children:[j.jsx(xy,{size:22})," MENU"]})]})]})})},pw="modulepreload",gw=function(n){return"/fruit-bounce-merge/"+n},Vp={},Eo=function(t,i,r){let l=Promise.resolve();if(i&&i.length>0){let c=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));l=c(i.map(p=>{if(p=gw(p),p in Vp)return;Vp[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":pw,g||(b.as="script"),b.crossOrigin="",b.href=p,f&&b.setAttribute("nonce",f),document.head.appendChild(b),g)return new Promise((_,S)=>{b.addEventListener("load",_),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return l.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})};var Pt=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(Pt||{});const qh=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},no=(n,t)=>qh(n).priority??t,Di={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(qh).forEach(t=>{t.type.forEach(i=>{var r,l;return(l=(r=this._removeHandlers)[i])==null?void 0:l.call(r,t)})}),this},add(...n){return n.map(qh).forEach(t=>{t.type.forEach(i=>{var o,c;const r=this._addHandlers,l=this._queue;r[i]?(c=r[i])==null||c.call(r,t):(l[i]=l[i]||[],(o=l[i])==null||o.push(t))})}),this},handle(n,t,i){var c;const r=this._addHandlers,l=this._removeHandlers;if(r[n]||l[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=t,l[n]=i;const o=this._queue;return o[n]&&((c=o[n])==null||c.forEach(h=>t(h)),delete o[n]),this},handleByMap(n,t){return this.handle(n,i=>{i.name&&(t[i.name]=i.ref)},i=>{i.name&&delete t[i.name]})},handleByNamedList(n,t,i=-1){return this.handle(n,r=>{t.findIndex(o=>o.name===r.name)>=0||(t.push({name:r.name,value:r.ref}),t.sort((o,c)=>no(c.value,i)-no(o.value,i)))},r=>{const l=t.findIndex(o=>o.name===r.name);l!==-1&&t.splice(l,1)})},handleByList(n,t,i=-1){return this.handle(n,r=>{t.includes(r.ref)||(t.push(r.ref),t.sort((l,o)=>no(o,i)-no(l,i)))},r=>{const l=t.indexOf(r.ref);l!==-1&&t.splice(l,1)})}},yw={extension:{type:Pt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Eo(()=>import("./browserAll-C0JWhwSj.js"),__vite__mapDeps([0,1,2,3]))}},vw={extension:{type:Pt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Eo(()=>import("./webworkerAll-BkQ_Bj8e.js"),__vite__mapDeps([1,2,3]))}};class ei{constructor(t,i,r){this._x=i||0,this._y=r||0,this._observer=t}clone(t){return new ei(t??this._observer,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var nh={exports:{}},Fp;function _w(){return Fp||(Fp=1,(function(n){var t=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function l(f,p,g){this.fn=f,this.context=p,this.once=g||!1}function o(f,p,g,y,b){if(typeof g!="function")throw new TypeError("The listener must be a function");var _=new l(g,y||f,b),S=i?i+p:p;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],_]:f._events[S].push(_):(f._events[S]=_,f._eventsCount++),f}function c(f,p){--f._eventsCount===0?f._events=new r:delete f._events[p]}function h(){this._events=new r,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],g,y;if(this._eventsCount===0)return p;for(y in g=this._events)t.call(g,y)&&p.push(i?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},h.prototype.listeners=function(p){var g=i?i+p:p,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var b=0,_=y.length,S=new Array(_);b<_;b++)S[b]=y[b].fn;return S},h.prototype.listenerCount=function(p){var g=i?i+p:p,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(p,g,y,b,_,S){var A=i?i+p:p;if(!this._events[A])return!1;var T=this._events[A],R=arguments.length,M,k;if(T.fn){switch(T.once&&this.removeListener(p,T.fn,void 0,!0),R){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,g),!0;case 3:return T.fn.call(T.context,g,y),!0;case 4:return T.fn.call(T.context,g,y,b),!0;case 5:return T.fn.call(T.context,g,y,b,_),!0;case 6:return T.fn.call(T.context,g,y,b,_,S),!0}for(k=1,M=new Array(R-1);k<R;k++)M[k-1]=arguments[k];T.fn.apply(T.context,M)}else{var H=T.length,X;for(k=0;k<H;k++)switch(T[k].once&&this.removeListener(p,T[k].fn,void 0,!0),R){case 1:T[k].fn.call(T[k].context);break;case 2:T[k].fn.call(T[k].context,g);break;case 3:T[k].fn.call(T[k].context,g,y);break;case 4:T[k].fn.call(T[k].context,g,y,b);break;default:if(!M)for(X=1,M=new Array(R-1);X<R;X++)M[X-1]=arguments[X];T[k].fn.apply(T[k].context,M)}}return!0},h.prototype.on=function(p,g,y){return o(this,p,g,y,!1)},h.prototype.once=function(p,g,y){return o(this,p,g,y,!0)},h.prototype.removeListener=function(p,g,y,b){var _=i?i+p:p;if(!this._events[_])return this;if(!g)return c(this,_),this;var S=this._events[_];if(S.fn)S.fn===g&&(!b||S.once)&&(!y||S.context===y)&&c(this,_);else{for(var A=0,T=[],R=S.length;A<R;A++)(S[A].fn!==g||b&&!S[A].once||y&&S[A].context!==y)&&T.push(S[A]);T.length?this._events[_]=T.length===1?T[0]:T:c(this,_)}return this},h.prototype.removeAllListeners=function(p){var g;return p?(g=i?i+p:p,this._events[g]&&c(this,g)):(this._events=new r,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=i,h.EventEmitter=h,n.exports=h})(nh)),nh.exports}var bw=_w();const ns=Ua(bw),xw=Math.PI*2,ww=180/Math.PI,Sw=Math.PI/180;class Re{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new Re(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return rh.x=0,rh.y=0,rh}}const rh=new Re;class Ut{constructor(t=1,i=0,r=0,l=1,o=0,c=0){this.array=null,this.a=t,this.b=i,this.c=r,this.d=l,this.tx=o,this.ty=c}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,r,l,o,c){return this.a=t,this.b=i,this.c=r,this.d=l,this.tx=o,this.ty=c,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const r=i||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,i){i=i||new Re;const r=t.x,l=t.y;return i.x=this.a*r+this.c*l+this.tx,i.y=this.b*r+this.d*l+this.ty,i}applyInverse(t,i){i=i||new Re;const r=this.a,l=this.b,o=this.c,c=this.d,h=this.tx,f=this.ty,p=1/(r*c+o*-l),g=t.x,y=t.y;return i.x=c*p*g+-o*p*y+(f*o-h*c)*p,i.y=r*p*y+-l*p*g+(-f*r+h*l)*p,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),r=Math.sin(t),l=this.a,o=this.c,c=this.tx;return this.a=l*i-this.b*r,this.b=l*r+this.b*i,this.c=o*i-this.d*r,this.d=o*r+this.d*i,this.tx=c*i-this.ty*r,this.ty=c*r+this.ty*i,this}append(t){const i=this.a,r=this.b,l=this.c,o=this.d;return this.a=t.a*i+t.b*l,this.b=t.a*r+t.b*o,this.c=t.c*i+t.d*l,this.d=t.c*r+t.d*o,this.tx=t.tx*i+t.ty*l+this.tx,this.ty=t.tx*r+t.ty*o+this.ty,this}appendFrom(t,i){const r=t.a,l=t.b,o=t.c,c=t.d,h=t.tx,f=t.ty,p=i.a,g=i.b,y=i.c,b=i.d;return this.a=r*p+l*y,this.b=r*g+l*b,this.c=o*p+c*y,this.d=o*g+c*b,this.tx=h*p+f*y+i.tx,this.ty=h*g+f*b+i.ty,this}setTransform(t,i,r,l,o,c,h,f,p){return this.a=Math.cos(h+p)*o,this.b=Math.sin(h+p)*o,this.c=-Math.sin(h-f)*c,this.d=Math.cos(h-f)*c,this.tx=t-(r*this.a+l*this.c),this.ty=i-(r*this.b+l*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const r=this.a,l=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=l*t.a+this.d*t.c,this.d=l*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,r=this.b,l=this.c,o=this.d,c=t.pivot,h=-Math.atan2(-l,o),f=Math.atan2(r,i),p=Math.abs(h+f);return p<1e-5||Math.abs(xw-p)<1e-5?(t.rotation=f,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=f),t.scale.x=Math.sqrt(i*i+r*r),t.scale.y=Math.sqrt(l*l+o*o),t.position.x=this.tx+(c.x*i+c.y*l),t.position.y=this.ty+(c.x*r+c.y*o),t}invert(){const t=this.a,i=this.b,r=this.c,l=this.d,o=this.tx,c=t*l-i*r;return this.a=l/c,this.b=-i/c,this.c=-r/c,this.d=t/c,this.tx=(r*this.ty-l*o)/c,this.ty=-(t*this.ty-i*o)/c,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Ut;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Ew.identity()}static get shared(){return Tw.identity()}}const Tw=new Ut,Ew=new Ut,nn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],rn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],an=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ln=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Hh=[],Ny=[],ro=Math.sign;function Aw(){for(let n=0;n<16;n++){const t=[];Hh.push(t);for(let i=0;i<16;i++){const r=ro(nn[n]*nn[i]+an[n]*rn[i]),l=ro(rn[n]*nn[i]+ln[n]*rn[i]),o=ro(nn[n]*an[i]+an[n]*ln[i]),c=ro(rn[n]*an[i]+ln[n]*ln[i]);for(let h=0;h<16;h++)if(nn[h]===r&&rn[h]===l&&an[h]===o&&ln[h]===c){t.push(h);break}}}for(let n=0;n<16;n++){const t=new Ut;t.set(nn[n],rn[n],an[n],ln[n],0,0),Ny.push(t)}}Aw();const Wt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>nn[n],uY:n=>rn[n],vX:n=>an[n],vY:n=>ln[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>Hh[n][t],sub:(n,t)=>Hh[n][Wt.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?Wt.S:Wt.N:Math.abs(t)*2<=Math.abs(n)?n>0?Wt.E:Wt.W:t>0?n>0?Wt.SE:Wt.SW:n>0?Wt.NE:Wt.NW,matrixAppendRotationInv:(n,t,i=0,r=0)=>{const l=Ny[Wt.inv(t)];l.tx=i,l.ty=r,n.append(l)}},ao=[new Re,new Re,new Re,new Re];class Ce{constructor(t=0,i=0,r=0,l=0){this.type="rectangle",this.x=Number(t),this.y=Number(i),this.width=Number(r),this.height=Number(l)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Ce(0,0,0,0)}clone(){return new Ce(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}strokeContains(t,i,r,l=.5){const{width:o,height:c}=this;if(o<=0||c<=0)return!1;const h=this.x,f=this.y,p=r*(1-l),g=r-p,y=h-p,b=h+o+p,_=f-p,S=f+c+p,A=h+g,T=h+o-g,R=f+g,M=f+c-g;return t>=y&&t<=b&&i>=_&&i<=S&&!(t>A&&t<T&&i>R&&i<M)}intersects(t,i){if(!i){const st=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=st)return!1;const nt=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>nt}const r=this.left,l=this.right,o=this.top,c=this.bottom;if(l<=r||c<=o)return!1;const h=ao[0].set(t.left,t.top),f=ao[1].set(t.left,t.bottom),p=ao[2].set(t.right,t.top),g=ao[3].set(t.right,t.bottom);if(p.x<=h.x||f.y<=h.y)return!1;const y=Math.sign(i.a*i.d-i.b*i.c);if(y===0||(i.apply(h,h),i.apply(f,f),i.apply(p,p),i.apply(g,g),Math.max(h.x,f.x,p.x,g.x)<=r||Math.min(h.x,f.x,p.x,g.x)>=l||Math.max(h.y,f.y,p.y,g.y)<=o||Math.min(h.y,f.y,p.y,g.y)>=c))return!1;const b=y*(f.y-h.y),_=y*(h.x-f.x),S=b*r+_*o,A=b*l+_*o,T=b*r+_*c,R=b*l+_*c;if(Math.max(S,A,T,R)<=b*h.x+_*h.y||Math.min(S,A,T,R)>=b*g.x+_*g.y)return!1;const M=y*(h.y-p.y),k=y*(p.x-h.x),H=M*r+k*o,X=M*l+k*o,P=M*r+k*c,L=M*l+k*c;return!(Math.max(H,X,P,L)<=M*h.x+k*h.y||Math.min(H,X,P,L)>=M*g.x+k*g.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),l=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(r-i,0),this.y=l,this.height=Math.max(o-l,0),this}ceil(t=1,i=.001){const r=Math.ceil((this.x+this.width-i)*t)/t,l=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=r-this.x,this.height=l-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),l=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=r-i,this.y=l,this.height=o-l,this}getBounds(t){return t||(t=new Ce),t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ah={default:-1};function fe(n="default"){return ah[n]===void 0&&(ah[n]=-1),++ah[n]}const Xp={},de="8.0.0",Cw="8.3.4";function ee(n,t,i=3){if(Xp[t])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(r=r.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(r))),Xp[t]=!0}const jy=()=>{};function Kp(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function Wp(n){return!(n&n-1)&&!!n}function Mw(n){const t={};for(const i in n)n[i]!==void 0&&(t[i]=n[i]);return t}const Qp=Object.create(null);function Rw(n){const t=Qp[n];return t===void 0&&(Qp[n]=fe("resource")),t}const Dy=class Uy extends ns{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Uy.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){ee(de,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Rw(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Dy.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Ow=Dy;const zy=class By extends ns{constructor(t={}){super(),this.options=t,this.uid=fe("textureSource"),this._resourceType="textureSource",this._resourceId=fe("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...By.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new Ow(Mw(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var i,r;this.style!==t&&((i=this._style)==null||i.off("change",this._onStyleChange,this),this._style=t,(r=this._style)==null||r.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=fe("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,i,r){r||(r=this._resolution),t||(t=this.width),i||(i=this.height);const l=Math.round(t*r),o=Math.round(i*r);return this.width=l/r,this.height=o/r,this._resolution=r,this.pixelWidth===l&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=l,this.pixelHeight=o,this.emit("resize",this),this._resourceId=fe("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Wp(this.pixelWidth)&&Wp(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};zy.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Ui=zy;class gd extends Ui{constructor(t){const i=t.resource||new Float32Array(t.width*t.height*4);let r=t.format;r||(i instanceof Float32Array?r="rgba32float":i instanceof Int32Array||i instanceof Uint32Array?r="rgba32uint":i instanceof Int16Array||i instanceof Uint16Array?r="rgba16uint":(i instanceof Int8Array,r="bgra8unorm")),super({...t,resource:i,format:r}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}gd.extension=Pt.TextureSource;const Zp=new Ut;class kw{constructor(t,i){this.mapCoord=new Ut,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof i>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=i,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var i;this.texture!==t&&((i=this._texture)==null||i.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,i){i===void 0&&(i=t);const r=this.mapCoord;for(let l=0;l<t.length;l+=2){const o=t[l],c=t[l+1];i[l]=o*r.a+c*r.c+r.tx,i[l+1]=o*r.b+c*r.d+r.ty}return i}update(){const t=this._texture;this._updateID++;const i=t.uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=t.orig,l=t.trim;l&&(Zp.set(r.width/l.width,0,0,r.height/l.height,-l.x/l.width,-l.y/l.height),this.mapCoord.append(Zp));const o=t.source,c=this.uClampFrame,h=this.clampMargin/o._resolution,f=this.clampOffset/o._resolution;return c[0]=(t.frame.x+h+f)/o.width,c[1]=(t.frame.y+h+f)/o.height,c[2]=(t.frame.x+t.frame.width-h+f)/o.width,c[3]=(t.frame.y+t.frame.height-h+f)/o.height,this.uClampOffset[0]=this.clampOffset/o.pixelWidth,this.uClampOffset[1]=this.clampOffset/o.pixelHeight,this.isSimple=t.frame.width===o.width&&t.frame.height===o.height&&t.rotate===0,!0}}class It extends ns{constructor({source:t,label:i,frame:r,orig:l,trim:o,defaultAnchor:c,defaultBorders:h,rotate:f,dynamic:p}={}){if(super(),this.uid=fe("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ce,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=i,this.source=(t==null?void 0:t.source)??new Ui,this.noFrame=!r,r)this.frame.copyFrom(r);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=l||this.frame,this.trim=o,this.rotate=f??0,this.defaultAnchor=c,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new kw(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:i}=this,{width:r,height:l}=this._source,o=i.x/r,c=i.y/l,h=i.width/r,f=i.height/l;let p=this.rotate;if(p){const g=h/2,y=f/2,b=o+g,_=c+y;p=Wt.add(p,Wt.NW),t.x0=b+g*Wt.uX(p),t.y0=_+y*Wt.uY(p),p=Wt.add(p,2),t.x1=b+g*Wt.uX(p),t.y1=_+y*Wt.uY(p),p=Wt.add(p,2),t.x2=b+g*Wt.uX(p),t.y2=_+y*Wt.uY(p),p=Wt.add(p,2),t.x3=b+g*Wt.uX(p),t.y3=_+y*Wt.uY(p)}else t.x0=o,t.y0=c,t.x1=o+h,t.y1=c,t.x2=o+h,t.y2=c+f,t.x3=o,t.y3=c+f}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return ee(de,"Texture.baseTexture is now Texture.source"),this._source}}It.EMPTY=new It({label:"EMPTY",source:new Ui({label:"EMPTY"})});It.EMPTY.destroy=jy;It.WHITE=new It({source:new gd({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});It.WHITE.destroy=jy;function Nw(n,t,i,r){const{width:l,height:o}=i.orig,c=i.trim;if(c){const h=c.width,f=c.height;n.minX=c.x-t._x*l-r,n.maxX=n.minX+h,n.minY=c.y-t._y*o-r,n.maxY=n.minY+f}else n.minX=-t._x*l-r,n.maxX=n.minX+l,n.minY=-t._y*o-r,n.maxY=n.minY+o}const Jp=new Ut;class ji{constructor(t=1/0,i=1/0,r=-1/0,l=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Jp,this.minX=t,this.minY=i,this.maxX=r,this.maxY=l}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ce);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Jp,this}set(t,i,r,l){this.minX=t,this.minY=i,this.maxX=r,this.maxY=l}addFrame(t,i,r,l,o){o||(o=this.matrix);const c=o.a,h=o.b,f=o.c,p=o.d,g=o.tx,y=o.ty;let b=this.minX,_=this.minY,S=this.maxX,A=this.maxY,T=c*t+f*i+g,R=h*t+p*i+y;T<b&&(b=T),R<_&&(_=R),T>S&&(S=T),R>A&&(A=R),T=c*r+f*i+g,R=h*r+p*i+y,T<b&&(b=T),R<_&&(_=R),T>S&&(S=T),R>A&&(A=R),T=c*t+f*l+g,R=h*t+p*l+y,T<b&&(b=T),R<_&&(_=R),T>S&&(S=T),R>A&&(A=R),T=c*r+f*l+g,R=h*r+p*l+y,T<b&&(b=T),R<_&&(_=R),T>S&&(S=T),R>A&&(A=R),this.minX=b,this.minY=_,this.maxX=S,this.maxY=A}addRect(t,i){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,i)}addBounds(t,i){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,i)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const i=this.minX,r=this.minY,l=this.maxX,o=this.maxY,{a:c,b:h,c:f,d:p,tx:g,ty:y}=t;let b=c*i+f*r+g,_=h*i+p*r+y;this.minX=b,this.minY=_,this.maxX=b,this.maxY=_,b=c*l+f*r+g,_=h*l+p*r+y,this.minX=b<this.minX?b:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=b>this.maxX?b:this.maxX,this.maxY=_>this.maxY?_:this.maxY,b=c*i+f*o+g,_=h*i+p*o+y,this.minX=b<this.minX?b:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=b>this.maxX?b:this.maxX,this.maxY=_>this.maxY?_:this.maxY,b=c*l+f*o+g,_=h*l+p*o+y,this.minX=b<this.minX?b:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=b>this.maxX?b:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,i,r,l){return this.minX<t&&(this.minX=t),this.maxX>i&&(this.maxX=i),this.minY<r&&(this.minY=r),this.maxY>l&&(this.maxY=l),this}pad(t,i=t){return this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new ji(this.minX,this.minY,this.maxX,this.maxY)}scale(t,i=t){return this.minX*=t,this.minY*=i,this.maxX*=t,this.maxY*=i,this}get x(){return this.minX}set x(t){const i=this.maxX-this.minX;this.minX=t,this.maxX=t+i}get y(){return this.minY}set y(t){const i=this.maxY-this.minY;this.minY=t,this.maxY=t+i}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,i,r,l){let o=this.minX,c=this.minY,h=this.maxX,f=this.maxY;l||(l=this.matrix);const p=l.a,g=l.b,y=l.c,b=l.d,_=l.tx,S=l.ty;for(let A=i;A<r;A+=2){const T=t[A],R=t[A+1],M=p*T+y*R+_,k=g*T+b*R+S;o=M<o?M:o,c=k<c?k:c,h=M>h?M:h,f=k>f?k:f}this.minX=o,this.minY=c,this.maxX=h,this.maxY=f}containsPoint(t,i){return this.minX<=t&&this.minY<=i&&this.maxX>=t&&this.maxY>=i}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var jw={grad:.9,turn:360,rad:360/(2*Math.PI)},ts=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ve=function(n,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*n)/i+0},pi=function(n,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),n>i?i:n>t?n:t},Py=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},tg=function(n){return{r:pi(n.r,0,255),g:pi(n.g,0,255),b:pi(n.b,0,255),a:pi(n.a)}},lh=function(n){return{r:ve(n.r),g:ve(n.g),b:ve(n.b),a:ve(n.a,3)}},Dw=/^#([0-9a-f]{3,8})$/i,lo=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},Ly=function(n){var t=n.r,i=n.g,r=n.b,l=n.a,o=Math.max(t,i,r),c=o-Math.min(t,i,r),h=c?o===t?(i-r)/c:o===i?2+(r-t)/c:4+(t-i)/c:0;return{h:60*(h<0?h+6:h),s:o?c/o*100:0,v:o/255*100,a:l}},Gy=function(n){var t=n.h,i=n.s,r=n.v,l=n.a;t=t/360*6,i/=100,r/=100;var o=Math.floor(t),c=r*(1-i),h=r*(1-(t-o)*i),f=r*(1-(1-t+o)*i),p=o%6;return{r:255*[r,h,c,c,f,r][p],g:255*[f,r,r,h,c,c][p],b:255*[c,c,f,r,r,h][p],a:l}},eg=function(n){return{h:Py(n.h),s:pi(n.s,0,100),l:pi(n.l,0,100),a:pi(n.a)}},ig=function(n){return{h:ve(n.h),s:ve(n.s),l:ve(n.l),a:ve(n.a,3)}},sg=function(n){return Gy((i=(t=n).s,{h:t.h,s:(i*=((r=t.l)<50?r:100-r)/100)>0?2*i/(r+i)*100:0,v:r+i,a:t.a}));var t,i,r},xa=function(n){return{h:(t=Ly(n)).h,s:(l=(200-(i=t.s))*(r=t.v)/100)>0&&l<200?i*r/100/(l<=100?l:200-l)*100:0,l:l/2,a:t.a};var t,i,r,l},Uw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Bw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$h={string:[[function(n){var t=Dw.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ve(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ve(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=Bw.exec(n)||Pw.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:tg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=Uw.exec(n)||zw.exec(n);if(!t)return null;var i,r,l=eg({h:(i=t[1],r=t[2],r===void 0&&(r="deg"),Number(i)*(jw[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return sg(l)},"hsl"]],object:[[function(n){var t=n.r,i=n.g,r=n.b,l=n.a,o=l===void 0?1:l;return ts(t)&&ts(i)&&ts(r)?tg({r:Number(t),g:Number(i),b:Number(r),a:Number(o)}):null},"rgb"],[function(n){var t=n.h,i=n.s,r=n.l,l=n.a,o=l===void 0?1:l;if(!ts(t)||!ts(i)||!ts(r))return null;var c=eg({h:Number(t),s:Number(i),l:Number(r),a:Number(o)});return sg(c)},"hsl"],[function(n){var t=n.h,i=n.s,r=n.v,l=n.a,o=l===void 0?1:l;if(!ts(t)||!ts(i)||!ts(r))return null;var c=(function(h){return{h:Py(h.h),s:pi(h.s,0,100),v:pi(h.v,0,100),a:pi(h.a)}})({h:Number(t),s:Number(i),v:Number(r),a:Number(o)});return Gy(c)},"hsv"]]},ng=function(n,t){for(var i=0;i<t.length;i++){var r=t[i][0](n);if(r)return[r,t[i][1]]}return[null,void 0]},Lw=function(n){return typeof n=="string"?ng(n.trim(),$h.string):typeof n=="object"&&n!==null?ng(n,$h.object):[null,void 0]},oh=function(n,t){var i=xa(n);return{h:i.h,s:pi(i.s+100*t,0,100),l:i.l,a:i.a}},uh=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},rg=function(n,t){var i=xa(n);return{h:i.h,s:i.s,l:pi(i.l+100*t,0,100),a:i.a}},Ih=(function(){function n(t){this.parsed=Lw(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ve(uh(this.rgba),2)},n.prototype.isDark=function(){return uh(this.rgba)<.5},n.prototype.isLight=function(){return uh(this.rgba)>=.5},n.prototype.toHex=function(){return t=lh(this.rgba),i=t.r,r=t.g,l=t.b,c=(o=t.a)<1?lo(ve(255*o)):"","#"+lo(i)+lo(r)+lo(l)+c;var t,i,r,l,o,c},n.prototype.toRgb=function(){return lh(this.rgba)},n.prototype.toRgbString=function(){return t=lh(this.rgba),i=t.r,r=t.g,l=t.b,(o=t.a)<1?"rgba("+i+", "+r+", "+l+", "+o+")":"rgb("+i+", "+r+", "+l+")";var t,i,r,l,o},n.prototype.toHsl=function(){return ig(xa(this.rgba))},n.prototype.toHslString=function(){return t=ig(xa(this.rgba)),i=t.h,r=t.s,l=t.l,(o=t.a)<1?"hsla("+i+", "+r+"%, "+l+"%, "+o+")":"hsl("+i+", "+r+"%, "+l+"%)";var t,i,r,l,o},n.prototype.toHsv=function(){return t=Ly(this.rgba),{h:ve(t.h),s:ve(t.s),v:ve(t.v),a:ve(t.a,3)};var t},n.prototype.invert=function(){return Ri({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),Ri(oh(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),Ri(oh(this.rgba,-t))},n.prototype.grayscale=function(){return Ri(oh(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),Ri(rg(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),Ri(rg(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?Ri({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):ve(this.rgba.a,3);var i},n.prototype.hue=function(t){var i=xa(this.rgba);return typeof t=="number"?Ri({h:t,s:i.s,l:i.l,a:i.a}):ve(i.h)},n.prototype.isEqual=function(t){return this.toHex()===Ri(t).toHex()},n})(),Ri=function(n){return n instanceof Ih?n:new Ih(n)},ag=[],Gw=function(n){n.forEach(function(t){ag.indexOf(t)<0&&(t(Ih,$h),ag.push(t))})};function qw(n,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var l in i)r[i[l]]=l;var o={};n.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,p=r[this.toHex()];if(p)return p;if(c!=null&&c.closest){var g=this.toRgb(),y=1/0,b="black";if(!o.length)for(var _ in i)o[_]=new n(i[_]).toRgb();for(var S in i){var A=(h=g,f=o[S],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));A<y&&(y=A,b=S)}return b}},t.string.push([function(c){var h=c.toLowerCase(),f=h==="transparent"?"#0000":i[h];return f?new n(f).toRgb():null},"name"])}Gw([qw]);const hr=class ga{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ga)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,i){const r=typeof t;if(r!==typeof i)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===i;if(Array.isArray(t)&&Array.isArray(i)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(i))return t.length!==i.length?!1:t.every((o,c)=>o===i[c]);if(t!==null&&i!==null){const o=Object.keys(t),c=Object.keys(i);return o.length!==c.length?!1:o.every(h=>t[h]===i[h])}return t===i}toRgba(){const[t,i,r,l]=this._components;return{r:t,g:i,b:r,a:l}}toRgb(){const[t,i,r]=this._components;return{r:t,g:i,b:r}}toRgbaString(){const[t,i,r]=this.toUint8RgbArray();return`rgba(${t},${i},${r},${this.alpha})`}toUint8RgbArray(t){const[i,r,l]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(i*255),t[1]=Math.round(r*255),t[2]=Math.round(l*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[i,r,l,o]=this._components;return t[0]=i,t[1]=r,t[2]=l,t[3]=o,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[i,r,l]=this._components;return t[0]=i,t[1]=r,t[2]=l,t}toNumber(){return this._int}toBgrNumber(){const[t,i,r]=this.toUint8RgbArray();return(r<<16)+(i<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[i,r,l,o]=ga._temp.setValue(t)._components;return this._components[0]*=i,this._components[1]*=r,this._components[2]*=l,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(t,i=!0){return i&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,i=!0){if(t===1)return(255<<24)+this._int;if(t===0)return i?0:this._int;let r=this._int>>16&255,l=this._int>>8&255,o=this._int&255;return i&&(r=r*t+.5|0,l=l*t+.5|0,o=o*t+.5|0),(t*255<<24)+(r<<16)+(l<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const i=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-i.length)+i}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let i,r,l,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const c=t;i=(c>>16&255)/255,r=(c>>8&255)/255,l=(c&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[i,r,l,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[i,r,l,o=255]=t,i/=255,r/=255,l/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=ga.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const c=Ri(t);c.isValid()&&({r:i,g:r,b:l,a:o}=c.rgba,i/=255,r/=255,l/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=r,this._components[2]=l,this._components[3]=o,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,i,r]=this._components;this._int=(t*255<<16)+(i*255<<8)+(r*255|0)}_clamp(t,i=0,r=1){return typeof t=="number"?Math.min(Math.max(t,i),r):(t.forEach((l,o)=>{t[o]=Math.min(Math.max(l,i),r)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof ga||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};hr.shared=new hr;hr._temp=new hr;hr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ni=hr;const Hw={cullArea:null,cullable:!1,cullableChildren:!0};class yd{constructor(t,i){this._pool=[],this._count=0,this._index=0,this._classType=t,i&&this.prepopulate(i)}prepopulate(t){for(let i=0;i<t;i++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var r;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(r=i.init)==null||r.call(i,t),i}return(t){var i;(i=t.reset)==null||i.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class $w{constructor(){this._poolsByClass=new Map}prepopulate(t,i){this.getPool(t).prepopulate(i)}get(t,i){return this.getPool(t).get(i)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new yd(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(i=>{const r=t[i._classType.name]?i._classType.name+i._classType.ID:i._classType.name;t[r]={free:i.totalFree,used:i.totalUsed,size:i.totalSize}}),t}}const ss=new $w,Iw={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){ee("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function Yw(n,t,i){const r=n.length;let l;if(t>=r||i===0)return;i=t+i>r?r-t:i;const o=r-i;for(l=t;l<o;++l)n[l]=n[l+i];n.length=o}const Vw={allowChildren:!0,removeChildren(n=0,t){const i=t??this.children.length,r=i-n,l=[];if(r>0&&r<=i){for(let c=i-1;c>=n;c--){const h=this.children[c];h&&(l.push(h),h.parent=null)}Yw(this.children,n,i);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(l);for(let c=0;c<l.length;++c)this.emit("childRemoved",l[c],this,c),l[c].emit("removed",this);return l}else if(r===0&&this.children.length===0)return l;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||ee(de,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(t<0||t>i.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${i.length}`);if(n.parent){const l=n.parent.children.indexOf(n);if(n.parent===this&&l===t)return n;l!==-1&&n.parent.children.splice(l,1)}t===i.length?i.push(n):i.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const i=this.getChildIndex(n),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=n;const l=this.renderGroup||this.parentRenderGroup;l&&(l.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const i=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const r=this.worldTransform.clone();return r.invert(),i.prepend(r),n.setFromMatrix(i),n}};class lg{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class Fw{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let i=0;i<this._tests.length;i++){const r=this._tests[i];if(r.test(t))return ss.get(r.maskClass,t)}return t}returnMaskEffect(t){ss.return(t)}}const Yh=new Fw;Di.handleByList(Pt.MaskEffect,Yh._effectClasses);const Xw={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((i,r)=>i.priority-r.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;(t==null?void 0:t.mask)!==n&&(t&&(this.removeEffect(t),Yh.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=Yh.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},set filters(n){var o;!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new lg);n=n;const i=(n==null?void 0:n.length)>0,r=((o=t.filters)==null?void 0:o.length)>0,l=i!==r;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),l&&(i?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new lg),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},Kw={label:null,get name(){return ee(de,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){ee(de,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const i=this.children;for(let r=0;r<i.length;r++){const l=i[r];if(l.label===n||n instanceof RegExp&&n.test(l.label))return l}if(t)for(let r=0;r<i.length;r++){const o=i[r].getChildByLabel(n,!0);if(o)return o}return null},getChildrenByLabel(n,t=!1,i=[]){const r=this.children;for(let l=0;l<r.length;l++){const o=r[l];(o.label===n||n instanceof RegExp&&n.test(o.label))&&i.push(o)}if(t)for(let l=0;l<r.length;l++)r[l].getChildrenByLabel(n,!0,i);return i}},ke=new yd(Ut),dr=new yd(ji);function qy(n,t,i){i.clear();let r,l;return n.parent?t?r=n.parent.worldTransform:(l=ke.get().identity(),r=vd(n,l)):r=Ut.IDENTITY,Hy(n,i,r,t),l&&ke.return(l),i.isValid||i.set(0,0,0,0),i}function Hy(n,t,i,r){var h,f;if(!n.visible||!n.measurable)return;let l;r?l=n.worldTransform:(n.updateLocalTransform(),l=ke.get(),l.appendFrom(n.localTransform,i));const o=t,c=!!n.effects.length;if(c&&(t=dr.get().clear()),n.boundsArea)t.addRect(n.boundsArea,l);else{n.bounds&&(t.matrix=l,t.addBounds(n.bounds));for(let p=0;p<n.children.length;p++)Hy(n.children[p],t,l,r)}if(c){for(let p=0;p<n.effects.length;p++)(f=(h=n.effects[p]).addBounds)==null||f.call(h,t);o.addBounds(t,Ut.IDENTITY),dr.return(t)}r||ke.return(l)}function vd(n,t){const i=n.parent;return i&&(vd(i,t),i.updateLocalTransform(),t.append(i.localTransform)),t}function $y(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const i=n>>16&255,r=n>>8&255,l=n&255,o=t>>16&255,c=t>>8&255,h=t&255,f=i*o/255|0,p=r*c/255|0,g=l*h/255|0;return(f<<16)+(p<<8)+g}const og=16777215;function ug(n,t){return n===og?t:t===og?n:$y(n,t)}function xo(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const Ww={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,i=this.parent;for(;i;)t*=i.alpha,i=i.parent;return t},getGlobalTransform(n,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const i=vd(this,ke.get().identity());return n.appendFrom(this.localTransform,i),ke.return(i),n},getGlobalTint(n){if(n)return this.renderGroup?xo(this.renderGroup.worldColor):this.parentRenderGroup?xo(ug(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,i=this.parent;for(;i;)t=ug(t,i.localColor),i=i.parent;return xo(t)}};let ch=0;const cg=500;function Ni(...n){ch!==cg&&(ch++,ch===cg?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function Iy(n,t,i){return t.clear(),i||(i=Ut.IDENTITY),Yy(n,t,i,n,!0),t.isValid||t.set(0,0,0,0),t}function Yy(n,t,i,r,l){var f,p;let o;if(l)o=ke.get(),o=i.copyTo(o);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const g=n.localTransform;o=ke.get(),o.appendFrom(g,i)}const c=t,h=!!n.effects.length;if(h&&(t=dr.get().clear()),n.boundsArea)t.addRect(n.boundsArea,o);else{n.renderPipeId&&(t.matrix=o,t.addBounds(n.bounds));const g=n.children;for(let y=0;y<g.length;y++)Yy(g[y],t,o,r,!1)}if(h){for(let g=0;g<n.effects.length;g++)(p=(f=n.effects[g]).addLocalBounds)==null||p.call(f,t,r);c.addBounds(t,Ut.IDENTITY),dr.return(t)}ke.return(o)}function Vy(n,t){const i=n.children;for(let r=0;r<i.length;r++){const l=i[r],o=l.uid,c=(l._didViewChangeTick&65535)<<16|l._didContainerChangeTick&65535,h=t.index;(t.data[h]!==o||t.data[h+1]!==c)&&(t.data[t.index]=o,t.data[t.index+1]=c,t.didChange=!0),t.index=h+2,l.children.length&&Vy(l,t)}return t.didChange}const Qw=new Ut,Zw={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const i=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*i:this.scale.x=i},_setHeight(n,t){const i=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*i:this.scale.y=i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new ji});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),Vy(this,n),n.didChange&&Iy(this,n.localBounds,Qw),n.localBounds},getBounds(n,t){return qy(this,n,t||new ji)}},Jw={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},t1={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(e1))}};function e1(n,t){return n._zIndex-t._zIndex}const i1={getGlobalPosition(n=new Re,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,i=!1){const r=this.getGlobalTransform(ke.get(),i);return t=r.apply(n,t),ke.return(r),t},toLocal(n,t,i,r){t&&(n=t.toGlobal(n,i,r));const l=this.getGlobalTransform(ke.get(),r);return i=l.applyInverse(n,i),ke.return(l),i}};class Fy{constructor(){this.uid=fe("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let s1=0;class n1{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,i,r){const l=new Ui({...this.textureOptions,width:t,height:i,resolution:1,antialias:r,autoGarbageCollect:!0});return new It({source:l,label:`texturePool_${s1++}`})}getOptimalTexture(t,i,r=1,l){let o=Math.ceil(t*r-1e-6),c=Math.ceil(i*r-1e-6);o=Kp(o),c=Kp(c);const h=(o<<17)+(c<<1)+(l?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(o,c,l)),f.source._resolution=r,f.source.width=o/r,f.source.height=c/r,f.source.pixelWidth=o,f.source.pixelHeight=c,f.frame.x=0,f.frame.y=0,f.frame.width=t,f.frame.height=i,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(t,i=!1){const r=t.source;return this.getOptimalTexture(t.width,t.height,r._resolution,i)}returnTexture(t){const i=this._poolKeyHash[t.uid];this._texturePool[i].push(t)}clear(t){if(t=t!==!1,t)for(const i in this._texturePool){const r=this._texturePool[i];if(r)for(let l=0;l<r.length;l++)r[l].destroy(!0)}this._texturePool={}}}const r1=new n1;class a1{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Ut,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Fy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const i=t.children;for(let r=0;r<i.length;r++){const l=i[r];l._updateFlags=15,this.addChild(l)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(r1.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const i=this.childrenToUpdate[t];i.list.fill(null),i.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const i=this.renderGroupChildren.indexOf(t);i>-1&&this.renderGroupChildren.splice(i,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const i=t.children;for(let r=0;r<i.length;r++)this.addChild(i[r])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const i=t.children;for(let r=0;r<i.length;r++)this.removeChild(i[r])}removeChildren(t){for(let i=0;i<t.length;i++)this.removeChild(t[i])}onChildUpdate(t){let i=this.childrenToUpdate[t.relativeRenderGroupDepth];i||(i=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),i.list[i.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const i=this.root.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],t);return t}_getChildren(t,i=[]){if(i.push(t),t.renderGroup)return i;const r=t.children;for(let l=0;l<r.length;l++)this._getChildren(r[l],i);return i}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Ut),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Ut),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Ut),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function l1(n,t,i={}){for(const r in t)!i[r]&&t[r]!==void 0&&(n[r]=t[r])}const hh=new ei(null),dh=new ei(null),fh=new ei(null,1,1),hg=1,o1=2,mh=4;class ne extends ns{constructor(t={}){var i,r;super(),this.uid=fe("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Ut,this.relativeGroupTransform=new Ut,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new ei(this,0,0),this._scale=fh,this._pivot=dh,this._skew=hh,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],l1(this,t,{children:!0,parent:!0,effects:!0}),(i=t.children)==null||i.forEach(l=>this.addChild(l)),(r=t.parent)==null||r.addChild(this)}static mixin(t){Object.defineProperties(ne.prototype,Object.getOwnPropertyDescriptors(t))}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||ee(de,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let l=0;l<t.length;l++)this.addChild(t[l]);return t[0]}const i=t[0],r=this.renderGroup||this.parentRenderGroup;return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),r&&(r.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i._updateFlags=15,r&&r.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),this._didViewChangeTick++,i._zIndex!==0&&i.depthOfChildModified(),i)}removeChild(...t){if(t.length>1){for(let l=0;l<t.length;l++)this.removeChild(t[l]);return t[0]}const i=t[0],r=this.children.indexOf(i);return r>-1&&(this._didViewChangeTick++,this.children.splice(r,1),this.renderGroup?this.renderGroup.removeChild(i):this.parentRenderGroup&&this.parentRenderGroup.removeChild(i),i.parent=null,this.emit("childRemoved",i,this,r),i.emit("removed",this)),i}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=ss.get(a1,this),this.groupTransform=Ut.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),ss.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Ut),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*ww}set angle(t){this.rotation=t*Sw}get pivot(){return this._pivot===dh&&(this._pivot=new ei(this,0,0)),this._pivot}set pivot(t){this._pivot===dh&&(this._pivot=new ei(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===hh&&(this._skew=new ei(this,0,0)),this._skew}set skew(t){this._skew===hh&&(this._skew=new ei(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===fh&&(this._scale=new ei(this,1,1)),this._scale}set scale(t){this._scale===fh&&(this._scale=new ei(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const i=this.getLocalBounds().width;this._setWidth(t,i)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const i=this.getLocalBounds().height;this._setHeight(t,i)}getSize(t){t||(t={});const i=this.getLocalBounds();return t.width=Math.abs(this.scale.x*i.width),t.height=Math.abs(this.scale.y*i.height),t}setSize(t,i){const r=this.getLocalBounds();typeof t=="object"?(i=t.height??t.width,t=t.width):i??(i=t),t!==void 0&&this._setWidth(t,r.width),i!==void 0&&this._setHeight(i,r.height)}_updateSkew(){const t=this._rotation,i=this._skew;this._cx=Math.cos(t+i._y),this._sx=Math.sin(t+i._y),this._cy=-Math.sin(t-i._x),this._sy=Math.cos(t-i._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const i=this.localTransform,r=this._scale,l=this._pivot,o=this._position,c=r._x,h=r._y,f=l._x,p=l._y;i.a=this._cx*c,i.b=this._sx*c,i.c=this._cy*h,i.d=this._sy*h,i.tx=o._x-(f*i.a+p*i.c),i.ty=o._y-(f*i.b+p*i.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=hg,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const r=ni.shared.setValue(t??16777215).toBgrNumber();r!==this.localColor&&(this.localColor=r,this._updateFlags|=hg,this._onUpdate())}get tint(){return xo(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=o1,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const i=t?2:0;(this.localDisplayStatus&2)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=mh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const i=t?0:4;(this.localDisplayStatus&4)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=mh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const i=t?1:0;(this.localDisplayStatus&1)!==i&&(this._updateFlags|=mh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var l;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&i)for(let o=0;o<i.length;++o)i[o].destroy(t);(l=this.renderGroup)==null||l.destroy(),this.renderGroup=null}}ne.mixin(Vw);ne.mixin(i1);ne.mixin(Jw);ne.mixin(Zw);ne.mixin(Xw);ne.mixin(Kw);ne.mixin(t1);ne.mixin(Hw);ne.mixin(Iw);ne.mixin(Ww);class Xy extends ne{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new ji(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const i=this.bounds,{x:r,y:l}=t;return r>=i.minX&&r<=i.maxX&&l>=i.minY&&l<=i.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}}class fr extends Xy{constructor(t=It.EMPTY){t instanceof It&&(t={texture:t});const{texture:i=It.EMPTY,anchor:r,roundPixels:l,width:o,height:c,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new ei({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=l??!1,o!==void 0&&(this.width=o),c!==void 0&&(this.height=c)}static from(t,i=!1){return t instanceof It?new fr(t):new fr(It.from(t,i))}set texture(t){t||(t=It.EMPTY);const i=this._texture;i!==t&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Nw(this._visualBounds,this._anchor,this._texture,0),this._visualBounds}get sourceBounds(){return ee("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,i=this._texture,r=this._bounds,{width:l,height:o}=i.orig;r.minX=-t._x*l,r.maxX=r.minX+l,r.minY=-t._y*o,r.maxY=r.minY+o}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(r)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,i){typeof t=="object"?(i=t.height??t.width,t=t.width):i??(i=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),i!==void 0&&this._setHeight(i,this._texture.orig.height)}}const u1=new ji;function Ky(n,t,i){const r=u1;n.measurable=!0,qy(n,i,r),t.addBoundsMask(r),n.measurable=!1}function Wy(n,t,i){const r=dr.get();n.measurable=!0;const l=ke.get().identity(),o=Qy(n,i,l);Iy(n,r,o),n.measurable=!1,t.addBoundsMask(r),ke.return(l),dr.return(r)}function Qy(n,t,i){return n?(n!==t&&(Qy(n.parent,t,i),n.updateLocalTransform(),i.append(n.localTransform)),i):(Ni("Mask bounds, renderable is not inside the root container"),i)}class Zy{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof fr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,i){this.inverse||Ky(this.mask,t,i)}addLocalBounds(t,i){Wy(this.mask,t,i)}containsPoint(t,i){const r=this.mask;return i(r,t)}destroy(){this.reset()}static test(t){return t instanceof fr}}Zy.extension=Pt.MaskEffect;class Jy{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Jy.extension=Pt.MaskEffect;class tv{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,i){Ky(this.mask,t,i)}addLocalBounds(t,i){Wy(this.mask,t,i)}containsPoint(t,i){const r=this.mask;return i(r,t)}destroy(){this.reset()}static test(t){return t instanceof ne}}tv.extension=Pt.MaskEffect;const c1={createCanvas:(n,t)=>{const i=document.createElement("canvas");return i.width=n,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let dg=c1;const Us={get(){return dg},set(n){dg=n}};class ev extends Ui{constructor(t){t.resource||(t.resource=Us.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,i=this.height,r=this._resolution){const l=super.resize(t,i,r);return l&&this.resizeCanvas(),l}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}ev.extension=Pt.TextureSource;class _d extends Ui{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const i=Us.get().createCanvas(t.resource.width,t.resource.height);i.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=i,Ni("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}_d.extension=Pt.TextureSource;var Vh=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Vh||{});class ph{constructor(t,i=null,r=0,l=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=i,this.priority=r,this._once=l}match(t,i=null){return this._fn===t&&this._context===i}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const i=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const iv=class Je{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ph(null,null,1/0),this.deltaMS=1/Je.targetFPMS,this.elapsedMS=1/Je.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,i,r=Vh.NORMAL){return this._addListener(new ph(t,i,r))}addOnce(t,i,r=Vh.NORMAL){return this._addListener(new ph(t,i,r,!0))}_addListener(t){let i=this._head.next,r=this._head;if(!i)t.connect(r);else{for(;i;){if(t.priority>i.priority){t.connect(r);break}r=i,i=i.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,i){let r=this._head.next;for(;r;)r.match(t,i)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,i=this._head;for(;i=i.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let i;if(t>this.lastTime){if(i=this.elapsedMS=t-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*Je.targetFPMS;const r=this._head;let l=r.next;for(;l;)l=l.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const i=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,i)/1e3,Je.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const i=Math.max(this.minFPS,t);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!Je._shared){const t=Je._shared=new Je;t.autoStart=!0,t._protected=!0}return Je._shared}static get system(){if(!Je._system){const t=Je._system=new Je;t.autoStart=!0,t._protected=!0}return Je._system}};iv.targetFPMS=.06;let oo=iv,gh;async function h1(){return gh??(gh=(async()=>{var c;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const i=await new Promise(h=>{const f=document.createElement("video");f.onloadeddata=()=>h(f),f.onerror=()=>h(null),f.autoplay=!1,f.crossOrigin="anonymous",f.preload="auto",f.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",f.load()});if(!i)return"premultiply-alpha-on-upload";const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const l=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,l),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,o),t.deleteFramebuffer(l),t.deleteTexture(r),(c=t.getExtension("WEBGL_lose_context"))==null||c.loseContext(),o[0]<=o[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),gh}const Ro=class sv extends Ui{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...sv.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=oo.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,i=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(i.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await h1(),this._load=new Promise((r,l)=>{this.isValid?r(this):(this._resolve=r,this._reject=l,i.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${i.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(oo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(oo.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(oo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Ro.extension=Pt.TextureSource;Ro.defaultOptions={...Ui.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Ro.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let d1=Ro;const nr=(n,t,i=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(r=>typeof r=="string"||i?t(r):r):n);class f1{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||Ni(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const r=nr(t);let l;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.test(i)){l=p.getCacheableAssets(r,i);break}}const o=new Map(Object.entries(l||{}));l||r.forEach(f=>{o.set(f,i)});const c=[...o.keys()],h={cacheKeys:c,keys:r};r.forEach(f=>{this._cacheMap.set(f,h)}),c.forEach(f=>{const p=l?l[f]:i;this._cache.has(f)&&this._cache.get(f)!==p&&Ni("[Cache] already has key:",f),this._cache.set(f,o.get(f))})}remove(t){if(!this._cacheMap.has(t)){Ni(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(l=>{this._cache.delete(l)}),i.keys.forEach(l=>{this._cacheMap.delete(l)})}get parsers(){return this._parsers}}const rr=new f1,Fh=[];Di.handleByList(Pt.TextureSource,Fh);function nv(n={}){const t=n&&n.resource,i=t?n.resource:n,r=t?n:{resource:n};for(let l=0;l<Fh.length;l++){const o=Fh[l];if(o.test(i))return new o(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}function m1(n={},t=!1){const i=n&&n.resource,r=i?n.resource:n,l=i?n:{resource:n};if(!t&&rr.has(r))return rr.get(r);const o=new It({source:nv(l)});return o.on("destroy",()=>{rr.has(r)&&rr.remove(r)}),t||rr.set(r,o),o}function p1(n,t=!1){return typeof n=="string"?rr.get(n):n instanceof Ui?new It({source:n}):m1(n,t)}It.from=p1;Ui.from=nv;Di.add(Zy,Jy,tv,d1,_d,ev,gd);var rv=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(rv||{});function _i(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function ca(n){return n.split("?")[0].split("#")[0]}function g1(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y1(n,t,i){return n.replace(new RegExp(g1(t),"g"),i)}function v1(n,t){let i="",r=0,l=-1,o=0,c=-1;for(let h=0;h<=n.length;++h){if(h<n.length)c=n.charCodeAt(h);else{if(c===47)break;c=47}if(c===47){if(!(l===h-1||o===1))if(l!==h-1&&o===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const f=i.lastIndexOf("/");if(f!==i.length-1){f===-1?(i="",r=0):(i=i.slice(0,f),r=i.length-1-i.lastIndexOf("/")),l=h,o=0;continue}}else if(i.length===2||i.length===1){i="",r=0,l=h,o=0;continue}}}else i.length>0?i+=`/${n.slice(l+1,h)}`:i=n.slice(l+1,h),r=h-l-1;l=h,o=0}else c===46&&o!==-1?++o:o=-1}return i}const Aa={toPosix(n){return y1(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){_i(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const i=/^[^/:]+:\/{0,2}/.exec(n);return i?i[0]:""},toAbsolute(n,t,i){if(_i(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const r=ca(this.toPosix(t??Us.get().getBaseUrl())),l=ca(this.toPosix(i??this.rootname(r)));return n=this.toPosix(n),n.startsWith("/")?Aa.join(l,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize(n){if(_i(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const i=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const r=n.endsWith("/");return n=v1(n),n.length>0&&r&&(n+="/"),i?`/${n}`:t+n},isAbsolute(n){return _i(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let i=0;i<n.length;++i){const r=n[i];if(_i(r),r.length>0)if(t===void 0)t=r;else{const l=n[i-1]??"";this.joinExtensions.includes(this.extname(l).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(_i(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const i=t===47;let r=-1,l=!0;const o=this.getProtocol(n),c=n;n=n.slice(o.length);for(let h=n.length-1;h>=1;--h)if(t=n.charCodeAt(h),t===47){if(!l){r=h;break}}else l=!1;return r===-1?i?"/":this.isUrl(c)?o+n:o:i&&r===1?"//":o+n.slice(0,r)},rootname(n){_i(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const i=n.indexOf("/",t.length);i!==-1?t=n.slice(0,i):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){_i(n),t&&_i(t),n=ca(this.toPosix(n));let i=0,r=-1,l=!0,o;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let c=t.length-1,h=-1;for(o=n.length-1;o>=0;--o){const f=n.charCodeAt(o);if(f===47){if(!l){i=o+1;break}}else h===-1&&(l=!1,h=o+1),c>=0&&(f===t.charCodeAt(c)?--c===-1&&(r=o):(c=-1,r=h))}return i===r?r=h:r===-1&&(r=n.length),n.slice(i,r)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===47){if(!l){i=o+1;break}}else r===-1&&(l=!1,r=o+1);return r===-1?"":n.slice(i,r)},extname(n){_i(n),n=ca(this.toPosix(n));let t=-1,i=0,r=-1,l=!0,o=0;for(let c=n.length-1;c>=0;--c){const h=n.charCodeAt(c);if(h===47){if(!l){i=c+1;break}continue}r===-1&&(l=!1,r=c+1),h===46?t===-1?t=c:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===i+1?"":n.slice(t,r)},parse(n){_i(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=ca(this.toPosix(n));let i=n.charCodeAt(0);const r=this.isAbsolute(n);let l;t.root=this.rootname(n),r||this.hasProtocol(n)?l=1:l=0;let o=-1,c=0,h=-1,f=!0,p=n.length-1,g=0;for(;p>=l;--p){if(i=n.charCodeAt(p),i===47){if(!f){c=p+1;break}continue}h===-1&&(f=!1,h=p+1),i===46?o===-1?o=p:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||h===-1||g===0||g===1&&o===h-1&&o===c+1?h!==-1&&(c===0&&r?t.base=t.name=n.slice(1,h):t.base=t.name=n.slice(c,h)):(c===0&&r?(t.name=n.slice(1,o),t.base=n.slice(1,h)):(t.name=n.slice(c,o),t.base=n.slice(c,h)),t.ext=n.slice(o,h)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function av(n,t,i,r,l){const o=t[i];for(let c=0;c<o.length;c++){const h=o[c];i<t.length-1?av(n.replace(r[i],h),t,i+1,r,l):l.push(n.replace(r[i],h))}}function _1(n){const t=/\{(.*?)\}/g,i=n.match(t),r=[];if(i){const l=[];i.forEach(o=>{const c=o.substring(1,o.length-1).split(",");l.push(c)}),av(n,l,0,i,r)}else r.push(n);return r}const fg=n=>!Array.isArray(n);class lv{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(i[r])}`).join("&")}}getAlias(t){const{alias:i,src:r}=t;return nr(i||r,o=>typeof o=="string"?o:Array.isArray(o)?o.map(c=>(c==null?void 0:c.src)??c):o!=null&&o.src?o.src:o,!0)}addManifest(t){this._manifest&&Ni("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const r=[];let l=i;Array.isArray(i)||(l=Object.entries(i).map(([o,c])=>typeof c=="string"||Array.isArray(c)?{alias:o,src:c}:{alias:o,...c})),l.forEach(o=>{const c=o.src,h=o.alias;let f;if(typeof h=="string"){const p=this._createBundleAssetId(t,h);r.push(p),f=[h,p]}else{const p=h.map(g=>this._createBundleAssetId(t,g));r.push(...p),f=[...h,...p]}this.add({...o,alias:f,src:c})}),this._bundles[t]=r}add(t){const i=[];Array.isArray(t)?i.push(...t):i.push(t);let r;r=o=>{this.hasKey(o)&&Ni(`[Resolver] already has key: ${o} overwriting`)},nr(i).forEach(o=>{const{src:c}=o;let{data:h,format:f,loadParser:p}=o;const g=nr(c).map(_=>typeof _=="string"?_1(_):Array.isArray(_)?_:[_]),y=this.getAlias(o);Array.isArray(y)?y.forEach(r):r(y);const b=[];g.forEach(_=>{_.forEach(S=>{let A={};if(typeof S!="object"){A.src=S;for(let T=0;T<this._parsers.length;T++){const R=this._parsers[T];if(R.test(S)){A=R.parse(S);break}}}else h=S.data??h,f=S.format??f,p=S.loadParser??p,A={...A,...S};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${A.src}`);A=this._buildResolvedAsset(A,{aliases:y,data:h,format:f,loadParser:p}),b.push(A)})}),y.forEach(_=>{this._assetMap[_]=b})})}resolveBundle(t){const i=fg(t);t=nr(t);const r={};return t.forEach(l=>{const o=this._bundles[l];if(o){const c=this.resolve(o),h={};for(const f in c){const p=c[f];h[this._extractAssetIdFromBundle(l,f)]=p}r[l]=h}}),i?r[t[0]]:r}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const r={};for(const l in i)r[l]=i[l].src;return r}return i.src}resolve(t){const i=fg(t);t=nr(t);const r={};return t.forEach(l=>{if(!this._resolverHash[l])if(this._assetMap[l]){let o=this._assetMap[l];const c=this._getPreferredOrder(o);c==null||c.priority.forEach(h=>{c.params[h].forEach(f=>{const p=o.filter(g=>g[h]?g[h]===f:!1);p.length&&(o=p)})}),this._resolverHash[l]=o[0]}else this._resolverHash[l]=this._buildResolvedAsset({alias:[l],src:l},{});r[l]=this._resolverHash[l]}),i?r[t[0]]:r}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const r=t[0],l=this._preferredOrder.find(o=>o.params.format.includes(r.format));if(l)return l}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}_buildResolvedAsset(t,i){const{aliases:r,data:l,loadParser:o,format:c}=i;return(this._basePath||this._rootPath)&&(t.src=Aa.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=r??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...l||{},...t.data},t.loadParser=o??t.loadParser,t.format=c??t.format??b1(t.src),t}}lv.RETINA_PREFIX=/@([0-9\.]+)x/;function b1(n){return n.split(".").pop().split("?").shift().split("#").shift()}const mg=(n,t)=>{const i=t.split("?")[1];return i&&(n+=`?${i}`),n},ov=class ya{constructor(t,i){this.linkedSheets=[],this._texture=t instanceof It?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=i;const r=parseFloat(i.meta.scale);r?(this.resolution=r,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=ya.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let i=t;const r=ya.BATCH_SIZE;for(;i-t<r&&i<this._frameKeys.length;){const l=this._frameKeys[i],o=this._frames[l],c=o.frame;if(c){let h=null,f=null;const p=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,g=new Ce(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);o.rotated?h=new Ce(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):h=new Ce(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(f=new Ce(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[l]=new It({source:this.textureSource,frame:h,orig:g,trim:f,rotate:o.rotated?2:0,defaultAnchor:o.anchor,defaultBorders:o.borders,label:l.toString()})}i++}}_processAnimations(){const t=this.data.animations||{};for(const i in t){this.animations[i]=[];for(let r=0;r<t[i].length;r++){const l=t[i][r];this.animations[i].push(this.textures[l])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ya.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ya.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var i;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((i=this._texture)==null||i.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};ov.BATCH_SIZE=1e3;let pg=ov;const x1=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function uv(n,t,i){const r={};if(n.forEach(l=>{r[l]=t}),Object.keys(t.textures).forEach(l=>{r[l]=t.textures[l]}),!i){const l=Aa.dirname(n[0]);t.linkedSheets.forEach((o,c)=>{const h=uv([`${l}/${t.data.meta.related_multi_packs[c]}`],o,!0);Object.assign(r,h)})}return r}const w1={extension:Pt.Asset,cache:{test:n=>n instanceof pg,getCacheableAssets:(n,t)=>uv(n,t,!1)},resolver:{extension:{type:Pt.ResolveParser,name:"resolveSpritesheet"},test:n=>{const i=n.split("?")[0].split("."),r=i.pop(),l=i.pop();return r==="json"&&x1.includes(l)},parse:n=>{var i;const t=n.split(".");return{resolution:parseFloat(((i=lv.RETINA_PREFIX.exec(n))==null?void 0:i[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:Pt.LoadParser,priority:rv.Normal,name:"spritesheetLoader"},async testParse(n,t){return Aa.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,i){var p,g;const{texture:r,imageFilename:l}=(t==null?void 0:t.data)??{};let o=Aa.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let c;if(r instanceof It)c=r;else{const y=mg(o+(l??n.meta.image),t.src);c=(await i.load([y]))[y]}const h=new pg(c.source,n);await h.parse();const f=(p=n==null?void 0:n.meta)==null?void 0:p.related_multi_packs;if(Array.isArray(f)){const y=[];for(const _ of f){if(typeof _!="string")continue;let S=o+_;(g=t.data)!=null&&g.ignoreMultiPack||(S=mg(S,t.src),y.push(i.load({src:S,data:{ignoreMultiPack:!0}})))}const b=await Promise.all(y);h.linkedSheets=b,b.forEach(_=>{_.linkedSheets=[h].concat(h.linkedSheets.filter(S=>S!==_))})}return h},async unload(n,t,i){await i.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Di.add(w1);const yh=Object.create(null),gg=Object.create(null);function bd(n,t){let i=gg[n];return i===void 0&&(yh[t]===void 0&&(yh[t]=1),gg[n]=i=yh[t]++),i}let Wn;function cv(){return(!Wn||Wn!=null&&Wn.isContextLost())&&(Wn=Us.get().createCanvas().getContext("webgl",{})),Wn}let uo;function S1(){if(!uo){uo="mediump";const n=cv();n&&n.getShaderPrecisionFormat&&(uo=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return uo}function T1(n,t,i){return t?n:i?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function E1(n,t,i){const r=i?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let l=i?t.requestedFragmentPrecision:t.requestedVertexPrecision;return l==="highp"&&r!=="highp"&&(l="mediump"),`precision ${l} float;
${n}`}else if(r!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function A1(n,t){return t?`#version 300 es
${n}`:n}const C1={},M1={};function R1(n,{name:t="pixi-program"},i=!0){t=t.replace(/\s+/g,"-"),t+=i?"-fragment":"-vertex";const r=i?C1:M1;return r[t]?(r[t]++,t+=`-${r[t]}`):r[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function O1(n,t){return t?n.replace("#version 300 es",""):n}const vh={stripVersion:O1,ensurePrecision:E1,addProgramDefines:T1,setProgramName:R1,insertVersion:A1},_h=Object.create(null),hv=class Xh{constructor(t){t={...Xh.defaultOptions,...t};const i=t.fragment.indexOf("#version 300 es")!==-1,r={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:S1()},setProgramName:{name:t.name},addProgramDefines:i,insertVersion:i};let l=t.fragment,o=t.vertex;Object.keys(vh).forEach(c=>{const h=r[c];l=vh[c](l,h,!0),o=vh[c](o,h,!1)}),this.fragment=l,this.vertex=o,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=bd(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const i=`${t.vertex}:${t.fragment}`;return _h[i]||(_h[i]=new Xh(t)),_h[i]}};hv.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let dv=hv;const yg={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function k1(n){return yg[n]??yg.float32}const N1={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function j1({source:n,entryPoint:t}){const i={},r=n.indexOf(`fn ${t}`);if(r!==-1){const l=n.indexOf("->",r);if(l!==-1){const o=n.substring(r,l),c=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=c.exec(o))!==null;){const f=N1[h[3]]??"float32";i[h[2]]={location:parseInt(h[1],10),format:f,stride:k1(f).stride,offset:0,instance:!1,start:0}}}}return i}function bh(n){var y,b;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,i=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,l=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,c=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,p=(y=n.match(t))==null?void 0:y.map(_=>({group:parseInt(_.match(i)[1],10),binding:parseInt(_.match(r)[1],10),name:_.match(l)[2],isUniform:_.match(l)[1]==="<uniform>",type:_.match(o)[1]}));if(!p)return{groups:[],structs:[]};const g=((b=n.match(c))==null?void 0:b.map(_=>{const S=_.match(f)[1],A=_.match(h).reduce((T,R)=>{const[M,k]=R.split(":");return T[M.trim()]=k.trim(),T},{});return A?{name:S,members:A}:null}).filter(({name:_})=>p.some(S=>S.type===_)))??[];return{groups:p,structs:g}}var va=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(va||{});function D1({groups:n}){const t=[];for(let i=0;i<n.length;i++){const r=n[i];t[r.group]||(t[r.group]=[]),r.isUniform?t[r.group].push({binding:r.binding,visibility:va.VERTEX|va.FRAGMENT,buffer:{type:"uniform"}}):r.type==="sampler"?t[r.group].push({binding:r.binding,visibility:va.FRAGMENT,sampler:{type:"filtering"}}):r.type==="texture_2d"&&t[r.group].push({binding:r.binding,visibility:va.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function U1({groups:n}){const t=[];for(let i=0;i<n.length;i++){const r=n[i];t[r.group]||(t[r.group]={}),t[r.group][r.name]=r.binding}return t}function z1(n,t){const i=new Set,r=new Set,l=[...n.structs,...t.structs].filter(c=>i.has(c.name)?!1:(i.add(c.name),!0)),o=[...n.groups,...t.groups].filter(c=>{const h=`${c.name}-${c.binding}`;return r.has(h)?!1:(r.add(h),!0)});return{structs:l,groups:o}}const xh=Object.create(null);class Oo{constructor(t){var h,f;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:i,vertex:r,layout:l,gpuLayout:o,name:c}=t;if(this.name=c,this.fragment=i,this.vertex=r,i.source===r.source){const p=bh(i.source);this.structsAndGroups=p}else{const p=bh(r.source),g=bh(i.source);this.structsAndGroups=z1(p,g)}this.layout=l??U1(this.structsAndGroups),this.gpuLayout=o??D1(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((f=this.layout[1])==null?void 0:f.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:i}=this,r=t.source+i.source+t.entryPoint+i.entryPoint;this._layoutKey=bd(r,"program")}get attributeData(){return this._attributeData??(this._attributeData=j1(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const i=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return xh[i]||(xh[i]=new Oo(t)),xh[i]}}const fv=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],B1=fv.reduce((n,t)=>(n[t]=!0,n),{});function P1(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const mv=class pv{constructor(t,i){this._touched=0,this.uid=fe("uniform"),this._resourceType="uniformGroup",this._resourceId=fe("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...pv.defaultOptions,...i},this.uniformStructures=t;const r={};for(const l in t){const o=t[l];if(o.name=l,o.size=o.size??1,!B1[o.type])throw new Error(`Uniform type ${o.type} is not supported. Supported uniform types are: ${fv.join(", ")}`);o.value??(o.value=P1(o.type,o.size)),r[l]=o.value}this.uniforms=r,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=bd(Object.keys(r).map(l=>`${l}-${t[l].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};mv.defaultOptions={ubo:!1,isStatic:!1};let gv=mv;class wo{constructor(t){this.resources=Object.create(null),this._dirty=!0;let i=0;for(const r in t){const l=t[r];this.setResource(l,i++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let i=0;for(const r in this.resources)t[i++]=this.resources[r]._resourceId;this._key=t.join("|")}setResource(t,i){var l,o;const r=this.resources[i];t!==r&&(r&&((l=t.off)==null||l.call(t,"change",this.onResourceChange,this)),(o=t.on)==null||o.call(t,"change",this.onResourceChange,this),this.resources[i]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const i=this.resources;for(const r in i)i[r]._touched=t}destroy(){var i;const t=this.resources;for(const r in t){const l=t[r];(i=l.off)==null||i.call(l,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const i=this.resources;for(const r in i)i[r]===t&&(i[r]=null)}else this._updateKey()}}var Kh=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Kh||{});class xd extends ns{constructor(t){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:i,glProgram:r,groups:l,resources:o,compatibleRenderers:c,groupMap:h}=t;this.gpuProgram=i,this.glProgram=r,c===void 0&&(c=0,i&&(c|=Kh.WEBGPU),r&&(c|=Kh.WEBGL)),this.compatibleRenderers=c;const f={};if(!o&&!l&&(o={}),o&&l)throw new Error("[Shader] Cannot have both resources and groups");if(!i&&l&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!i&&l&&h)for(const p in h)for(const g in h[p]){const y=h[p][g];f[y]={group:p,binding:g,name:y}}else if(i&&l&&!h){const p=i.structsAndGroups.groups;h={},p.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,f[g.name]=g})}else if(o){l={},h={},i&&i.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,f[y.name]=y});let p=0;for(const g in o)f[g]||(l[99]||(l[99]=new wo,this._ownedBindGroups.push(l[99])),f[g]={group:99,binding:p,name:g},h[99]=h[99]||{},h[99][p]=g,p++);for(const g in o){const y=g;let b=o[g];!b.source&&!b._resourceType&&(b=new gv(b));const _=f[y];_&&(l[_.group]||(l[_.group]=new wo,this._ownedBindGroups.push(l[_.group])),l[_.group].setResource(b,_.binding))}}this.groups=l,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(l,f)}addResource(t,i,r){var l,o;(l=this._uniformBindMap)[i]||(l[i]={}),(o=this._uniformBindMap[i])[r]||(o[r]=t),this.groups[i]||(this.groups[i]=new wo,this._ownedBindGroups.push(this.groups[i]))}_buildResourceAccessor(t,i){const r={};for(const l in i){const o=i[l];Object.defineProperty(r,o.name,{get(){return t[o.group].getResource(o.binding)},set(c){t[o.group].setResource(c,o.binding)}})}return r}destroy(t=!1){var i,r;this.emit("destroy",this),t&&((i=this.gpuProgram)==null||i.destroy(),(r=this.glProgram)==null||r.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(l=>{l.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:i,gl:r,...l}=t;let o,c;return i&&(o=Oo.from(i)),r&&(c=dv.from(r)),new xd({gpuProgram:o,glProgram:c,...l})}}const Wh=[];Di.handleByNamedList(Pt.Environment,Wh);async function L1(n){if(!n)for(let t=0;t<Wh.length;t++){const i=Wh[t];if(i.value.test()){await i.value.load();return}}}let ha;function G1(){if(typeof ha=="boolean")return ha;try{ha=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ha=!1}return ha}var co={exports:{}},vg;function q1(){if(vg)return co.exports;vg=1,co.exports=n,co.exports.default=n;function n(x,C,O){O=O||2;var B=C&&C.length,Y=B?C[0]*O:x.length,E=t(x,0,Y,O,!0),D=[];if(!E||E.next===E.prev)return D;var $,Q,J,et,tt,ut,pt;if(B&&(E=f(x,C,E,O)),x.length>80*O){$=J=x[0],Q=et=x[1];for(var wt=O;wt<Y;wt+=O)tt=x[wt],ut=x[wt+1],tt<$&&($=tt),ut<Q&&(Q=ut),tt>J&&(J=tt),ut>et&&(et=ut);pt=Math.max(J-$,et-Q),pt=pt!==0?32767/pt:0}return r(E,D,O,$,Q,pt,0),D}function t(x,C,O,B,Y){var E,D;if(Y===Kt(x,C,O,B)>0)for(E=C;E<O;E+=B)D=yt(E,x[E],x[E+1],D);else for(E=O-B;E>=C;E-=B)D=yt(E,x[E],x[E+1],D);return D&&H(D,D.next)&&(xt(D),D=D.next),D}function i(x,C){if(!x)return x;C||(C=x);var O=x,B;do if(B=!1,!O.steiner&&(H(O,O.next)||k(O.prev,O,O.next)===0)){if(xt(O),O=C=O.prev,O===O.next)break;B=!0}else O=O.next;while(B||O!==C);return C}function r(x,C,O,B,Y,E,D){if(x){!D&&E&&_(x,B,Y,E);for(var $=x,Q,J;x.prev!==x.next;){if(Q=x.prev,J=x.next,E?o(x,B,Y,E):l(x)){C.push(Q.i/O|0),C.push(x.i/O|0),C.push(J.i/O|0),xt(x),x=J.next,$=J.next;continue}if(x=J,x===$){D?D===1?(x=c(i(x),C,O),r(x,C,O,B,Y,E,2)):D===2&&h(x,C,O,B,Y,E):r(i(x),C,O,B,Y,E,1);break}}}}function l(x){var C=x.prev,O=x,B=x.next;if(k(C,O,B)>=0)return!1;for(var Y=C.x,E=O.x,D=B.x,$=C.y,Q=O.y,J=B.y,et=Y<E?Y<D?Y:D:E<D?E:D,tt=$<Q?$<J?$:J:Q<J?Q:J,ut=Y>E?Y>D?Y:D:E>D?E:D,pt=$>Q?$>J?$:J:Q>J?Q:J,wt=B.next;wt!==C;){if(wt.x>=et&&wt.x<=ut&&wt.y>=tt&&wt.y<=pt&&R(Y,$,E,Q,D,J,wt.x,wt.y)&&k(wt.prev,wt,wt.next)>=0)return!1;wt=wt.next}return!0}function o(x,C,O,B){var Y=x.prev,E=x,D=x.next;if(k(Y,E,D)>=0)return!1;for(var $=Y.x,Q=E.x,J=D.x,et=Y.y,tt=E.y,ut=D.y,pt=$<Q?$<J?$:J:Q<J?Q:J,wt=et<tt?et<ut?et:ut:tt<ut?tt:ut,Ne=$>Q?$>J?$:J:Q>J?Q:J,_e=et>tt?et>ut?et:ut:tt>ut?tt:ut,He=A(pt,wt,C,O,B),me=A(Ne,_e,C,O,B),vt=x.prevZ,Et=x.nextZ;vt&&vt.z>=He&&Et&&Et.z<=me;){if(vt.x>=pt&&vt.x<=Ne&&vt.y>=wt&&vt.y<=_e&&vt!==Y&&vt!==D&&R($,et,Q,tt,J,ut,vt.x,vt.y)&&k(vt.prev,vt,vt.next)>=0||(vt=vt.prevZ,Et.x>=pt&&Et.x<=Ne&&Et.y>=wt&&Et.y<=_e&&Et!==Y&&Et!==D&&R($,et,Q,tt,J,ut,Et.x,Et.y)&&k(Et.prev,Et,Et.next)>=0))return!1;Et=Et.nextZ}for(;vt&&vt.z>=He;){if(vt.x>=pt&&vt.x<=Ne&&vt.y>=wt&&vt.y<=_e&&vt!==Y&&vt!==D&&R($,et,Q,tt,J,ut,vt.x,vt.y)&&k(vt.prev,vt,vt.next)>=0)return!1;vt=vt.prevZ}for(;Et&&Et.z<=me;){if(Et.x>=pt&&Et.x<=Ne&&Et.y>=wt&&Et.y<=_e&&Et!==Y&&Et!==D&&R($,et,Q,tt,J,ut,Et.x,Et.y)&&k(Et.prev,Et,Et.next)>=0)return!1;Et=Et.nextZ}return!0}function c(x,C,O){var B=x;do{var Y=B.prev,E=B.next.next;!H(Y,E)&&X(Y,B,B.next,E)&&lt(Y,E)&&lt(E,Y)&&(C.push(Y.i/O|0),C.push(B.i/O|0),C.push(E.i/O|0),xt(B),xt(B.next),B=x=E),B=B.next}while(B!==x);return i(B)}function h(x,C,O,B,Y,E){var D=x;do{for(var $=D.next.next;$!==D.prev;){if(D.i!==$.i&&M(D,$)){var Q=rt(D,$);D=i(D,D.next),Q=i(Q,Q.next),r(D,C,O,B,Y,E,0),r(Q,C,O,B,Y,E,0);return}$=$.next}D=D.next}while(D!==x)}function f(x,C,O,B){var Y=[],E,D,$,Q,J;for(E=0,D=C.length;E<D;E++)$=C[E]*B,Q=E<D-1?C[E+1]*B:x.length,J=t(x,$,Q,B,!1),J===J.next&&(J.steiner=!0),Y.push(T(J));for(Y.sort(p),E=0;E<Y.length;E++)O=g(Y[E],O);return O}function p(x,C){return x.x-C.x}function g(x,C){var O=y(x,C);if(!O)return C;var B=rt(O,x);return i(B,B.next),i(O,O.next)}function y(x,C){var O=C,B=x.x,Y=x.y,E=-1/0,D;do{if(Y<=O.y&&Y>=O.next.y&&O.next.y!==O.y){var $=O.x+(Y-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if($<=B&&$>E&&(E=$,D=O.x<O.next.x?O:O.next,$===B))return D}O=O.next}while(O!==C);if(!D)return null;var Q=D,J=D.x,et=D.y,tt=1/0,ut;O=D;do B>=O.x&&O.x>=J&&B!==O.x&&R(Y<et?B:E,Y,J,et,Y<et?E:B,Y,O.x,O.y)&&(ut=Math.abs(Y-O.y)/(B-O.x),lt(O,x)&&(ut<tt||ut===tt&&(O.x>D.x||O.x===D.x&&b(D,O)))&&(D=O,tt=ut)),O=O.next;while(O!==Q);return D}function b(x,C){return k(x.prev,x,C.prev)<0&&k(C.next,x,x.next)<0}function _(x,C,O,B){var Y=x;do Y.z===0&&(Y.z=A(Y.x,Y.y,C,O,B)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==x);Y.prevZ.nextZ=null,Y.prevZ=null,S(Y)}function S(x){var C,O,B,Y,E,D,$,Q,J=1;do{for(O=x,x=null,E=null,D=0;O;){for(D++,B=O,$=0,C=0;C<J&&($++,B=B.nextZ,!!B);C++);for(Q=J;$>0||Q>0&&B;)$!==0&&(Q===0||!B||O.z<=B.z)?(Y=O,O=O.nextZ,$--):(Y=B,B=B.nextZ,Q--),E?E.nextZ=Y:x=Y,Y.prevZ=E,E=Y;O=B}E.nextZ=null,J*=2}while(D>1);return x}function A(x,C,O,B,Y){return x=(x-O)*Y|0,C=(C-B)*Y|0,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,x|C<<1}function T(x){var C=x,O=x;do(C.x<O.x||C.x===O.x&&C.y<O.y)&&(O=C),C=C.next;while(C!==x);return O}function R(x,C,O,B,Y,E,D,$){return(Y-D)*(C-$)>=(x-D)*(E-$)&&(x-D)*(B-$)>=(O-D)*(C-$)&&(O-D)*(E-$)>=(Y-D)*(B-$)}function M(x,C){return x.next.i!==C.i&&x.prev.i!==C.i&&!st(x,C)&&(lt(x,C)&&lt(C,x)&&nt(x,C)&&(k(x.prev,x,C.prev)||k(x,C.prev,C))||H(x,C)&&k(x.prev,x,x.next)>0&&k(C.prev,C,C.next)>0)}function k(x,C,O){return(C.y-x.y)*(O.x-C.x)-(C.x-x.x)*(O.y-C.y)}function H(x,C){return x.x===C.x&&x.y===C.y}function X(x,C,O,B){var Y=L(k(x,C,O)),E=L(k(x,C,B)),D=L(k(O,B,x)),$=L(k(O,B,C));return!!(Y!==E&&D!==$||Y===0&&P(x,O,C)||E===0&&P(x,B,C)||D===0&&P(O,x,B)||$===0&&P(O,C,B))}function P(x,C,O){return C.x<=Math.max(x.x,O.x)&&C.x>=Math.min(x.x,O.x)&&C.y<=Math.max(x.y,O.y)&&C.y>=Math.min(x.y,O.y)}function L(x){return x>0?1:x<0?-1:0}function st(x,C){var O=x;do{if(O.i!==x.i&&O.next.i!==x.i&&O.i!==C.i&&O.next.i!==C.i&&X(O,O.next,x,C))return!0;O=O.next}while(O!==x);return!1}function lt(x,C){return k(x.prev,x,x.next)<0?k(x,C,x.next)>=0&&k(x,x.prev,C)>=0:k(x,C,x.prev)<0||k(x,x.next,C)<0}function nt(x,C){var O=x,B=!1,Y=(x.x+C.x)/2,E=(x.y+C.y)/2;do O.y>E!=O.next.y>E&&O.next.y!==O.y&&Y<(O.next.x-O.x)*(E-O.y)/(O.next.y-O.y)+O.x&&(B=!B),O=O.next;while(O!==x);return B}function rt(x,C){var O=new Dt(x.i,x.x,x.y),B=new Dt(C.i,C.x,C.y),Y=x.next,E=C.prev;return x.next=C,C.prev=x,O.next=Y,Y.prev=O,B.next=O,O.prev=B,E.next=B,B.prev=E,B}function yt(x,C,O,B){var Y=new Dt(x,C,O);return B?(Y.next=B.next,Y.prev=B,B.next.prev=Y,B.next=Y):(Y.prev=Y,Y.next=Y),Y}function xt(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function Dt(x,C,O){this.i=x,this.x=C,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(x,C,O,B){var Y=C&&C.length,E=Y?C[0]*O:x.length,D=Math.abs(Kt(x,0,E,O));if(Y)for(var $=0,Q=C.length;$<Q;$++){var J=C[$]*O,et=$<Q-1?C[$+1]*O:x.length;D-=Math.abs(Kt(x,J,et,O))}var tt=0;for($=0;$<B.length;$+=3){var ut=B[$]*O,pt=B[$+1]*O,wt=B[$+2]*O;tt+=Math.abs((x[ut]-x[wt])*(x[pt+1]-x[ut+1])-(x[ut]-x[pt])*(x[wt+1]-x[ut+1]))}return D===0&&tt===0?0:Math.abs((tt-D)/D)};function Kt(x,C,O,B){for(var Y=0,E=C,D=O-B;E<O;E+=B)Y+=(x[D]-x[E])*(x[E+1]+x[D+1]),D=E;return Y}return n.flatten=function(x){for(var C=x[0][0].length,O={vertices:[],holes:[],dimensions:C},B=0,Y=0;Y<x.length;Y++){for(var E=0;E<x[Y].length;E++)for(var D=0;D<C;D++)O.vertices.push(x[Y][E][D]);Y>0&&(B+=x[Y-1].length,O.holes.push(B))}return O},co.exports}var H1=q1();const $1=Ua(H1);var yv=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(yv||{});class I1{constructor(t){this.items=[],this._name=t}emit(t,i,r,l,o,c,h,f){const{name:p,items:g}=this;for(let y=0,b=g.length;y<b;y++)g[y][p](t,i,r,l,o,c,h,f);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&this.items.splice(i,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Y1=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],vv=class _v extends ns{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const i=[...Y1,...this.config.runners??[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(t={}){const i=t.skipExtensionImports===!0?!0:t.manageImports===!1;await L1(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const r in this._systemsHash)t={...this._systemsHash[r].constructor.defaultOptions,...t};t={..._v.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let r=0;r<this.runners.init.items.length;r++)await this.runners.init.items[r].init(t);this._initOptions=t}render(t,i){let r=t;if(r instanceof ne&&(r={container:r},i&&(ee(de,"passing a second argument is deprecated, please use render options instead"),r.target=i.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor=this.background.colorRgba),r.clearColor){const l=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=l?r.clearColor:ni.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(t,i,r){const l=this.view.resolution;this.view.resize(t,i,r),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),r!==void 0&&r!==l&&this.runners.resolutionChange.emit(r)}clear(t={}){const i=this;t.target||(t.target=i.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=yv.ALL);const{clear:r,clearColor:l,target:o}=t;ni.shared.setValue(l??this.background.colorRgba),i.renderTarget.clear(o,r,ni.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(i=>{this.runners[i]=new I1(i)})}_addSystems(t){let i;for(i in t){const r=t[i];this._addSystem(r.value,r.name)}}_addSystem(t,i){const r=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=r,this._systemsHash[i]=r;for(const l in this.runners)this.runners[l].add(r);return this}_addPipes(t,i){const r=i.reduce((l,o)=>(l[o.name]=o.value,l),{});t.forEach(l=>{const o=l.value,c=l.name,h=r[c];this.renderPipes[c]=new o(this,h?new h:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(i=>{i.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!G1())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};vv.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let bv=vv,ho;function V1(n){return ho!==void 0||(ho=(()=>{var i;const t={stencil:!0,failIfMajorPerformanceCaveat:n??bv.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Us.get().getWebGLRenderingContext())return!1;let l=Us.get().createCanvas().getContext("webgl",t);const o=!!((i=l==null?void 0:l.getContextAttributes())!=null&&i.stencil);if(l){const c=l.getExtension("WEBGL_lose_context");c&&c.loseContext()}return l=null,o}catch{return!1}})()),ho}let fo;async function F1(n={}){return fo!==void 0||(fo=await(async()=>{const t=Us.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),fo}const _g=["webgl","webgpu","canvas"];async function X1(n){let t=[];n.preference?(t.push(n.preference),_g.forEach(o=>{o!==n.preference&&t.push(o)})):t=_g.slice();let i,r={};for(let o=0;o<t.length;o++){const c=t[o];if(c==="webgpu"&&await F1()){const{WebGPURenderer:h}=await Eo(async()=>{const{WebGPURenderer:f}=await import("./WebGPURenderer-Bqh5VnsE.js");return{WebGPURenderer:f}},__vite__mapDeps([4,2,5,3]));i=h,r={...n,...n.webgpu};break}else if(c==="webgl"&&V1(n.failIfMajorPerformanceCaveat??bv.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Eo(async()=>{const{WebGLRenderer:f}=await import("./WebGLRenderer-uCdkQj8q.js");return{WebGLRenderer:f}},__vite__mapDeps([6,2,5]));i=h,r={...n,...n.webgl};break}else if(c==="canvas")throw r={...n},new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!i)throw new Error("No available renderer for the current environment");const l=new i;return await l.init(r),l}const xv="8.6.6";class wv{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,xv)}static destroy(){}}wv.extension=Pt.Application;class K1{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,xv)}destroy(){this._renderer=null}}K1.extension={type:[Pt.WebGLSystem,Pt.WebGPUSystem],name:"initHook",priority:-10};const Sv=class Qh{constructor(...t){this.stage=new ne,t[0]!==void 0&&ee(de,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await X1(t),Qh._plugins.forEach(i=>{i.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return ee(de,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,i=!1){const r=Qh._plugins.slice(0);r.reverse(),r.forEach(l=>{l.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Sv._plugins=[];let Tv=Sv;Di.handleByList(Pt.Application,Tv._plugins);Di.add(wv);const Ev=class Zh{constructor(t,i,r,l){this.uid=fe("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=i,this.x1=r,this.y1=l}addColorStop(t,i){return this.gradientStops.push({offset:t,color:ni.shared.setValue(i).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;const t=Zh.defaultTextureSize,{gradientStops:i}=this,r=Us.get().createCanvas();r.width=t,r.height=t;const l=r.getContext("2d"),o=l.createLinearGradient(0,0,Zh.defaultTextureSize,1);for(let A=0;A<i.length;A++){const T=i[A];o.addColorStop(T.offset,T.color)}l.fillStyle=o,l.fillRect(0,0,t,t),this.texture=new It({source:new _d({resource:r,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:c,y0:h,x1:f,y1:p}=this,g=new Ut,y=f-c,b=p-h,_=Math.sqrt(y*y+b*b),S=Math.atan2(b,y);g.translate(-c,-h),g.scale(1/t,1/t),g.rotate(-S),g.scale(256/_,1),this.transform=g,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map(l=>`${l.offset}-${l.color}`).join("-"),i=this.texture.uid,r=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${i}-${r}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};Ev.defaultTextureSize=256;let W1=Ev;const bg={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Q1{constructor(t,i){this.uid=fe("fillPattern"),this.transform=new Ut,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),i&&(t.source.style.addressModeU=bg[i].addressModeU,t.source.style.addressModeV=bg[i].addressModeV)}setTransform(t){const i=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/i.frame.width,1/i.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var wh,xg;function Z1(){if(xg)return wh;xg=1,wh=i;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function i(o){var c=[];return o.replace(t,function(h,f,p){var g=f.toLowerCase();for(p=l(p),g=="m"&&p.length>2&&(c.push([f].concat(p.splice(0,2))),g="l",f=f=="m"?"l":"L");;){if(p.length==n[g])return p.unshift(f),c.push(p);if(p.length<n[g])throw new Error("malformed path data");c.push([f].concat(p.splice(0,n[g])))}}),c}var r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function l(o){var c=o.match(r);return c?c.map(Number):[]}return wh}var J1=Z1();const tS=Ua(J1);function eS(n,t){const i=tS(n),r=[];let l=null,o=0,c=0;for(let h=0;h<i.length;h++){const f=i[h],p=f[0],g=f;switch(p){case"M":o=g[1],c=g[2],t.moveTo(o,c);break;case"m":o+=g[1],c+=g[2],t.moveTo(o,c);break;case"H":o=g[1],t.lineTo(o,c);break;case"h":o+=g[1],t.lineTo(o,c);break;case"V":c=g[1],t.lineTo(o,c);break;case"v":c+=g[1],t.lineTo(o,c);break;case"L":o=g[1],c=g[2],t.lineTo(o,c);break;case"l":o+=g[1],c+=g[2],t.lineTo(o,c);break;case"C":o=g[5],c=g[6],t.bezierCurveTo(g[1],g[2],g[3],g[4],o,c);break;case"c":t.bezierCurveTo(o+g[1],c+g[2],o+g[3],c+g[4],o+g[5],c+g[6]),o+=g[5],c+=g[6];break;case"S":o=g[3],c=g[4],t.bezierCurveToShort(g[1],g[2],o,c);break;case"s":t.bezierCurveToShort(o+g[1],c+g[2],o+g[3],c+g[4]),o+=g[3],c+=g[4];break;case"Q":o=g[3],c=g[4],t.quadraticCurveTo(g[1],g[2],o,c);break;case"q":t.quadraticCurveTo(o+g[1],c+g[2],o+g[3],c+g[4]),o+=g[3],c+=g[4];break;case"T":o=g[1],c=g[2],t.quadraticCurveToShort(o,c);break;case"t":o+=g[1],c+=g[2],t.quadraticCurveToShort(o,c);break;case"A":o=g[6],c=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],o,c);break;case"a":o+=g[6],c+=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],o,c);break;case"Z":case"z":t.closePath(),r.length>0&&(l=r.pop(),l?(o=l.startX,c=l.startY):(o=0,c=0)),l=null;break;default:Ni(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&l===null&&(l={startX:o,startY:c},r.push(l))}return t}class wd{constructor(t=0,i=0,r=0){this.type="circle",this.x=t,this.y=i,this.radius=r}clone(){return new wd(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const r=this.radius*this.radius;let l=this.x-t,o=this.y-i;return l*=l,o*=o,l+o<=r}strokeContains(t,i,r,l=.5){if(this.radius===0)return!1;const o=this.x-t,c=this.y-i,h=this.radius,f=(1-l)*r,p=Math.sqrt(o*o+c*c);return p<=h+f&&p>h-(r-f)}getBounds(t){return t||(t=new Ce),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Sd{constructor(t=0,i=0,r=0,l=0){this.type="ellipse",this.x=t,this.y=i,this.halfWidth=r,this.halfHeight=l}clone(){return new Sd(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,i){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(t-this.x)/this.halfWidth,l=(i-this.y)/this.halfHeight;return r*=r,l*=l,r+l<=1}strokeContains(t,i,r,l=.5){const{halfWidth:o,halfHeight:c}=this;if(o<=0||c<=0)return!1;const h=r*(1-l),f=r-h,p=o-f,g=c-f,y=o+h,b=c+h,_=t-this.x,S=i-this.y,A=_*_/(p*p)+S*S/(g*g),T=_*_/(y*y)+S*S/(b*b);return A>1&&T<=1}getBounds(t){return t||(t=new Ce),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function iS(n,t,i,r,l,o){const c=n-i,h=t-r,f=l-i,p=o-r,g=c*f+h*p,y=f*f+p*p;let b=-1;y!==0&&(b=g/y);let _,S;b<0?(_=i,S=r):b>1?(_=l,S=o):(_=i+b*f,S=r+b*p);const A=n-_,T=t-S;return A*A+T*T}class wa{constructor(...t){this.type="polygon";let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const r=[];for(let l=0,o=i.length;l<o;l++)r.push(i[l].x,i[l].y);i=r}this.points=i,this.closePath=!0}clone(){const t=this.points.slice(),i=new wa(t);return i.closePath=this.closePath,i}contains(t,i){let r=!1;const l=this.points.length/2;for(let o=0,c=l-1;o<l;c=o++){const h=this.points[o*2],f=this.points[o*2+1],p=this.points[c*2],g=this.points[c*2+1];f>i!=g>i&&t<(p-h)*((i-f)/(g-f))+h&&(r=!r)}return r}strokeContains(t,i,r,l=.5){const o=r*r,c=o*(1-l),h=o-c,{points:f}=this,p=f.length-(this.closePath?0:2);for(let g=0;g<p;g+=2){const y=f[g],b=f[g+1],_=f[(g+2)%f.length],S=f[(g+3)%f.length],A=iS(t,i,y,b,_,S),T=Math.sign((_-y)*(i-b)-(S-b)*(t-y));if(A<=(T<0?h:c))return!0}return!1}getBounds(t){t||(t=new Ce);const i=this.points;let r=1/0,l=-1/0,o=1/0,c=-1/0;for(let h=0,f=i.length;h<f;h+=2){const p=i[h],g=i[h+1];r=p<r?p:r,l=p>l?p:l,o=g<o?g:o,c=g>c?g:c}return t.x=r,t.width=l-r,t.y=o,t.height=c-o,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const mo=(n,t,i,r,l,o,c)=>{const h=n-i,f=t-r,p=Math.sqrt(h*h+f*f);return p>=l-o&&p<=l+c};class Td{constructor(t=0,i=0,r=0,l=0,o=20){this.type="roundedRectangle",this.x=t,this.y=i,this.width=r,this.height=l,this.radius=o}getBounds(t){return t||(t=new Ce),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Td(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+r&&i<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let l=t-(this.x+r),o=i-(this.y+r);const c=r*r;if(l*l+o*o<=c||(l=t-(this.x+this.width-r),l*l+o*o<=c)||(o=i-(this.y+this.height-r),l*l+o*o<=c)||(l=t-(this.x+r),l*l+o*o<=c))return!0}return!1}strokeContains(t,i,r,l=.5){const{x:o,y:c,width:h,height:f,radius:p}=this,g=r*(1-l),y=r-g,b=o+p,_=c+p,S=h-p*2,A=f-p*2,T=o+h,R=c+f;return(t>=o-g&&t<=o+y||t>=T-y&&t<=T+g)&&i>=_&&i<=_+A||(i>=c-g&&i<=c+y||i>=R-y&&i<=R+g)&&t>=b&&t<=b+S?!0:t<b&&i<_&&mo(t,i,b,_,p,y,g)||t>T-p&&i<_&&mo(t,i,T-p,_,p,y,g)||t>T-p&&i>R-p&&mo(t,i,T-p,R-p,p,y,g)||t<b&&i>R-p&&mo(t,i,b,R-p,p,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const sS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function nS(n){let t="";for(let i=0;i<n;++i)i>0&&(t+=`
else `),i<n-1&&(t+=`if(test == ${i}.0){}`);return t}function rS(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const r=sS.replace(/%forloop%/gi,nS(n));if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(i)}return n}let Qn=null;function Av(){var t;if(Qn)return Qn;const n=cv();return Qn=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),Qn=rS(Qn,n),(t=n.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Qn}const Cv={};function aS(n,t){let i=2166136261;for(let r=0;r<t;r++)i^=n[r].uid,i=Math.imul(i,16777619),i>>>=0;return Cv[i]||lS(n,t,i)}let Sh=0;function lS(n,t,i){const r={};let l=0;Sh||(Sh=Av());for(let c=0;c<Sh;c++){const h=c<t?n[c]:It.EMPTY.source;r[l++]=h.source,r[l++]=h.style}const o=new wo(r);return Cv[i]=o,o}class wg{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function Sg(n,t){const i=n.byteLength/8|0,r=new Float64Array(n,0,i);new Float64Array(t,0,i).set(r);const o=n.byteLength-i*8;if(o>0){const c=new Uint8Array(n,i*8,o);new Uint8Array(t,i*8,o).set(c)}}const oS={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var uS=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(uS||{});function Tg(n,t){return t.alphaMode==="no-premultiply-alpha"&&oS[n]||n}class cS{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const i=this.textures[t];this.textures[t]=null,this.ids[i.uid]=null}this.count=0}}class hS{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new cS,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Mv=[];let Jh=0;function Eg(){return Jh>0?Mv[--Jh]:new hS}function Ag(n){Mv[Jh++]=n}let da=0;const Rv=class So{constructor(t={}){this.uid=fe("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],So.defaultOptions.maxTextures=So.defaultOptions.maxTextures??Av(),t={...So.defaultOptions,...t};const{maxTextures:i,attributesInitialSize:r,indicesInitialSize:l}=t;this.attributeBuffer=new wg(r*4),this.indexBuffer=new Uint16Array(l),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Ag(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,i){const r=t._batch.textures.ids[i._source.uid];return!r&&r!==0?!1:(t._textureId=r,t.texture=i,!0)}updateElement(t){this.dirty=!0;const i=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,i.float32View,i.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,i.float32View,i.uint32View,t._attributeStart,t._textureId)}break(t){const i=this._elements;if(!i[this.elementStart])return;let r=Eg(),l=r.textures;l.clear();const o=i[this.elementStart];let c=Tg(o.blendMode,o.texture._source),h=o.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,b=this._batchIndexStart,_="startBatch";const S=this.maxTextures;for(let A=this.elementStart;A<this.elementSize;++A){const T=i[A];i[A]=null;const M=T.texture._source,k=Tg(T.blendMode,M),H=c!==k||h!==T.topology;if(M._batchTick===da&&!H){T._textureId=M._textureBindLocation,y+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,f,p,T._attributeStart,T._textureId),this.packQuadIndex(g,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,f,p,T._attributeStart,T._textureId),this.packIndex(T,g,T._indexStart,T._attributeStart/this.vertexSize)),T._batch=r;continue}M._batchTick=da,(l.count>=S||H)&&(this._finishBatch(r,b,y-b,l,c,h,t,_),_="renderBatch",b=y,c=k,h=T.topology,r=Eg(),l=r.textures,l.clear(),++da),T._textureId=M._textureBindLocation=l.count,l.ids[M.uid]=l.count,l.textures[l.count++]=M,T._batch=r,y+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,f,p,T._attributeStart,T._textureId),this.packQuadIndex(g,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,f,p,T._attributeStart,T._textureId),this.packIndex(T,g,T._indexStart,T._attributeStart/this.vertexSize))}l.count>0&&(this._finishBatch(r,b,y-b,l,c,h,t,_),b=y,++da),this.elementStart=this.elementSize,this._batchIndexStart=b,this._batchIndexSize=y}_finishBatch(t,i,r,l,o,c,h,f){t.gpuBindGroup=null,t.bindGroup=null,t.action=f,t.batcher=this,t.textures=l,t.blendMode=o,t.topology=c,t.start=i,t.size=r,++da,this.batches[this.batchIndex++]=t,h.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const i=Math.max(t,this.attributeBuffer.size*2),r=new wg(i);Sg(this.attributeBuffer.rawBinaryData,r.rawBinaryData),this.attributeBuffer=r}_resizeIndexBuffer(t){const i=this.indexBuffer;let r=Math.max(t,i.length*1.5);r+=r%2;const l=r>65535?new Uint32Array(r):new Uint16Array(r);if(l.BYTES_PER_ELEMENT!==i.BYTES_PER_ELEMENT)for(let o=0;o<i.length;o++)l[o]=i[o];else Sg(i.buffer,l.buffer);this.indexBuffer=l}packQuadIndex(t,i,r){t[i]=r+0,t[i+1]=r+1,t[i+2]=r+2,t[i+3]=r+0,t[i+4]=r+2,t[i+5]=r+3}packIndex(t,i,r,l){const o=t.indices,c=t.indexSize,h=t.indexOffset,f=t.attributeOffset;for(let p=0;p<c;p++)i[r++]=l+o[p+h]-f}destroy(){for(let t=0;t<this.batches.length;t++)Ag(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};Rv.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let dS=Rv;var Ge=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(Ge||{});let Ca=class extends ns{constructor(t){let{data:i,size:r}=t;const{usage:l,label:o,shrinkToFit:c}=t;super(),this.uid=fe("buffer"),this._resourceType="buffer",this._resourceId=fe("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,i instanceof Array&&(i=new Float32Array(i)),this._data=i,r??(r=i==null?void 0:i.byteLength);const h=!!i;this.descriptor={size:r,usage:l,mappedAtCreation:h,label:o},this.shrinkToFit=c??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Ge.STATIC)}set static(t){t?this.descriptor.usage|=Ge.STATIC:this.descriptor.usage&=~Ge.STATIC}setDataWithSize(t,i,r){if(this._updateID++,this._updateSize=i*t.BYTES_PER_ELEMENT,this._data===t){r&&this.emit("update",this);return}const l=this._data;if(this._data=t,this._dataInt32=null,!l||l.length!==t.length){!this.shrinkToFit&&l&&t.byteLength<l.byteLength?r&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=fe("resource"),this.emit("change",this));return}r&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function Ov(n,t){if(!(n instanceof Ca)){let i=t?Ge.INDEX:Ge.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),i=Ge.INDEX|Ge.COPY_DST):(n=new Float32Array(n),i=Ge.VERTEX|Ge.COPY_DST)),n=new Ca({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return n}function fS(n,t,i){const r=n.getAttribute(t);if(!r)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const l=r.buffer.data;let o=1/0,c=1/0,h=-1/0,f=-1/0;const p=l.BYTES_PER_ELEMENT,g=(r.offset||0)/p,y=(r.stride||8)/p;for(let b=g;b<l.length;b+=y){const _=l[b],S=l[b+1];_>h&&(h=_),S>f&&(f=S),_<o&&(o=_),S<c&&(c=S)}return i.minX=o,i.minY=c,i.maxX=h,i.maxY=f,i}function mS(n){return(n instanceof Ca||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=Ov(n.buffer,!1),n}class pS extends ns{constructor(t={}){super(),this.uid=fe("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new ji,this._boundsDirty=!0;const{attributes:i,indexBuffer:r,topology:l}=t;if(this.buffers=[],this.attributes={},i)for(const o in i)this.addAttribute(o,i[o]);this.instanceCount=t.instanceCount??1,r&&this.addIndex(r),this.topology=l||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const i=this.attributes[t];return i.buffer.data.length/(i.stride/4||i.size)}return 0}addAttribute(t,i){const r=mS(i);this.buffers.indexOf(r.buffer)===-1&&(this.buffers.push(r.buffer),r.buffer.on("update",this.onBufferUpdate,this),r.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=r}addIndex(t){this.indexBuffer=Ov(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,fS(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(i=>i.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const gS=new Float32Array(1),yS=new Uint32Array(1);class vS extends pS{constructor(){const i=new Ca({data:gS,label:"attribute-batch-buffer",usage:Ge.VERTEX|Ge.COPY_DST,shrinkToFit:!1}),r=new Ca({data:yS,label:"index-batch-buffer",usage:Ge.INDEX|Ge.COPY_DST,shrinkToFit:!1}),l=24;super({attributes:{aPosition:{buffer:i,format:"float32x2",stride:l,offset:0},aUV:{buffer:i,format:"float32x2",stride:l,offset:8},aColor:{buffer:i,format:"unorm8x4",stride:l,offset:16},aTextureIdAndRound:{buffer:i,format:"uint16x2",stride:l,offset:20}},indexBuffer:r})}}function Cg(n,t,i){if(n)for(const r in n){const l=r.toLocaleLowerCase(),o=t[l];if(o){let c=n[r];r==="header"&&(c=c.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&o.push(`//----${i}----//`),o.push(c)}else Ni(`${r} placement hook does not exist in shader`)}}const _S=/\{\{(.*?)\}\}/g;function Mg(n){var r;const t={};return(((r=n.match(_S))==null?void 0:r.map(l=>l.replace(/[{()}]/g,"")))??[]).forEach(l=>{t[l]=[]}),t}function Rg(n,t){let i;const r=/@in\s+([^;]+);/g;for(;(i=r.exec(n))!==null;)t.push(i[1])}function Og(n,t,i=!1){const r=[];Rg(t,r),n.forEach(h=>{h.header&&Rg(h.header,r)});const l=r;i&&l.sort();const o=l.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let c=t.replace(/@in\s+[^;]+;\s*/g,"");return c=c.replace("{{in}}",`
${o}
`),c}function kg(n,t){let i;const r=/@out\s+([^;]+);/g;for(;(i=r.exec(n))!==null;)t.push(i[1])}function bS(n){const i=/\b(\w+)\s*:/g.exec(n);return i?i[1]:""}function xS(n){const t=/@.*?\s+/g;return n.replace(t,"")}function wS(n,t){const i=[];kg(t,i),n.forEach(f=>{f.header&&kg(f.header,i)});let r=0;const l=i.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${r++}) ${f}`).join(`,
`),o=i.sort().map(f=>`       var ${xS(f)};`).join(`
`),c=`return VSOutput(
            ${i.sort().map(f=>` ${bS(f)}`).join(`,
`)});`;let h=t.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${l}
`),h=h.replace("{{start}}",`
${o}
`),h=h.replace("{{return}}",`
${c}
`),h}function Ng(n,t){let i=n;for(const r in t){const l=t[r];l.join(`
`).length?i=i.replace(`{{${r}}}`,`//-----${r} START-----//
${l.join(`
`)}
//----${r} FINISH----//`):i=i.replace(`{{${r}}}`,"")}return i}const Ds=Object.create(null),Th=new Map;let SS=0;function TS({template:n,bits:t}){const i=kv(n,t);if(Ds[i])return Ds[i];const{vertex:r,fragment:l}=AS(n,t);return Ds[i]=Nv(r,l,t),Ds[i]}function ES({template:n,bits:t}){const i=kv(n,t);return Ds[i]||(Ds[i]=Nv(n.vertex,n.fragment,t)),Ds[i]}function AS(n,t){const i=t.map(c=>c.vertex).filter(c=>!!c),r=t.map(c=>c.fragment).filter(c=>!!c);let l=Og(i,n.vertex,!0);l=wS(i,l);const o=Og(r,n.fragment,!0);return{vertex:l,fragment:o}}function kv(n,t){return t.map(i=>(Th.has(i)||Th.set(i,SS++),Th.get(i))).sort((i,r)=>i-r).join("-")+n.vertex+n.fragment}function Nv(n,t,i){const r=Mg(n),l=Mg(t);return i.forEach(o=>{Cg(o.vertex,r,o.name),Cg(o.fragment,l,o.name)}),{vertex:Ng(n,r),fragment:Ng(t,l)}}const CS=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,MS=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,RS=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,OS=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,kS={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},NS={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function jS({bits:n,name:t}){const i=TS({template:{fragment:MS,vertex:CS},bits:[kS,...n]});return Oo.from({name:t,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function DS({bits:n,name:t}){return new dv({name:t,...ES({template:{vertex:RS,fragment:OS},bits:[NS,...n]})})}const US={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},zS={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Eh={};function BS(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let r=0;r<n;r++)t.push(`@group(1) @binding(${i++}) var textureSource${r+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${i++}) var textureSampler${r+1}: sampler;`)}return t.join(`
`)}function PS(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let i=0;i<n;i++)i===n-1?t.push("  default:{"):t.push(`  case ${i}:{`),t.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function LS(n){return Eh[n]||(Eh[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${BS(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${PS(n)}
            `}}),Eh[n]}const Ah={};function GS(n){const t=[];for(let i=0;i<n;i++)i>0&&t.push("else"),i<n-1&&t.push(`if(vTextureId < ${i}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${i}], vUV);`),t.push("}");return t.join(`
`)}function qS(n){return Ah[n]||(Ah[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${GS(n)}
            `}}),Ah[n]}const HS={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},$S={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},jg={};function IS(n){let t=jg[n];if(t)return t;const i=new Int32Array(n);for(let r=0;r<n;r++)i[r]=r;return t=jg[n]=new gv({uTextures:{value:i,type:"i32",size:n}},{isStatic:!0}),t}class YS extends xd{constructor(t){const i=DS({name:"batch",bits:[zS,qS(t),$S]}),r=jS({name:"batch",bits:[US,LS(t),HS]});super({glProgram:i,gpuProgram:r,resources:{batchSamplers:IS(t)}})}}let Dg=null;const jv=class Dv extends dS{constructor(){super(...arguments),this.geometry=new vS,this.shader=Dg||(Dg=new YS(this.maxTextures)),this.name=Dv.extension.name,this.vertexSize=6}packAttributes(t,i,r,l,o){const c=o<<16|t.roundPixels&65535,h=t.transform,f=h.a,p=h.b,g=h.c,y=h.d,b=h.tx,_=h.ty,{positions:S,uvs:A}=t,T=t.color,R=t.attributeOffset,M=R+t.attributeSize;for(let k=R;k<M;k++){const H=k*2,X=S[H],P=S[H+1];i[l++]=f*X+g*P+b,i[l++]=y*P+p*X+_,i[l++]=A[H],i[l++]=A[H+1],r[l++]=T,r[l++]=c}}packQuadAttributes(t,i,r,l,o){const c=t.texture,h=t.transform,f=h.a,p=h.b,g=h.c,y=h.d,b=h.tx,_=h.ty,S=t.bounds,A=S.maxX,T=S.minX,R=S.maxY,M=S.minY,k=c.uvs,H=t.color,X=o<<16|t.roundPixels&65535;i[l+0]=f*T+g*M+b,i[l+1]=y*M+p*T+_,i[l+2]=k.x0,i[l+3]=k.y0,r[l+4]=H,r[l+5]=X,i[l+6]=f*A+g*M+b,i[l+7]=y*M+p*A+_,i[l+8]=k.x1,i[l+9]=k.y1,r[l+10]=H,r[l+11]=X,i[l+12]=f*A+g*R+b,i[l+13]=y*R+p*A+_,i[l+14]=k.x2,i[l+15]=k.y2,r[l+16]=H,r[l+17]=X,i[l+18]=f*T+g*R+b,i[l+19]=y*R+p*T+_,i[l+20]=k.x3,i[l+21]=k.y3,r[l+22]=H,r[l+23]=X}};jv.extension={type:[Pt.Batcher],name:"default"};let VS=jv;function FS(n,t,i,r,l,o,c,h=null){let f=0;i*=t,l*=o;const p=h.a,g=h.b,y=h.c,b=h.d,_=h.tx,S=h.ty;for(;f<c;){const A=n[i],T=n[i+1];r[l]=p*A+y*T+_,r[l+1]=g*A+b*T+S,l+=o,i+=t,f++}}function XS(n,t,i,r){let l=0;for(t*=i;l<r;)n[t]=0,n[t+1]=0,t+=i,l++}function Uv(n,t,i,r,l){const o=t.a,c=t.b,h=t.c,f=t.d,p=t.tx,g=t.ty;i||(i=0),r||(r=2),l||(l=n.length/r-i);let y=i*r;for(let b=0;b<l;b++){const _=n[y],S=n[y+1];n[y]=o*_+h*S+p,n[y+1]=c*_+f*S+g,y+=r}}const KS=new Ut;class zv{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,i=t>>16|t&65280|(t&255)<<16,r=this.renderable;return r?$y(i,r.groupColor)+(this.alpha*r.groupAlpha*255<<24):i+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||KS}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Ma={extension:{type:Pt.ShapeBuilder,name:"circle"},build(n,t){let i,r,l,o,c,h;if(n.type==="circle"){const H=n;i=H.x,r=H.y,c=h=H.radius,l=o=0}else if(n.type==="ellipse"){const H=n;i=H.x,r=H.y,c=H.halfWidth,h=H.halfHeight,l=o=0}else{const H=n,X=H.width/2,P=H.height/2;i=H.x+X,r=H.y+P,c=h=Math.max(0,Math.min(H.radius,Math.min(X,P))),l=X-c,o=P-h}if(!(c>=0&&h>=0&&l>=0&&o>=0))return t;const f=Math.ceil(2.3*Math.sqrt(c+h)),p=f*8+(l?4:0)+(o?4:0);if(p===0)return t;if(f===0)return t[0]=t[6]=i+l,t[1]=t[3]=r+o,t[2]=t[4]=i-l,t[5]=t[7]=r-o,t;let g=0,y=f*4+(l?2:0)+2,b=y,_=p,S=l+c,A=o,T=i+S,R=i-S,M=r+A;if(t[g++]=T,t[g++]=M,t[--y]=M,t[--y]=R,o){const H=r-A;t[b++]=R,t[b++]=H,t[--_]=H,t[--_]=T}for(let H=1;H<f;H++){const X=Math.PI/2*(H/f),P=l+Math.cos(X)*c,L=o+Math.sin(X)*h,st=i+P,lt=i-P,nt=r+L,rt=r-L;t[g++]=st,t[g++]=nt,t[--y]=nt,t[--y]=lt,t[b++]=lt,t[b++]=rt,t[--_]=rt,t[--_]=st}S=l,A=o+h,T=i+S,R=i-S,M=r+A;const k=r-A;return t[g++]=T,t[g++]=M,t[--_]=k,t[--_]=T,l&&(t[g++]=R,t[g++]=M,t[--_]=k,t[--_]=R),t},triangulate(n,t,i,r,l,o){if(n.length===0)return;let c=0,h=0;for(let g=0;g<n.length;g+=2)c+=n[g],h+=n[g+1];c/=n.length/2,h/=n.length/2;let f=r;t[f*i]=c,t[f*i+1]=h;const p=f++;for(let g=0;g<n.length;g+=2)t[f*i]=n[g],t[f*i+1]=n[g+1],g>0&&(l[o++]=f,l[o++]=p,l[o++]=f-1),f++;l[o++]=p+1,l[o++]=p,l[o++]=f-1}},WS={...Ma,extension:{...Ma.extension,name:"ellipse"}},QS={...Ma,extension:{...Ma.extension,name:"roundedRectangle"}},Bv=1e-4,Ug=1e-4;function ZS(n){const t=n.length;if(t<6)return 1;let i=0;for(let r=0,l=n[t-2],o=n[t-1];r<t;r+=2){const c=n[r],h=n[r+1];i+=(c-l)*(h+o),l=c,o=h}return i<0?-1:1}function zg(n,t,i,r,l,o,c,h){const f=n-i*l,p=t-r*l,g=n+i*o,y=t+r*o;let b,_;c?(b=r,_=-i):(b=-r,_=i);const S=f+b,A=p+_,T=g+b,R=y+_;return h.push(S,A),h.push(T,R),2}function tn(n,t,i,r,l,o,c,h){const f=i-n,p=r-t;let g=Math.atan2(f,p),y=Math.atan2(l-n,o-t);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let b=g;const _=y-g,S=Math.abs(_),A=Math.sqrt(f*f+p*p),T=(15*S*Math.sqrt(A)/Math.PI>>0)+1,R=_/T;if(b+=R,h){c.push(n,t),c.push(i,r);for(let M=1,k=b;M<T;M++,k+=R)c.push(n,t),c.push(n+Math.sin(k)*A,t+Math.cos(k)*A);c.push(n,t),c.push(l,o)}else{c.push(i,r),c.push(n,t);for(let M=1,k=b;M<T;M++,k+=R)c.push(n+Math.sin(k)*A,t+Math.cos(k)*A),c.push(n,t);c.push(l,o),c.push(n,t)}return T*2}function JS(n,t,i,r,l,o){const c=Bv;if(n.length===0)return;const h=t;let f=h.alignment;if(t.alignment!==.5){let B=ZS(n);f=(f-.5)*B+.5}const p=new Re(n[0],n[1]),g=new Re(n[n.length-2],n[n.length-1]),y=r,b=Math.abs(p.x-g.x)<c&&Math.abs(p.y-g.y)<c;if(y){n=n.slice(),b&&(n.pop(),n.pop(),g.set(n[n.length-2],n[n.length-1]));const B=(p.x+g.x)*.5,Y=(g.y+p.y)*.5;n.unshift(B,Y),n.push(B,Y)}const _=l,S=n.length/2;let A=n.length;const T=_.length/2,R=h.width/2,M=R*R,k=h.miterLimit*h.miterLimit;let H=n[0],X=n[1],P=n[2],L=n[3],st=0,lt=0,nt=-(X-L),rt=H-P,yt=0,xt=0,Dt=Math.sqrt(nt*nt+rt*rt);nt/=Dt,rt/=Dt,nt*=R,rt*=R;const Kt=f,x=(1-Kt)*2,C=Kt*2;y||(h.cap==="round"?A+=tn(H-nt*(x-C)*.5,X-rt*(x-C)*.5,H-nt*x,X-rt*x,H+nt*C,X+rt*C,_,!0)+2:h.cap==="square"&&(A+=zg(H,X,nt,rt,x,C,!0,_))),_.push(H-nt*x,X-rt*x),_.push(H+nt*C,X+rt*C);for(let B=1;B<S-1;++B){H=n[(B-1)*2],X=n[(B-1)*2+1],P=n[B*2],L=n[B*2+1],st=n[(B+1)*2],lt=n[(B+1)*2+1],nt=-(X-L),rt=H-P,Dt=Math.sqrt(nt*nt+rt*rt),nt/=Dt,rt/=Dt,nt*=R,rt*=R,yt=-(L-lt),xt=P-st,Dt=Math.sqrt(yt*yt+xt*xt),yt/=Dt,xt/=Dt,yt*=R,xt*=R;const Y=P-H,E=X-L,D=P-st,$=lt-L,Q=Y*D+E*$,J=E*D-$*Y,et=J<0;if(Math.abs(J)<.001*Math.abs(Q)){_.push(P-nt*x,L-rt*x),_.push(P+nt*C,L+rt*C),Q>=0&&(h.join==="round"?A+=tn(P,L,P-nt*x,L-rt*x,P-yt*x,L-xt*x,_,!1)+4:A+=2,_.push(P-yt*C,L-xt*C),_.push(P+yt*x,L+xt*x));continue}const tt=(-nt+H)*(-rt+L)-(-nt+P)*(-rt+X),ut=(-yt+st)*(-xt+L)-(-yt+P)*(-xt+lt),pt=(Y*ut-D*tt)/J,wt=($*tt-E*ut)/J,Ne=(pt-P)*(pt-P)+(wt-L)*(wt-L),_e=P+(pt-P)*x,He=L+(wt-L)*x,me=P-(pt-P)*C,vt=L-(wt-L)*C,Et=Math.min(Y*Y+E*E,D*D+$*$),Ba=et?x:C,Pa=Et+Ba*Ba*M;Ne<=Pa?h.join==="bevel"||Ne/M>k?(et?(_.push(_e,He),_.push(P+nt*C,L+rt*C),_.push(_e,He),_.push(P+yt*C,L+xt*C)):(_.push(P-nt*x,L-rt*x),_.push(me,vt),_.push(P-yt*x,L-xt*x),_.push(me,vt)),A+=2):h.join==="round"?et?(_.push(_e,He),_.push(P+nt*C,L+rt*C),A+=tn(P,L,P+nt*C,L+rt*C,P+yt*C,L+xt*C,_,!0)+4,_.push(_e,He),_.push(P+yt*C,L+xt*C)):(_.push(P-nt*x,L-rt*x),_.push(me,vt),A+=tn(P,L,P-nt*x,L-rt*x,P-yt*x,L-xt*x,_,!1)+4,_.push(P-yt*x,L-xt*x),_.push(me,vt)):(_.push(_e,He),_.push(me,vt)):(_.push(P-nt*x,L-rt*x),_.push(P+nt*C,L+rt*C),h.join==="round"?et?A+=tn(P,L,P+nt*C,L+rt*C,P+yt*C,L+xt*C,_,!0)+2:A+=tn(P,L,P-nt*x,L-rt*x,P-yt*x,L-xt*x,_,!1)+2:h.join==="miter"&&Ne/M<=k&&(et?(_.push(me,vt),_.push(me,vt)):(_.push(_e,He),_.push(_e,He)),A+=2),_.push(P-yt*x,L-xt*x),_.push(P+yt*C,L+xt*C),A+=2)}H=n[(S-2)*2],X=n[(S-2)*2+1],P=n[(S-1)*2],L=n[(S-1)*2+1],nt=-(X-L),rt=H-P,Dt=Math.sqrt(nt*nt+rt*rt),nt/=Dt,rt/=Dt,nt*=R,rt*=R,_.push(P-nt*x,L-rt*x),_.push(P+nt*C,L+rt*C),y||(h.cap==="round"?A+=tn(P-nt*(x-C)*.5,L-rt*(x-C)*.5,P-nt*x,L-rt*x,P+nt*C,L+rt*C,_,!1)+2:h.cap==="square"&&(A+=zg(P,L,nt,rt,x,C,!1,_)));const O=Ug*Ug;for(let B=T;B<A+T-2;++B)H=_[B*2],X=_[B*2+1],P=_[(B+1)*2],L=_[(B+1)*2+1],st=_[(B+2)*2],lt=_[(B+2)*2+1],!(Math.abs(H*(L-lt)+P*(lt-X)+st*(X-L))<O)&&o.push(B,B+1,B+2)}function tT(n,t,i,r){const l=Bv;if(n.length===0)return;const o=n[0],c=n[1],h=n[n.length-2],f=n[n.length-1],p=t||Math.abs(o-h)<l&&Math.abs(c-f)<l,g=i,y=n.length/2,b=g.length/2;for(let _=0;_<y;_++)g.push(n[_*2]),g.push(n[_*2+1]);for(let _=0;_<y-1;_++)r.push(b+_,b+_+1);p&&r.push(b+y-1,b)}function Pv(n,t,i,r,l,o,c){const h=$1(n,t,2);if(!h)return;for(let p=0;p<h.length;p+=3)o[c++]=h[p]+l,o[c++]=h[p+1]+l,o[c++]=h[p+2]+l;let f=l*r;for(let p=0;p<n.length;p+=2)i[f]=n[p],i[f+1]=n[p+1],f+=r}const eT=[],iT={extension:{type:Pt.ShapeBuilder,name:"polygon"},build(n,t){for(let i=0;i<n.points.length;i++)t[i]=n.points[i];return t},triangulate(n,t,i,r,l,o){Pv(n,eT,t,i,r,l,o)}},sT={extension:{type:Pt.ShapeBuilder,name:"rectangle"},build(n,t){const i=n,r=i.x,l=i.y,o=i.width,c=i.height;return o>=0&&c>=0&&(t[0]=r,t[1]=l,t[2]=r+o,t[3]=l,t[4]=r+o,t[5]=l+c,t[6]=r,t[7]=l+c),t},triangulate(n,t,i,r,l,o){let c=0;r*=i,t[r+c]=n[0],t[r+c+1]=n[1],c+=i,t[r+c]=n[2],t[r+c+1]=n[3],c+=i,t[r+c]=n[6],t[r+c+1]=n[7],c+=i,t[r+c]=n[4],t[r+c+1]=n[5],c+=i;const h=r/i;l[o++]=h,l[o++]=h+1,l[o++]=h+2,l[o++]=h+1,l[o++]=h+3,l[o++]=h+2}},nT={extension:{type:Pt.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,t},triangulate(n,t,i,r,l,o){let c=0;r*=i,t[r+c]=n[0],t[r+c+1]=n[1],c+=i,t[r+c]=n[2],t[r+c+1]=n[3],c+=i,t[r+c]=n[4],t[r+c+1]=n[5];const h=r/i;l[o++]=h,l[o++]=h+1,l[o++]=h+2}},ko={};Di.handleByMap(Pt.ShapeBuilder,ko);Di.add(sT,iT,nT,Ma,WS,QS);const rT=new Ce;function aT(n,t){const{geometryData:i,batches:r}=t;r.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let l=0;l<n.instructions.length;l++){const o=n.instructions[l];if(o.action==="texture")lT(o.data,r,i);else if(o.action==="fill"||o.action==="stroke"){const c=o.action==="stroke",h=o.data.path.shapePath,f=o.data.style,p=o.data.hole;c&&p&&Bg(p.shapePath,f,null,!0,r,i),Bg(h,f,p,c,r,i)}}}function lT(n,t,i){const{vertices:r,uvs:l,indices:o}=i,c=o.length,h=r.length/2,f=[],p=ko.rectangle,g=rT,y=n.image;g.x=n.dx,g.y=n.dy,g.width=n.dw,g.height=n.dh;const b=n.transform;p.build(g,f),b&&Uv(f,b),p.triangulate(f,r,2,h,o,c);const _=y.uvs;l.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);const S=ss.get(zv);S.indexOffset=c,S.indexSize=o.length-c,S.attributeOffset=h,S.attributeSize=r.length/2-h,S.baseColor=n.style,S.alpha=n.alpha,S.texture=y,S.geometryData=i,t.push(S)}function Bg(n,t,i,r,l,o){const{vertices:c,uvs:h,indices:f}=o,p=n.shapePrimitives.length-1;n.shapePrimitives.forEach(({shape:g,transform:y},b)=>{const _=f.length,S=c.length/2,A=[],T=ko[g.type];let R="triangle-list";if(T.build(g,A),y&&Uv(A,y),r){const X=g.closePath??!0,P=t;P.pixelLine?(tT(A,X,c,f),R="line-list"):JS(A,P,!1,X,c,f)}else if(i&&p===b){p!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const X=[],P=A.slice();oT(i.shapePath).forEach(st=>{X.push(P.length/2),P.push(...st)}),Pv(P,X,c,2,S,f,_)}else T.triangulate(A,c,2,S,f,_);const M=h.length/2,k=t.texture;if(k!==It.WHITE){const X=t.matrix;X&&(y&&X.append(y.clone().invert()),FS(c,2,S,h,M,2,c.length/2-S,X))}else XS(h,M,2,c.length/2-S);const H=ss.get(zv);H.indexOffset=_,H.indexSize=f.length-_,H.attributeOffset=S,H.attributeSize=c.length/2-S,H.baseColor=t.color,H.alpha=t.alpha,H.texture=k,H.geometryData=o,H.topology=R,l.push(H)})}function oT(n){if(!n)return[];const t=n.shapePrimitives,i=[];for(let r=0;r<t.length;r++){const l=t[r].shape,o=[];ko[l.type].build(l,o),i.push(o)}return i}class uT{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class cT{constructor(){this.batcher=new VS,this.instructions=new Fy}init(){this.instructions.reset()}get geometry(){return ee(Cw,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Ed=class td{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){td.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??td.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let i=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){i?this._cleanGraphicsContextData(t):i=this._initContext(t),aT(t,i);const r=t.batchMode;t.customShader||r==="no-batch"?i.isBatchable=!1:r==="auto"&&(i.isBatchable=i.geometryData.vertices.length<400),t.dirty=!1}return i}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const i=ss.get(cT),{batches:r,geometryData:l}=this._gpuContextHash[t.uid],o=l.vertices.length,c=l.indices.length;for(let g=0;g<r.length;g++)r[g].applyTransform=!1;const h=i.batcher;h.ensureAttributeBuffer(o),h.ensureIndexBuffer(c),h.begin();for(let g=0;g<r.length;g++){const y=r[g];h.add(y)}h.finish(i.instructions);const f=h.geometry;f.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),f.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let g=0;g<p.length;g++){const y=p[g];y.bindGroup=aS(y.textures.textures,y.textures.count)}return this._graphicsDataContextHash[t.uid]=i,i}_initContext(t){const i=new uT;return i.context=t,this._gpuContextHash[t.uid]=i,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const i=this._gpuContextHash[t.uid];i.isBatchable||this._graphicsDataContextHash[t.uid]&&(ss.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),i.batches&&i.batches.forEach(r=>{ss.return(r)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};Ed.extension={type:[Pt.WebGLSystem,Pt.WebGPUSystem,Pt.CanvasSystem],name:"graphicsContext"};Ed.defaultOptions={bezierSmoothness:.5};let Lv=Ed;const hT=8,po=11920929e-14,dT=1;function Gv(n,t,i,r,l,o,c,h,f,p){const y=Math.min(.99,Math.max(0,p??Lv.defaultOptions.bezierSmoothness));let b=(dT-y)/1;return b*=b,fT(t,i,r,l,o,c,h,f,n,b),n}function fT(n,t,i,r,l,o,c,h,f,p){ed(n,t,i,r,l,o,c,h,f,p,0),f.push(c,h)}function ed(n,t,i,r,l,o,c,h,f,p,g){if(g>hT)return;const y=(n+i)/2,b=(t+r)/2,_=(i+l)/2,S=(r+o)/2,A=(l+c)/2,T=(o+h)/2,R=(y+_)/2,M=(b+S)/2,k=(_+A)/2,H=(S+T)/2,X=(R+k)/2,P=(M+H)/2;if(g>0){let L=c-n,st=h-t;const lt=Math.abs((i-c)*st-(r-h)*L),nt=Math.abs((l-c)*st-(o-h)*L);if(lt>po&&nt>po){if((lt+nt)*(lt+nt)<=p*(L*L+st*st)){f.push(X,P);return}}else if(lt>po){if(lt*lt<=p*(L*L+st*st)){f.push(X,P);return}}else if(nt>po){if(nt*nt<=p*(L*L+st*st)){f.push(X,P);return}}else if(L=X-(n+c)/2,st=P-(t+h)/2,L*L+st*st<=p){f.push(X,P);return}}ed(n,t,y,b,R,M,X,P,f,p,g+1),ed(X,P,k,H,A,T,c,h,f,p,g+1)}const mT=8,pT=11920929e-14,gT=1;function yT(n,t,i,r,l,o,c,h){const p=Math.min(.99,Math.max(0,h??Lv.defaultOptions.bezierSmoothness));let g=(gT-p)/1;return g*=g,vT(t,i,r,l,o,c,n,g),n}function vT(n,t,i,r,l,o,c,h){id(c,n,t,i,r,l,o,h,0),c.push(l,o)}function id(n,t,i,r,l,o,c,h,f){if(f>mT)return;const p=(t+r)/2,g=(i+l)/2,y=(r+o)/2,b=(l+c)/2,_=(p+y)/2,S=(g+b)/2;let A=o-t,T=c-i;const R=Math.abs((r-o)*T-(l-c)*A);if(R>pT){if(R*R<=h*(A*A+T*T)){n.push(_,S);return}}else if(A=_-(t+o)/2,T=S-(i+c)/2,A*A+T*T<=h){n.push(_,S);return}id(n,t,i,p,g,_,S,h,f+1),id(n,_,S,y,b,o,c,h,f+1)}function qv(n,t,i,r,l,o,c,h){let f=Math.abs(l-o);(!c&&l>o||c&&o>l)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(f/Math.PI)))),h=Math.max(h,3);let p=f/h,g=l;p*=c?-1:1;for(let y=0;y<h+1;y++){const b=Math.cos(g),_=Math.sin(g),S=t+b*r,A=i+_*r;n.push(S,A),g+=p}}function _T(n,t,i,r,l,o){const c=n[n.length-2],f=n[n.length-1]-i,p=c-t,g=l-i,y=r-t,b=Math.abs(f*y-p*g);if(b<1e-8||o===0){(n[n.length-2]!==t||n[n.length-1]!==i)&&n.push(t,i);return}const _=f*f+p*p,S=g*g+y*y,A=f*g+p*y,T=o*Math.sqrt(_)/b,R=o*Math.sqrt(S)/b,M=T*A/_,k=R*A/S,H=T*y+R*p,X=T*g+R*f,P=p*(R+M),L=f*(R+M),st=y*(T+k),lt=g*(T+k),nt=Math.atan2(L-X,P-H),rt=Math.atan2(lt-X,st-H);qv(n,H+t,X+i,o,nt,rt,p*g>y*f)}const Sa=Math.PI*2,Ch={centerX:0,centerY:0,ang1:0,ang2:0},Mh=({x:n,y:t},i,r,l,o,c,h,f)=>{n*=i,t*=r;const p=l*n-o*t,g=o*n+l*t;return f.x=p+c,f.y=g+h,f};function bT(n,t){const i=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=t===1.5707963267948966?.551915024494:i,l=Math.cos(n),o=Math.sin(n),c=Math.cos(n+t),h=Math.sin(n+t);return[{x:l-o*r,y:o+l*r},{x:c+h*r,y:h-c*r},{x:c,y:h}]}const Pg=(n,t,i,r)=>{const l=n*r-t*i<0?-1:1;let o=n*i+t*r;return o>1&&(o=1),o<-1&&(o=-1),l*Math.acos(o)},xT=(n,t,i,r,l,o,c,h,f,p,g,y,b)=>{const _=Math.pow(l,2),S=Math.pow(o,2),A=Math.pow(g,2),T=Math.pow(y,2);let R=_*S-_*T-S*A;R<0&&(R=0),R/=_*T+S*A,R=Math.sqrt(R)*(c===h?-1:1);const M=R*l/o*y,k=R*-o/l*g,H=p*M-f*k+(n+i)/2,X=f*M+p*k+(t+r)/2,P=(g-M)/l,L=(y-k)/o,st=(-g-M)/l,lt=(-y-k)/o,nt=Pg(1,0,P,L);let rt=Pg(P,L,st,lt);h===0&&rt>0&&(rt-=Sa),h===1&&rt<0&&(rt+=Sa),b.centerX=H,b.centerY=X,b.ang1=nt,b.ang2=rt};function wT(n,t,i,r,l,o,c,h=0,f=0,p=0){if(o===0||c===0)return;const g=Math.sin(h*Sa/360),y=Math.cos(h*Sa/360),b=y*(t-r)/2+g*(i-l)/2,_=-g*(t-r)/2+y*(i-l)/2;if(b===0&&_===0)return;o=Math.abs(o),c=Math.abs(c);const S=Math.pow(b,2)/Math.pow(o,2)+Math.pow(_,2)/Math.pow(c,2);S>1&&(o*=Math.sqrt(S),c*=Math.sqrt(S)),xT(t,i,r,l,o,c,f,p,g,y,b,_,Ch);let{ang1:A,ang2:T}=Ch;const{centerX:R,centerY:M}=Ch;let k=Math.abs(T)/(Sa/4);Math.abs(1-k)<1e-7&&(k=1);const H=Math.max(Math.ceil(k),1);T/=H;let X=n[n.length-2],P=n[n.length-1];const L={x:0,y:0};for(let st=0;st<H;st++){const lt=bT(A,T),{x:nt,y:rt}=Mh(lt[0],o,c,y,g,R,M,L),{x:yt,y:xt}=Mh(lt[1],o,c,y,g,R,M,L),{x:Dt,y:Kt}=Mh(lt[2],o,c,y,g,R,M,L);Gv(n,X,P,nt,rt,yt,xt,Dt,Kt),X=Dt,P=Kt,A+=T}}function ST(n,t,i){const r=(c,h)=>{const f=h.x-c.x,p=h.y-c.y,g=Math.sqrt(f*f+p*p),y=f/g,b=p/g;return{len:g,nx:y,ny:b}},l=(c,h)=>{c===0?n.moveTo(h.x,h.y):n.lineTo(h.x,h.y)};let o=t[t.length-1];for(let c=0;c<t.length;c++){const h=t[c%t.length],f=h.radius??i;if(f<=0){l(c,h),o=h;continue}const p=t[(c+1)%t.length],g=r(h,o),y=r(h,p);if(g.len<1e-4||y.len<1e-4){l(c,h),o=h;continue}let b=Math.asin(g.nx*y.ny-g.ny*y.nx),_=1,S=!1;g.nx*y.nx-g.ny*-y.ny<0?b<0?b=Math.PI+b:(b=Math.PI-b,_=-1,S=!0):b>0&&(_=-1,S=!0);const A=b/2;let T,R=Math.abs(Math.cos(A)*f/Math.sin(A));R>Math.min(g.len/2,y.len/2)?(R=Math.min(g.len/2,y.len/2),T=Math.abs(R*Math.sin(A)/Math.cos(A))):T=f;const M=h.x+y.nx*R+-y.ny*T*_,k=h.y+y.ny*R+y.nx*T*_,H=Math.atan2(g.ny,g.nx)+Math.PI/2*_,X=Math.atan2(y.ny,y.nx)-Math.PI/2*_;c===0&&n.moveTo(M+Math.cos(H)*T,k+Math.sin(H)*T),n.arc(M,k,T,H,X,S),o=h}}function TT(n,t,i,r){const l=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),o=(h,f,p)=>({x:h.x+(f.x-h.x)*p,y:h.y+(f.y-h.y)*p}),c=t.length;for(let h=0;h<c;h++){const f=t[(h+1)%c],p=f.radius??i;if(p<=0){h===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y);continue}const g=t[h],y=t[(h+2)%c],b=l(g,f);let _;if(b<1e-4)_=f;else{const T=Math.min(b/2,p);_=o(f,g,T/b)}const S=l(y,f);let A;if(S<1e-4)A=f;else{const T=Math.min(S/2,p);A=o(f,y,T/S)}h===0?n.moveTo(_.x,_.y):n.lineTo(_.x,_.y),n.quadraticCurveTo(f.x,f.y,A.x,A.y,r)}}const ET=new Ce;class AT{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new ji,this._graphicsPath2D=t}moveTo(t,i){return this.startPoly(t,i),this}lineTo(t,i){this._ensurePoly();const r=this._currentPoly.points,l=r[r.length-2],o=r[r.length-1];return(l!==t||o!==i)&&r.push(t,i),this}arc(t,i,r,l,o,c){this._ensurePoly(!1);const h=this._currentPoly.points;return qv(h,t,i,r,l,o,c),this}arcTo(t,i,r,l,o){this._ensurePoly();const c=this._currentPoly.points;return _T(c,t,i,r,l,o),this}arcToSvg(t,i,r,l,o,c,h){const f=this._currentPoly.points;return wT(f,this._currentPoly.lastX,this._currentPoly.lastY,c,h,t,i,r,l,o),this}bezierCurveTo(t,i,r,l,o,c,h){this._ensurePoly();const f=this._currentPoly;return Gv(this._currentPoly.points,f.lastX,f.lastY,t,i,r,l,o,c,h),this}quadraticCurveTo(t,i,r,l,o){this._ensurePoly();const c=this._currentPoly;return yT(this._currentPoly.points,c.lastX,c.lastY,t,i,r,l,o),this}closePath(){return this.endPoly(!0),this}addPath(t,i){this.endPoly(),i&&!i.isIdentity()&&(t=t.clone(!0),t.transform(i));for(let r=0;r<t.instructions.length;r++){const l=t.instructions[r];this[l.action](...l.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,i,r,l,o){return this.drawShape(new Ce(t,i,r,l),o),this}circle(t,i,r,l){return this.drawShape(new wd(t,i,r),l),this}poly(t,i,r){const l=new wa(t);return l.closePath=i,this.drawShape(l,r),this}regularPoly(t,i,r,l,o=0,c){l=Math.max(l|0,3);const h=-1*Math.PI/2+o,f=Math.PI*2/l,p=[];for(let g=0;g<l;g++){const y=h-g*f;p.push(t+r*Math.cos(y),i+r*Math.sin(y))}return this.poly(p,!0,c),this}roundPoly(t,i,r,l,o,c=0,h){if(l=Math.max(l|0,3),o<=0)return this.regularPoly(t,i,r,l,c);const f=r*Math.sin(Math.PI/l)-.001;o=Math.min(o,f);const p=-1*Math.PI/2+c,g=Math.PI*2/l,y=(l-2)*Math.PI/l/2;for(let b=0;b<l;b++){const _=b*g+p,S=t+r*Math.cos(_),A=i+r*Math.sin(_),T=_+Math.PI+y,R=_-Math.PI-y,M=S+o*Math.cos(T),k=A+o*Math.sin(T),H=S+o*Math.cos(R),X=A+o*Math.sin(R);b===0?this.moveTo(M,k):this.lineTo(M,k),this.quadraticCurveTo(S,A,H,X,h)}return this.closePath()}roundShape(t,i,r=!1,l){return t.length<3?this:(r?TT(this,t,i,l):ST(this,t,i),this.closePath())}filletRect(t,i,r,l,o){if(o===0)return this.rect(t,i,r,l);const c=Math.min(r,l)/2,h=Math.min(c,Math.max(-c,o)),f=t+r,p=i+l,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(t,i+y).arcTo(t+g,i+g,t+y,i,y).lineTo(f-y,i).arcTo(f-g,i+g,f,i+y,y).lineTo(f,p-y).arcTo(f-g,p-g,t+r-y,p,y).lineTo(t+y,p).arcTo(t+g,p-g,t,p-y,y).closePath()}chamferRect(t,i,r,l,o,c){if(o<=0)return this.rect(t,i,r,l);const h=Math.min(o,Math.min(r,l)/2),f=t+r,p=i+l,g=[t+h,i,f-h,i,f,i+h,f,p-h,f-h,p,t+h,p,t,p-h,t,i+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,c)}ellipse(t,i,r,l,o){return this.drawShape(new Sd(t,i,r,l),o),this}roundRect(t,i,r,l,o,c){return this.drawShape(new Td(t,i,r,l,o),c),this}drawShape(t,i){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:i}),this}startPoly(t,i){let r=this._currentPoly;return r&&this.endPoly(),r=new wa,r.points.push(t,i),this._currentPoly=r,this}endPoly(t=!1){const i=this._currentPoly;return i&&i.points.length>2&&(i.closePath=t,this.shapePrimitives.push({shape:i})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new wa,t)){const i=this.shapePrimitives[this.shapePrimitives.length-1];if(i){let r=i.shape.x,l=i.shape.y;if(i.transform&&!i.transform.isIdentity()){const o=i.transform,c=r;r=o.a*r+o.c*l+o.tx,l=o.b*c+o.d*l+o.ty}this._currentPoly.points.push(r,l)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let i=0;i<t.instructions.length;i++){const r=t.instructions[i];this[r.action](...r.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const i=this.shapePrimitives;for(let r=0;r<i.length;r++){const l=i[r],o=l.shape.getBounds(ET);l.transform?t.addRect(o,l.transform):t.addRect(o)}return t}}class mr{constructor(t){this.instructions=[],this.uid=fe("graphicsPath"),this._dirty=!0,typeof t=="string"?eS(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new AT(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,i){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,i]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,i,r,l,o){const c=this.instructions[this.instructions.length-1],h=this.getLastPoint(Re.shared);let f=0,p=0;if(!c||c.action!=="bezierCurveTo")f=h.x,p=h.y;else{f=c.data[2],p=c.data[3];const g=h.x,y=h.y;f=g+(g-f),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[f,p,t,i,r,l,o]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,i,r){const l=this.instructions[this.instructions.length-1],o=this.getLastPoint(Re.shared);let c=0,h=0;if(!l||l.action!=="quadraticCurveTo")c=o.x,h=o.y;else{c=l.data[0],h=l.data[1];const f=o.x,p=o.y;c=f+(f-c),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[c,h,t,i,r]}),this._dirty=!0,this}rect(t,i,r,l,o){return this.instructions.push({action:"rect",data:[t,i,r,l,o]}),this._dirty=!0,this}circle(t,i,r,l){return this.instructions.push({action:"circle",data:[t,i,r,l]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,i,r,l,o,c,h){o||(o=l/2);const f=-1*Math.PI/2+c,p=r*2,g=Math.PI*2/p,y=[];for(let b=0;b<p;b++){const _=b%2?o:l,S=b*g+f;y.push(t+_*Math.cos(S),i+_*Math.sin(S))}return this.poly(y,!0,h),this}clone(t=!1){const i=new mr;if(!t)i.instructions=this.instructions.slice();else for(let r=0;r<this.instructions.length;r++){const l=this.instructions[r];i.instructions.push({action:l.action,data:l.data.slice()})}return i}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const i=t.a,r=t.b,l=t.c,o=t.d,c=t.tx,h=t.ty;let f=0,p=0,g=0,y=0,b=0,_=0,S=0,A=0;for(let T=0;T<this.instructions.length;T++){const R=this.instructions[T],M=R.data;switch(R.action){case"moveTo":case"lineTo":f=M[0],p=M[1],M[0]=i*f+l*p+c,M[1]=r*f+o*p+h;break;case"bezierCurveTo":g=M[0],y=M[1],b=M[2],_=M[3],f=M[4],p=M[5],M[0]=i*g+l*y+c,M[1]=r*g+o*y+h,M[2]=i*b+l*_+c,M[3]=r*b+o*_+h,M[4]=i*f+l*p+c,M[5]=r*f+o*p+h;break;case"quadraticCurveTo":g=M[0],y=M[1],f=M[2],p=M[3],M[0]=i*g+l*y+c,M[1]=r*g+o*y+h,M[2]=i*f+l*p+c,M[3]=r*f+o*p+h;break;case"arcToSvg":f=M[5],p=M[6],S=M[0],A=M[1],M[0]=i*S+l*A,M[1]=r*S+o*A,M[5]=i*f+l*p+c,M[6]=r*f+o*p+h;break;case"circle":M[4]=fa(M[3],t);break;case"rect":M[4]=fa(M[4],t);break;case"ellipse":M[8]=fa(M[8],t);break;case"roundRect":M[5]=fa(M[5],t);break;case"addPath":M[0].transform(t);break;case"poly":M[2]=fa(M[2],t);break;default:Ni("unknown transform action",R.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let i=this.instructions.length-1,r=this.instructions[i];if(!r)return t.x=0,t.y=0,t;for(;r.action==="closePath";){if(i--,i<0)return t.x=0,t.y=0,t;r=this.instructions[i]}switch(r.action){case"moveTo":case"lineTo":t.x=r.data[0],t.y=r.data[1];break;case"quadraticCurveTo":t.x=r.data[2],t.y=r.data[3];break;case"bezierCurveTo":t.x=r.data[4],t.y=r.data[5];break;case"arc":case"arcToSvg":t.x=r.data[5],t.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(t);break}return t}}function fa(n,t){return n?n.prepend(t):t.clone()}function CT(n,t){if(typeof n=="string"){const r=document.createElement("div");r.innerHTML=n.trim(),n=r.querySelector("svg")}const i={context:t,path:new mr};return Hv(n,i,null,null),t}function Hv(n,t,i,r){const l=n.children,{fillStyle:o,strokeStyle:c}=MT(n);o&&i?i={...i,...o}:o&&(i=o),c&&r?r={...r,...c}:c&&(r=c),t.context.fillStyle=i,t.context.strokeStyle=r;let h,f,p,g,y,b,_,S,A,T,R,M,k,H,X,P,L;switch(n.nodeName.toLowerCase()){case"path":H=n.getAttribute("d"),X=new mr(H),t.context.path(X),i&&t.context.fill(),r&&t.context.stroke();break;case"circle":_=ye(n,"cx",0),S=ye(n,"cy",0),A=ye(n,"r",0),t.context.ellipse(_,S,A,A),i&&t.context.fill(),r&&t.context.stroke();break;case"rect":h=ye(n,"x",0),f=ye(n,"y",0),P=ye(n,"width",0),L=ye(n,"height",0),T=ye(n,"rx",0),R=ye(n,"ry",0),T||R?t.context.roundRect(h,f,P,L,T||R):t.context.rect(h,f,P,L),i&&t.context.fill(),r&&t.context.stroke();break;case"ellipse":_=ye(n,"cx",0),S=ye(n,"cy",0),T=ye(n,"rx",0),R=ye(n,"ry",0),t.context.beginPath(),t.context.ellipse(_,S,T,R),i&&t.context.fill(),r&&t.context.stroke();break;case"line":p=ye(n,"x1",0),g=ye(n,"y1",0),y=ye(n,"x2",0),b=ye(n,"y2",0),t.context.beginPath(),t.context.moveTo(p,g),t.context.lineTo(y,b),r&&t.context.stroke();break;case"polygon":k=n.getAttribute("points"),M=k.match(/\d+/g).map(st=>parseInt(st,10)),t.context.poly(M,!0),i&&t.context.fill(),r&&t.context.stroke();break;case"polyline":k=n.getAttribute("points"),M=k.match(/\d+/g).map(st=>parseInt(st,10)),t.context.poly(M,!1),r&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}for(let st=0;st<l.length;st++)Hv(l[st],t,i,r)}function ye(n,t,i){const r=n.getAttribute(t);return r?Number(r):i}function MT(n){const t=n.getAttribute("style"),i={},r={};let l=!1,o=!1;if(t){const c=t.split(";");for(let h=0;h<c.length;h++){const f=c[h],[p,g]=f.split(":");switch(p){case"stroke":g!=="none"&&(i.color=ni.shared.setValue(g).toNumber(),o=!0);break;case"stroke-width":i.width=Number(g);break;case"fill":g!=="none"&&(l=!0,r.color=ni.shared.setValue(g).toNumber());break;case"fill-opacity":r.alpha=Number(g);break;case"stroke-opacity":i.alpha=Number(g);break;case"opacity":r.alpha=Number(g),i.alpha=Number(g);break}}}else{const c=n.getAttribute("stroke");c&&c!=="none"&&(o=!0,i.color=ni.shared.setValue(c).toNumber(),i.width=ye(n,"stroke-width",1));const h=n.getAttribute("fill");h&&h!=="none"&&(l=!0,r.color=ni.shared.setValue(h).toNumber())}return{strokeStyle:o?i:null,fillStyle:l?r:null}}function RT(n){return ni.isColorLike(n)}function Lg(n){return n instanceof Q1}function Gg(n){return n instanceof W1}function OT(n,t,i){const r=ni.shared.setValue(t??0);return n.color=r.toNumber(),n.alpha=r.alpha===1?i.alpha:r.alpha,n.texture=It.WHITE,{...i,...n}}function qg(n,t,i){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...i,...n}}function Hg(n,t,i){return t.buildLinearGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...i,...n}}function kT(n,t){var l;const i={...t,...n};if(i.texture){if(i.texture!==It.WHITE){const c=((l=i.matrix)==null?void 0:l.clone().invert())||new Ut;c.translate(i.texture.frame.x,i.texture.frame.y),c.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=c}const o=i.texture.source.style;o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update())}const r=ni.shared.setValue(i.color);return i.alpha*=r.alpha,i.color=r.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}function _a(n,t){if(n==null)return null;const i={},r=n;return RT(n)?OT(i,n,t):Lg(n)?qg(i,n,t):Gg(n)?Hg(i,n,t):r.fill&&Lg(r.fill)?qg(r,r.fill,t):r.fill&&Gg(r.fill)?Hg(r,r.fill,t):kT(r,t)}function $g(n,t){const{width:i,alignment:r,miterLimit:l,cap:o,join:c,pixelLine:h,...f}=t,p=_a(n,f);return p?{width:i,alignment:r,miterLimit:l,cap:o,join:c,pixelLine:h,...p}:null}const NT=new Re,Ig=new Ut,Ad=class Oi extends ns{constructor(){super(...arguments),this.uid=fe("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new mr,this._transform=new Ut,this._fillStyle={...Oi.defaultFillStyle},this._strokeStyle={...Oi.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new ji,this._boundsDirty=!0}clone(){const t=new Oi;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=_a(t,Oi.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=$g(t,Oi.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=_a(t,Oi.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=_a(t,Oi.defaultStrokeStyle),this}texture(t,i,r,l,o,c){return this.instructions.push({action:"texture",data:{image:t,dx:r||0,dy:l||0,dw:o||t.frame.width,dh:c||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:i?ni.shared.setValue(i).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new mr,this}fill(t,i){let r;const l=this.instructions[this.instructions.length-1];return this._tick===0&&l&&l.action==="stroke"?r=l.data.path:r=this._activePath.clone(),r?(t!=null&&(i!==void 0&&typeof t=="number"&&(ee(de,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:i}),this._fillStyle=_a(t,Oi.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:i}=this._activePath.getLastPoint(Re.shared);this._activePath.clear(),this._activePath.moveTo(t,i)}stroke(t){let i;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="fill"?i=r.data.path:i=this._activePath.clone(),i?(t!=null&&(this._strokeStyle=$g(t,Oi.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const i=this.instructions[this.instructions.length-1-t],r=this._activePath.clone();if(i&&(i.action==="stroke"||i.action==="fill"))if(i.data.hole)i.data.hole.addPath(r);else{i.data.hole=r;break}}return this._initNextPathLocation(),this}arc(t,i,r,l,o,c){this._tick++;const h=this._transform;return this._activePath.arc(h.a*t+h.c*i+h.tx,h.b*t+h.d*i+h.ty,r,l,o,c),this}arcTo(t,i,r,l,o){this._tick++;const c=this._transform;return this._activePath.arcTo(c.a*t+c.c*i+c.tx,c.b*t+c.d*i+c.ty,c.a*r+c.c*l+c.tx,c.b*r+c.d*l+c.ty,o),this}arcToSvg(t,i,r,l,o,c,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(t,i,r,l,o,f.a*c+f.c*h+f.tx,f.b*c+f.d*h+f.ty),this}bezierCurveTo(t,i,r,l,o,c,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*t+f.c*i+f.tx,f.b*t+f.d*i+f.ty,f.a*r+f.c*l+f.tx,f.b*r+f.d*l+f.ty,f.a*o+f.c*c+f.tx,f.b*o+f.d*c+f.ty,h),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,i,r,l){return this._tick++,this._activePath.ellipse(t,i,r,l,this._transform.clone()),this}circle(t,i,r){return this._tick++,this._activePath.circle(t,i,r,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,i){this._tick++;const r=this._transform;return this._activePath.lineTo(r.a*t+r.c*i+r.tx,r.b*t+r.d*i+r.ty),this}moveTo(t,i){this._tick++;const r=this._transform,l=this._activePath.instructions,o=r.a*t+r.c*i+r.tx,c=r.b*t+r.d*i+r.ty;return l.length===1&&l[0].action==="moveTo"?(l[0].data[0]=o,l[0].data[1]=c,this):(this._activePath.moveTo(o,c),this)}quadraticCurveTo(t,i,r,l,o){this._tick++;const c=this._transform;return this._activePath.quadraticCurveTo(c.a*t+c.c*i+c.tx,c.b*t+c.d*i+c.ty,c.a*r+c.c*l+c.tx,c.b*r+c.d*l+c.ty,o),this}rect(t,i,r,l){return this._tick++,this._activePath.rect(t,i,r,l,this._transform.clone()),this}roundRect(t,i,r,l,o){return this._tick++,this._activePath.roundRect(t,i,r,l,o,this._transform.clone()),this}poly(t,i){return this._tick++,this._activePath.poly(t,i,this._transform.clone()),this}regularPoly(t,i,r,l,o=0,c){return this._tick++,this._activePath.regularPoly(t,i,r,l,o,c),this}roundPoly(t,i,r,l,o,c){return this._tick++,this._activePath.roundPoly(t,i,r,l,o,c),this}roundShape(t,i,r,l){return this._tick++,this._activePath.roundShape(t,i,r,l),this}filletRect(t,i,r,l,o){return this._tick++,this._activePath.filletRect(t,i,r,l,o),this}chamferRect(t,i,r,l,o,c){return this._tick++,this._activePath.chamferRect(t,i,r,l,o,c),this}star(t,i,r,l,o=0,c=0){return this._tick++,this._activePath.star(t,i,r,l,o,c,this._transform.clone()),this}svg(t){return this._tick++,CT(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,i=t){return this._transform.scale(t,i),this}setTransform(t,i,r,l,o,c){return t instanceof Ut?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,i,r,l,o,c),this)}transform(t,i,r,l,o,c){return t instanceof Ut?(this._transform.append(t),this):(Ig.set(t,i,r,l,o,c),this._transform.append(Ig),this)}translate(t,i=t){return this._transform.translate(t,i),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let i=0;i<this.instructions.length;i++){const r=this.instructions[i],l=r.action;if(l==="fill"){const o=r.data;t.addBounds(o.path.bounds)}else if(l==="texture"){const o=r.data;t.addFrame(o.dx,o.dy,o.dx+o.dw,o.dy+o.dh,o.transform)}if(l==="stroke"){const o=r.data,c=o.style.alignment,h=o.style.width*(1-c),f=o.path.bounds;t.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return t}containsPoint(t){var l;if(!this.bounds.containsPoint(t.x,t.y))return!1;const i=this.instructions;let r=!1;for(let o=0;o<i.length;o++){const c=i[o],h=c.data,f=h.path;if(!c.action||!f)continue;const p=h.style,g=f.shapePath.shapePrimitives;for(let y=0;y<g.length;y++){const b=g[y].shape;if(!p||!b)continue;const _=g[y].transform,S=_?_.applyInverse(t,NT):t;if(c.action==="fill")r=b.contains(S.x,S.y);else{const T=p;r=b.strokeContains(S.x,S.y,T.width,T.alignment)}const A=h.hole;if(A){const T=(l=A.shapePath)==null?void 0:l.shapePrimitives;if(T)for(let R=0;R<T.length;R++)T[R].shape.contains(S.x,S.y)&&(r=!1)}if(r)return!0}}return r}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(r),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(r)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Ad.defaultFillStyle={color:16777215,alpha:1,texture:It.WHITE,matrix:null,fill:null};Ad.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:It.WHITE,matrix:null,fill:null,pixelLine:!1};let ma=Ad;class ki extends Xy{constructor(t){t instanceof ma&&(t={context:t});const{context:i,roundPixels:r,...l}=t||{};super({label:"Graphics",...l}),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new ma,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=r??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,i){return this.context[t](...i),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new ki(this._context.clone()):(this._ownedContext=null,new ki(this._context))}lineStyle(t,i,r){ee(de,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const l={};return t&&(l.width=t),i&&(l.color=i),r&&(l.alpha=r),this.context.strokeStyle=l,this}beginFill(t,i){ee(de,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const r={};return t!==void 0&&(r.color=t),i!==void 0&&(r.alpha=i),this.context.fillStyle=r,this}endFill(){ee(de,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==ma.defaultStrokeStyle.width||t.color!==ma.defaultStrokeStyle.color||t.alpha!==ma.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return ee(de,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return ee(de,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return ee(de,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return ee(de,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return ee(de,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return ee(de,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}Di.add(yw,vw);const it={R:0,G1:49,C2:65.41,F2:87.31,G2:98,A2:110,C3:130.81,G3:196,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,B4:493.88,C5:523.25,D5:587.33,E5:659.25,F5:698.46,G5:783.99,A5:880},Mi=.25,Ft=.5,Rt=1,jT=2;class DT{constructor(t,i){this.ctx=null,this.isPlaying=!1,this.musicEnabled=!0,this.sfxEnabled=!0,this.bpm=135,this.beatDur=60/135,this.lookahead=.1,this.noiseBuffer=null,this.nextNoteTime=0,this.cursors={lead:0,bass:0,harmony:0,drum:0},this.trackTimes={lead:0,bass:0,harmony:0,drum:0},this.currentSection="intro",this.targetSection="loop",this.musicEnabled=t,this.sfxEnabled=i,this.intro={lead:[],bass:[],harmony:[],drum:[]},this.loop={lead:[],bass:[],harmony:[],drum:[]},this.frenzy={lead:[],bass:[],harmony:[],drum:[]},this.composeSong(),this.init()}composeSong(){this.intro.bass=[...this.createBassRun(it.C3,4),...this.createBassRun(it.G2,4),...this.createBassRun(it.A2,4),...this.createBassRun(it.G2,4)],this.intro.lead=[{freq:it.C4,duration:Rt},{freq:it.E4,duration:Rt},{freq:it.G4,duration:Rt},{freq:it.C5,duration:Rt},{freq:it.D5,duration:Rt},{freq:it.B4,duration:Rt},{freq:it.G4,duration:Rt},{freq:it.D4,duration:Rt},{freq:it.C4,duration:Rt},{freq:it.E4,duration:Rt},{freq:it.A4,duration:Rt},{freq:it.C5,duration:Rt},{freq:it.B4,duration:Ft},{freq:it.A4,duration:Ft},{freq:it.G4,duration:Ft},{freq:it.F4,duration:Ft},{freq:it.E4,duration:Ft},{freq:it.D4,duration:Ft},{freq:it.C4,duration:Rt}],this.intro.drum=this.createDrumBeat(16,"build"),this.intro.harmony=this.createRestTrack(16);const t=[...this.createBassRun(it.C3,4),...this.createBassRun(it.G2,4),...this.createBassRun(it.A2,4),...this.createBassRun(it.F2,4)],i=[...t,...t,...t];i.push(...this.createBassRun(it.C3,4),...this.createBassRun(it.G2,4),...this.createBassRun(it.A2,4),...this.createBassRun(it.G2,4)),this.loop.bass=i;const r=[{freq:it.E5,duration:Ft+Mi},{freq:it.R,duration:Mi},{freq:it.C5,duration:Rt},{freq:it.G4,duration:Ft},{freq:it.E4,duration:Ft},{freq:it.D4,duration:Ft},{freq:it.E4,duration:Ft},{freq:it.D4,duration:Rt},{freq:it.G3,duration:jT}],l=[{freq:it.C5,duration:Ft},{freq:it.B4,duration:Ft},{freq:it.A4,duration:Rt},{freq:it.G4,duration:Rt},{freq:it.E4,duration:Rt},{freq:it.F4,duration:Ft},{freq:it.G4,duration:Ft},{freq:it.A4,duration:Rt},{freq:it.C5,duration:Rt},{freq:it.D5,duration:Rt}],o=[...r,...l],c=[{freq:it.E5,duration:Rt},{freq:it.G5,duration:Rt},{freq:it.E5,duration:Rt},{freq:it.C5,duration:Rt},{freq:it.D5,duration:Ft},{freq:it.C5,duration:Ft},{freq:it.B4,duration:Rt},{freq:it.A4,duration:Rt},{freq:it.G4,duration:Rt},{freq:it.A4,duration:Rt},{freq:it.C5,duration:Rt},{freq:it.E5,duration:Rt},{freq:it.A5,duration:Rt},{freq:it.G5,duration:Rt},{freq:it.F5,duration:Ft},{freq:it.E5,duration:Ft},{freq:it.D5,duration:Rt},{freq:it.G4,duration:Rt}];this.loop.lead=[...o,...o,...c,...c],this.loop.drum=[...this.createDrumBeat(32,"verse"),...this.createDrumBeat(32,"chorus")],this.loop.harmony=this.loop.lead.map(y=>({freq:y.freq>0?y.freq*.75:0,duration:y.duration}));const h=[{freq:it.C4,duration:Mi},{freq:it.E4,duration:Mi},{freq:it.G4,duration:Mi},{freq:it.C5,duration:Mi},{freq:it.E5,duration:Mi},{freq:it.G5,duration:Mi},{freq:it.E5,duration:Mi},{freq:it.C5,duration:Mi}],f=h.map(y=>({...y,freq:y.freq*1.5})),p=[];for(let y=0;y<8;y++)p.push(...h);for(let y=0;y<8;y++)p.push(...f);const g=[];for(let y=0;y<16;y++)g.push({freq:it.C3,duration:Ft},{freq:it.C2,duration:Ft});for(let y=0;y<16;y++)g.push({freq:it.G2,duration:Ft},{freq:it.G1,duration:Ft});this.frenzy.lead=[...p,...p],this.frenzy.bass=[...g,...g],this.frenzy.harmony=this.frenzy.lead.map(y=>({freq:y.freq*.5,duration:y.duration})),this.frenzy.drum=this.createDrumBeat(this.calculateTotalBeats(this.frenzy.lead),"frenzy")}setFrenzy(t){t?this.currentSection!=="frenzy"&&(this.targetSection="frenzy"):this.currentSection==="frenzy"&&(this.targetSection="loop")}playMergeSound(t){if(!this.sfxEnabled||!this.ctx)return;const r=800-Math.min(10,t)/10*600,l=r+100,o=this.ctx.createOscillator(),c=this.ctx.createGain();o.type="sine";const h=this.ctx.currentTime;o.frequency.setValueAtTime(r,h),o.frequency.exponentialRampToValueAtTime(l,h+.1),o.connect(c),c.connect(this.ctx.destination),c.gain.setValueAtTime(0,h),c.gain.linearRampToValueAtTime(.5,h+.01),c.gain.exponentialRampToValueAtTime(.01,h+.15),o.start(h),o.stop(h+.15)}createBassRun(t,i){const r=[];for(let l=0;l<i;l++)r.push({freq:t,duration:Ft}),r.push({freq:t,duration:Ft});return r}createDrumBeat(t,i){const r=[],l={freq:0,duration:.25,type:"kick"},o={freq:0,duration:.25,type:"snare"},c={freq:0,duration:.25,type:"hihat"},h={freq:0,duration:.25};let f=t;for(;f>0;)i==="build"?r.push(l,h,l,h):i==="frenzy"?r.push(l,c,o,c):i==="verse"?(r.push(l,h,h,h),r.push(o,h,h,h),r.push(l,h,l,h),r.push(o,h,h,h)):(r.push(l,h,l,c),r.push(o,h,h,c),r.push(l,h,l,c),r.push(o,h,l,c)),f-=4;return r}createRestTrack(t){return[{freq:0,duration:t}]}calculateTotalBeats(t){return t.reduce((i,r)=>i+r.duration,0)}setMusicEnabled(t){this.musicEnabled=t,t&&this.ctx&&this.ctx.state==="suspended"&&this.ctx.resume()}setSfxEnabled(t){this.sfxEnabled=t}init(){try{const t=window.AudioContext||window.webkitAudioContext;if(this.ctx=new t,this.ctx){const i=this.ctx.sampleRate*1;this.noiseBuffer=this.ctx.createBuffer(1,i,this.ctx.sampleRate);const r=this.noiseBuffer.getChannelData(0);for(let l=0;l<i;l++)r[l]=Math.random()*2-1}}catch{console.warn("AudioContext not supported")}}resume(){this.ctx&&this.ctx.state==="suspended"&&this.ctx.resume(),this.isPlaying=!0,this.ctx&&(this.nextNoteTime=this.ctx.currentTime+.1)}stop(){this.isPlaying=!1}update(){if(!this.ctx||!this.isPlaying)return;const t=this.ctx.currentTime;for(;this.nextNoteTime<t+this.lookahead;)this.scheduleStep(this.nextNoteTime),this.nextNoteTime+=this.beatDur/4}scheduleStep(t){let i=this.currentSection==="intro"?this.intro:this.currentSection==="frenzy"?this.frenzy:this.loop;this.targetSection!=="loop"&&this.currentSection==="loop"&&this.cursors.lead%16===0?(this.currentSection="frenzy",this.resetCursors(),i=this.frenzy):this.targetSection==="loop"&&this.currentSection==="frenzy"&&this.cursors.lead%16===0&&(this.currentSection="loop",this.resetCursors(),i=this.loop),this.processTrack(i.lead,"lead","square",.04,t),this.processTrack(i.bass,"bass","triangle",.15,t),this.processTrack(i.harmony,"harmony","square",.02,t),this.processTrack(i.drum,"drum","noise",.08,t),this.cursors.lead>=i.lead.length&&(this.currentSection==="intro"?(this.currentSection="loop",this.resetCursors()):this.resetCursors())}resetCursors(){this.cursors={lead:0,bass:0,harmony:0,drum:0},this.trackTimes={lead:0,bass:0,harmony:0,drum:0}}processTrack(t,i,r,l,o){const c=this.cursors[i];if(!(c>=t.length)){if(this.trackTimes[i]<=.01){const h=t[c];h?(this.musicEnabled&&(r==="noise"&&h.type?this.playNoise(h.type,o,l):r!=="noise"&&h.freq>0&&this.playTone(h.freq,r,h.duration*this.beatDur,o,l)),this.trackTimes[i]=h.duration,this.cursors[i]++):this.trackTimes[i]=.25}this.trackTimes[i]-=.25}}playTone(t,i,r,l,o){if(!this.ctx)return;const c=this.ctx.createOscillator(),h=this.ctx.createGain();c.type=i,c.frequency.setValueAtTime(t,l),c.connect(h),h.connect(this.ctx.destination);const f=.01,p=.02;h.gain.setValueAtTime(0,l),h.gain.linearRampToValueAtTime(o,l+f),h.gain.setValueAtTime(o,l+r-p),h.gain.linearRampToValueAtTime(0,l+r),c.start(l),c.stop(l+r)}playNoise(t,i,r){if(!this.ctx||!this.noiseBuffer)return;const l=this.ctx.createBufferSource();l.buffer=this.noiseBuffer;const o=this.ctx.createGain();if(t==="kick"){const h=this.ctx.createBiquadFilter();h.type="lowpass",h.frequency.setValueAtTime(150,i),h.frequency.exponentialRampToValueAtTime(50,i+.1),l.connect(h),h.connect(o),r*=1.5}else if(t==="hihat"){const h=this.ctx.createBiquadFilter();h.type="highpass",h.frequency.setValueAtTime(3e3,i),l.connect(h),h.connect(o),r*=.6}else l.connect(o);o.connect(this.ctx.destination);const c=t==="kick"?.15:t==="hihat"?.05:.1;o.gain.setValueAtTime(r,i),o.gain.exponentialRampToValueAtTime(.01,i+c),l.start(i),l.stop(i+c)}}const Yg=600,Rh=900;class Oh{constructor(t,i,r,l){this.isStatic=!1,this.ignoreCollisions=!1,this.isCaught=!1,this.contactCount=0,this.stability=0,this.cooldownTimer=0,this.rotation=0,this.angularVelocity=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.blinkTimer=Math.random()*200,this.isBlinking=!1,this.x=t,this.y=i,this.vx=0,this.vy=0,this.radius=r.radius,this.mass=1,this.tier=r.tier,this.id=l}}class UT{constructor(t,i,r,l){this.capturedIds=[],this.tomatoId=t,this.x=i,this.y=r,this.targetTier=l,this.maxTime=3.5,this.timer=this.maxTime}}class go{constructor(t,i,r,l="circle"){this.x=t,this.y=i;const o=Math.random()*Math.PI*2,c=Math.random()*8+2;this.vx=Math.cos(o)*c,this.vy=Math.sin(o)*c,this.color=r,this.type=l,this.size=l==="star"?10+Math.random()*10:3+Math.random()*5,this.life=1,this.alpha=1}}class zT{constructor(t,i,r,l){this.fruits=[],this.nextId=0,this.width=Yg,this.height=Rh,this.scaleFactor=1,this.destroyed=!1,this.initializing=!1,this.paused=!1,this.currentFruit=null,this.nextFruitTier=Z.CHERRY,this.isAiming=!1,this.canDrop=!0,this.aimX=0,this.dragAnchorX=0,this.dragAnchorY=0,this.activeTomatoes=[],this.visualParticles=[],this.onScore=()=>{},this.onGameOver=()=>{},this.onCombo=()=>{},this.onFeverStart=()=>{},this.onFeverEnd=()=>{},this.onDanger=()=>{},this.onJuiceUpdate=()=>{},this.onNextFruit=()=>{},this.onMaxFruit=()=>{},this.onTimeUpdate=()=>{},this.score=0,this.stats={score:0,bestCombo:0,feverCount:0,tomatoUses:0,dangerSaves:0,timePlayed:0,maxTier:Z.CHERRY},this.comboChain=0,this.didMergeThisTurn=!1,this.feverActive=!1,this.feverTimer=0,this.juice=0,this.dangerTimer=0,this.dangerActive=!1,this.dangerAccumulator=0,this.DANGER_TRIGGER_DELAY=3e3,this.fruitSprites=new Map,this.textures=new Map,this.pointerHistory=[],this.canvasElement=t,this.difficulty=i,this.settings=r,Object.assign(this,l),this.container=new ne,this.effectContainer=new ne,this.effectGraphics=new ki,this.effectContainer.addChild(this.effectGraphics),this.floorGraphics=new ki,this.dangerLine=new ki,this.audio=new DT(this.settings.musicEnabled,this.settings.sfxEnabled)}setPaused(t){this.paused=t,t?this.audio.stop():this.audio.resume()}updateSettings(t){this.settings=t,this.audio.setMusicEnabled(t.musicEnabled),this.audio.setSfxEnabled(t.sfxEnabled)}async initialize(){if(this.destroyed)return;this.initializing=!0,this.app=new Tv;try{await this.app.init({canvas:this.canvasElement,backgroundAlpha:0,width:this.canvasElement.clientWidth,height:this.canvasElement.clientHeight,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,preference:"webgl",resizeTo:this.canvasElement})}catch(l){console.error("[GameEngine] PIXI Init Error:",l),this.initializing=!1;return}if(this.initializing=!1,this.destroyed){this.app&&this.app.destroy({removeView:!1});return}if(!this.app.renderer)return;const t=this.app.screen.width,i=this.app.screen.height;this.scaleFactor=Math.min(t/Yg,i/Rh),this.container.scale.set(this.scaleFactor),this.effectContainer.scale.set(this.scaleFactor);const r=Rh*this.scaleFactor;if(i>r){const l=(i-r)/2;this.container.position.y=l,this.effectContainer.position.y=l}this.app.stage.addChild(this.effectContainer),this.app.stage.addChild(this.container),this.container.addChild(this.floorGraphics),this.container.addChild(this.dangerLine),this.initTextures(),this.drawFloor(),this.spawnNextFruit(),this.app.ticker.add(this.update.bind(this)),this.app.stage.eventMode="static",this.app.screen&&(this.app.stage.hitArea=this.app.screen),this.app.stage.on("pointerdown",this.onPointerDown.bind(this)),this.app.stage.on("pointermove",this.onPointerMove.bind(this)),this.app.stage.on("pointerup",this.onPointerUp.bind(this)),this.app.stage.on("pointerupoutside",this.onPointerUp.bind(this))}reset(){this.fruitSprites.forEach(t=>{t&&t.parent&&(t.parent.removeChild(t),t.destroy({children:!0}))}),this.fruitSprites.clear(),this.fruits=[],this.activeTomatoes=[],this.visualParticles=[],this.currentFruit&&(this.currentFruit=null),this.effectGraphics.clear(),this.score=0,this.stats={score:0,bestCombo:0,feverCount:0,tomatoUses:0,dangerSaves:0,timePlayed:0,maxTier:Z.CHERRY},this.comboChain=0,this.didMergeThisTurn=!1,this.feverActive=!1,this.feverTimer=0,this.juice=0,this.dangerTimer=0,this.dangerActive=!1,this.dangerAccumulator=0,this.nextId=0,this.isAiming=!1,this.canDrop=!0,this.onScore(0,0),this.onCombo(0),this.onFeverEnd(),this.audio.setFrenzy(!1),this.onJuiceUpdate(0,ua),this.onDanger(!1,0),this.onTimeUpdate(0),this.setPaused(!1),this.spawnNextFruit(),(this.settings.musicEnabled||this.settings.sfxEnabled)&&this.audio.resume()}getFloorY(t){return this.height-60+Math.sin(t*.015)*10+Math.cos(t*.04)*5}drawFloor(){this.floorGraphics.clear();const t=this.height+200,i=5;this.floorGraphics.moveTo(0,t),this.floorGraphics.lineTo(0,this.getFloorY(0));for(let r=0;r<=this.width;r+=i)this.floorGraphics.lineTo(r,this.getFloorY(r));this.floorGraphics.lineTo(this.width,this.getFloorY(this.width)),this.floorGraphics.lineTo(this.width,t),this.floorGraphics.closePath(),this.floorGraphics.fill({color:7782467}),this.floorGraphics.stroke({width:6,color:3037724,alignment:0}),this.floorGraphics.circle(50,this.height,15),this.floorGraphics.circle(80,this.height+20,20),this.floorGraphics.fill({color:5606191,alpha:.2}),this.floorGraphics.circle(this.width-100,this.height,25),this.floorGraphics.fill({color:5606191,alpha:.2})}initTextures(){var t;(t=this.app)!=null&&t.renderer&&Object.values(Si).forEach(i=>{const r=new ne,l=i.radius,o=new ki,c=i.patternColor;switch(o.circle(0,0,l),o.fill({color:i.color}),i.tier!==Z.TOMATO&&o.stroke({width:4,color:c,alignment:0}),i.tier){case Z.CHERRY:o.circle(l*.3,-l*.3,l*.2),o.fill({color:16777215,alpha:.3});break;case Z.STRAWBERRY:for(let p=0;p<6;p++)o.circle((Math.random()-.5)*l*1.2,(Math.random()-.5)*l*1.2,2),o.fill({color:c});break;case Z.CLEMENTINE:o.ellipse(0,0,l*.9,l*.8),o.fill({color:16777215,alpha:.1});break;case Z.ORANGE:o.stroke({width:4,color:c,alpha:.5,alignment:1});break;case Z.APPLE:o.ellipse(-l*.3,-l*.3,l*.2,l*.3),o.fill({color:16777215,alpha:.2});break;case Z.PINEAPPLE:o.moveTo(-l*.7,-l*.7),o.lineTo(l*.7,l*.7),o.stroke({width:2,color:c,alpha:.5}),o.moveTo(l*.7,-l*.7),o.lineTo(-l*.7,l*.7),o.stroke({width:2,color:c,alpha:.5});break;case Z.COCONUT:o.stroke({width:4,color:c,alignment:1});break;case Z.PUMPKIN:o.ellipse(0,0,l*.5,l),o.stroke({width:2,color:c,alpha:.3});break;case Z.WATERMELON:o.arc(0,0,l*.9,0,Math.PI*2),o.stroke({width:6,color:c});break;case Z.TOMATO:o.circle(l*.3,-l*.3,l*.35),o.fill({color:16777215,alpha:.4});break}const h=new ki;i.tier===Z.APPLE?(h.moveTo(0,-l*.8),h.quadraticCurveTo(l*.2,-l*1.1,l*.4,-l*.9),h.stroke({width:3,color:3369246})):i.tier===Z.PINEAPPLE?(h.poly([-10,-l*.9,0,-l*1.2,10,-l*.9]),h.fill({color:5025616})):i.tier===Z.TOMATO&&(h.star(0,-l*.85,5,l*.35,l*.15,0),h.fill({color:3046706})),r.addChild(o),r.addChild(h);const f=this.app.renderer.generateTexture({target:r});this.textures.set(i.tier,f),r.destroy({children:!0})})}createFace(t,i){const r=new ne,l=new ki,o=new ki;l.label="eyes",o.label="mouth";const c=2232593,h=2232593,f=(b,_,S,A,T="dot")=>{T==="dot"?(b.circle(_,S,A),b.fill({color:c}),b.circle(_-A*.3,S-A*.3,A*.3),b.fill({color:16777215})):T==="happy"?(b.arc(_,S,A,Math.PI,0),b.stroke({width:A/2,color:c,cap:"round"})):T==="wink"?(b.moveTo(_-A,S),b.lineTo(_+A,S),b.stroke({width:A/2,color:c,cap:"round"})):T==="line"?(b.moveTo(_-A,S),b.lineTo(_+A,S),b.stroke({width:A/2,color:c,cap:"round"})):T==="star"?(b.poly([_,S-A,_+A*.3,S-A*.3,_+A,S,_+A*.3,S+A*.3,_,S+A,_-A*.3,S+A*.3,_-A,S,_-A*.3,S-A*.3]),b.fill({color:16766720}),b.stroke({width:1,color:c})):T==="derp"&&(b.circle(_,S,A),b.fill({color:16777215}),b.circle(_,S,A*.4),b.fill({color:c}))},p=-i*.1,g=i*.35,y=Math.max(3,i*.18);switch(t){case Z.CHERRY:f(l,-g,p,y,"dot"),f(l,g,p,y,"dot"),o.arc(0,p+y,y,.2,Math.PI-.2),o.stroke({width:2,color:h,cap:"round"});break;case Z.STRAWBERRY:f(l,-g,p,y*1.2,"happy"),f(l,g,p,y*1.2,"happy"),o.moveTo(-y,p+y*2),o.quadraticCurveTo(0,p+y*3,y,p+y*2),o.stroke({width:2,color:h,cap:"round"});break;case Z.GRAPE:f(l,-g,p,y,"dot"),f(l,g,p,y,"dot"),o.circle(0,p+y*2,y*.5),o.stroke({width:2,color:h});break;case Z.CLEMENTINE:f(l,-g,p,y,"wink"),f(l,g,p,y,"dot"),o.arc(0,p+y*1.5,y,0,Math.PI),o.fill({color:h});break;case Z.ORANGE:f(l,-g,p,y,"line"),f(l,g,p,y,"line"),o.moveTo(-y,p+y*2.5),o.lineTo(y,p+y*2.5),o.stroke({width:3,color:h,cap:"round"});break;case Z.APPLE:f(l,-g,p,y,"happy"),f(l,g,p,y,"happy"),o.arc(0,p+y*1.5,y*.8,.2,Math.PI-.2),o.stroke({width:3,color:h,cap:"round"});break;case Z.PINEAPPLE:l.rect(-g-y*1.5,p-y*.5,y*3,y*1.5),l.rect(g-y*1.5,p-y*.5,y*3,y*1.5),l.moveTo(-g,p),l.lineTo(g,p),l.fill({color:1118481}),o.arc(0,p+y*2,y,.2,Math.PI-.2),o.stroke({width:3,color:h,cap:"round"});break;case Z.COCONUT:f(l,-g,p,y,"wink"),f(l,g,p,y,"wink"),o.circle(0,p+y*2.5,y*.5),o.stroke({width:2,color:h});break;case Z.PUMPKIN:l.poly([-g,p-y,-g-y,p+y,-g+y,p+y]),l.poly([g,p-y,g-y,p+y,g+y,p+y]),l.fill({color:h}),o.poly([-y*2,p+y*2,-y,p+y*3,0,p+y*2,y,p+y*3,y*2,p+y*2]),o.stroke({width:3,color:h,join:"round"});break;case Z.WATERMELON:f(l,-g,p,y*1.8,"star"),f(l,g,p,y*1.8,"star"),o.moveTo(-y*1.5,p+y*2),o.quadraticCurveTo(0,p+y*5,y*1.5,p+y*2),o.lineTo(-y*1.5,p+y*2),o.fill({color:6684672}),o.arc(0,p+y*3.5,y*.8,0,Math.PI),o.fill({color:16737894});break;case Z.TOMATO:f(l,-g,p,y*1.5,"wink"),f(l,g,p,y*1.5,"wink"),o.moveTo(-y,p+y*2),o.quadraticCurveTo(0,p+y*3,y,p+y*2),o.stroke({width:2,color:h});break}return r.addChild(l),r.addChild(o),r}spawnNextFruit(){if(!this.canDrop)return;let t=Z.CHERRY;for(const c of this.fruits)!c.isStatic&&c.tier!==Z.TOMATO&&c.tier>t&&(t=c.tier);this.onMaxFruit(t),t>this.stats.maxTier&&(this.stats.maxTier=t);const i=Math.min(Z.COCONUT,Math.max(Z.CHERRY,t-2)),r=[];for(let c=0;c<=i;c++)r.push(c);const o=Math.random()<.015?Z.TOMATO:r[Math.floor(Math.random()*r.length)];this.nextFruitTier=o,this.onNextFruit(o),this.currentFruit=new Oh(this.width/2,this.height*sh,Si[o],this.nextId++),this.currentFruit.isStatic=!0,this.dragAnchorX=this.width/2,this.dragAnchorY=this.height*sh,this.createSprite(this.currentFruit)}forceCurrentFruit(t){if(!this.currentFruit)return;const i=this.fruitSprites.get(this.currentFruit.id);i&&(this.container.removeChild(i),i.destroy({children:!0}),this.fruitSprites.delete(this.currentFruit.id)),this.nextFruitTier=t,this.onNextFruit(t),this.currentFruit=new Oh(this.currentFruit.x,this.currentFruit.y,Si[t],this.nextId++),this.currentFruit.isStatic=!0,this.createSprite(this.currentFruit)}createSprite(t){if(!this.textures.has(t.tier))return;const i=this.textures.get(t.tier),r=new ne,l=new fr(i);l.anchor.set(.5),r.addChild(l);const o=this.createFace(t.tier,t.radius);o.label="face",r.addChild(o),this.fruitSprites.set(t.id,r),this.container.addChild(r)}getVirtualPos(t,i){if(!this.app||!this.app.stage)return{x:t/this.scaleFactor,y:i/this.scaleFactor};const r=this.container.position.y;return{x:t/this.scaleFactor,y:(i-r)/this.scaleFactor}}onPointerDown(t){if(this.paused||(this.audio.resume(),!this.currentFruit||!this.canDrop))return;this.isAiming=!0;const i=this.getVirtualPos(t.global.x,t.global.y);this.updateAim(i.x,i.y),this.pointerHistory=[]}onPointerMove(t){if(this.paused||!this.isAiming)return;const i=this.getVirtualPos(t.global.x,t.global.y);this.updateAim(i.x,i.y);const r=performance.now();this.pointerHistory.push({x:i.x,y:i.y,time:r}),this.pointerHistory.length>8&&this.pointerHistory.shift()}updateAim(t,i){const r=this.currentFruit?this.currentFruit.radius:20;this.aimX=Math.max(r,Math.min(this.width-r,t)),this.dragAnchorX=this.aimX,this.dragAnchorY=this.height*sh+(Math.min(i,this.height*.4)-this.height*.2)*.1}onPointerUp(t){if(this.paused||!this.isAiming||!this.currentFruit)return;this.isAiming=!1;let i=0,r=0;if(this.pointerHistory.length>=2){const h=this.pointerHistory[this.pointerHistory.length-1],f=this.pointerHistory[0],p=h.time-f.time;p>0&&(i=(h.x-f.x)/p*22,r=(h.y-f.y)/p*22)}const l=40,o=Math.sqrt(i*i+r*r);o>l&&(i=i/o*l,r=r/o*l),r<-15&&(r=-15),this.didMergeThisTurn||(this.comboChain=0,this.onCombo(0)),this.didMergeThisTurn=!1,this.currentFruit.isStatic=!1,this.currentFruit.vx=i,this.currentFruit.vy=r,this.currentFruit.angularVelocity=i*.05,this.fruits.push(this.currentFruit),this.currentFruit=null,this.canDrop=!1;const c=$p[this.difficulty];setTimeout(()=>{this.canDrop=!0,this.spawnNextFruit()},c.spawnDelay)}update(t){if(this.paused)return;const i=1/60;this.updateGameLogic(i*1e3),this.updatePhysics(i),this.updateVisualEffects(i),this.audio.update(),this.drawDangerLine(),this.renderSync()}spawnPassiveTomatoParticle(t,i,r){if(Math.random()<.3){const l=Math.random()*Math.PI*2,o=r*(.8+Math.random()*.3),c=t+Math.cos(l)*o,h=i+Math.sin(l)*o,f=new go(c,h,16737095,"circle");f.vx=Math.cos(l)*.3,f.vy=Math.sin(l)*.3-.2,f.life=1.2,f.size=2+Math.random()*2,f.alpha=.5,this.visualParticles.push(f)}}updateVisualEffects(t){this.effectGraphics.clear();const i=this.activeTomatoes,r=i.length>0;if(r&&this.visualParticles.filter(l=>l.type==="suck").length<300)for(const l of i)for(let o=0;o<3;o++){const c=Math.random()*Math.PI*2,h=180+Math.random()*40,f=l.x+Math.cos(c)*h,p=l.y+Math.sin(c)*h,g=new go(f,p,16729156,"suck");g.targetId=l.tomatoId,g.life=1,g.size=3+Math.random()*3,g.alpha=0,this.visualParticles.push(g)}for(const l of this.fruits)l.tier===Z.TOMATO&&(this.activeTomatoes.some(c=>c.tomatoId===l.id)||this.spawnPassiveTomatoParticle(l.x,l.y,l.radius));if(this.currentFruit&&this.currentFruit.tier===Z.TOMATO&&this.spawnPassiveTomatoParticle(this.currentFruit.x,this.currentFruit.y,this.currentFruit.radius),this.nextFruitTier===Z.TOMATO&&this.spawnPassiveTomatoParticle(this.width-55,75,45),this.feverActive&&Math.random()<.3){const l=new go(Math.random()*this.width,this.height+20,16766720,"star");l.vy=-Math.random()*2-2,l.vx=(Math.random()-.5)*1,this.visualParticles.push(l)}for(let l=this.visualParticles.length-1;l>=0;l--){const o=this.visualParticles[l];let c=null;if(o.type==="suck"&&r&&o.targetId!==void 0&&(c=i.find(h=>h.tomatoId===o.targetId)||null,!c)){this.visualParticles.splice(l,1);continue}if(c){const h=o.x-c.x,f=o.y-c.y,p=Math.sqrt(h*h+f*f),g=Math.atan2(f,h);if(p<20){this.visualParticles.splice(l,1);continue}const y=3+200/(p+10),_=g+.15,S=p-y;o.x=c.x+Math.cos(_)*S,o.y=c.y+Math.sin(_)*S,o.color=16711680,o.alpha<1&&(o.alpha+=.05),this.effectGraphics.circle(o.x,o.y,o.size),this.effectGraphics.fill({color:o.color,alpha:o.alpha})}else o.x+=o.vx,o.y+=o.vy,o.life-=.015,o.type==="circle"?(o.alpha=Math.min(.6,o.life),o.vx*=.96,o.vy*=.96):o.alpha=Math.min(1,o.life),o.type==="star"?(this.effectGraphics.star(o.x,o.y,5,o.size,o.size/2,o.life*5),this.effectGraphics.fill({color:o.color,alpha:o.alpha})):(this.effectGraphics.circle(o.x,o.y,o.size),this.effectGraphics.fill({color:o.color,alpha:o.alpha})),(o.life<=0||o.y<-50||o.y>this.height+50||o.x<-50||o.x>this.width+50)&&this.visualParticles.splice(l,1)}}createMergeEffect(t,i,r){for(let l=0;l<15;l++){const o=new go(t,i,r,Math.random()>.5?"circle":"star"),c=Math.random()*Math.PI*2,h=Math.random()*10+5;o.vx=Math.cos(c)*h,o.vy=Math.sin(c)*h,this.visualParticles.push(o)}}updateGameLogic(t){this.stats.timePlayed+=t,this.onTimeUpdate(this.stats.timePlayed);for(let l=this.activeTomatoes.length-1;l>=0;l--){const o=this.activeTomatoes[l];o.timer-=t/1e3;const c=this.fruits.find(h=>h.id===o.tomatoId);if(c){o.x=c.x,o.y=c.y;const h=1-o.timer/o.maxTime;c.scaleX=1+h*.3,c.scaleY=1+h*.3,c.alpha=1-h*.4,c.rotation+=.05}o.timer<=0&&(this.concludeTomatoEffect(o),this.activeTomatoes.splice(l,1))}for(const l of this.fruits)l.cooldownTimer>0&&(l.cooldownTimer-=t/1e3);this.feverActive?(this.feverTimer-=t,this.feverTimer<=0&&(this.feverActive=!1,this.audio.setFrenzy(!1),this.juice=0,this.onJuiceUpdate(0,ua),this.onFeverEnd())):this.juice>=ua&&!this.feverActive&&(this.feverActive=!0,this.audio.setFrenzy(!0),this.feverTimer=fw,this.stats.feverCount++,this.onFeverStart());const i=this.height*Yp;let r=!1;for(const l of this.fruits)if(!l.isStatic&&l.y-l.radius<i){r=!0;break}r?(this.dangerAccumulator+=t,this.dangerAccumulator>this.DANGER_TRIGGER_DELAY&&(this.dangerActive||(this.dangerActive=!0,this.dangerTimer=hw))):(this.dangerAccumulator=0,this.dangerActive=!1,this.onDanger(!1,0)),this.dangerActive&&(this.dangerTimer-=t,this.onDanger(!0,this.dangerTimer),this.dangerTimer<=0&&this.gameOver())}updatePhysics(t){const i=$p[this.difficulty],r=i.gravity,l=i.friction;for(const o of this.fruits)o.isCaught||(o.ignoreCollisions=!1);if(this.currentFruit&&this.isAiming){const c=this.dragAnchorX-this.currentFruit.x,h=this.dragAnchorY-this.currentFruit.y;this.currentFruit.vx+=c*.1,this.currentFruit.vy+=h*.1,this.currentFruit.vx*=.8,this.currentFruit.vy*=.8,this.currentFruit.x+=this.currentFruit.vx,this.currentFruit.y+=this.currentFruit.vy}for(const o of this.fruits)o.isStatic||(o.isCaught||(o.vy+=r,o.vx*=l,o.vy*=l),o.x+=o.vx,o.y+=o.vy,o.rotation+=o.angularVelocity,o.angularVelocity*=.95,o.blinkTimer-=1,o.blinkTimer<=0&&(o.isBlinking=!o.isBlinking,o.blinkTimer=o.isBlinking?10:200+Math.random()*300));this.updateTomatoPhysics();for(let o=0;o<cw;o++){this.updateContactCounts();for(const c of this.fruits)c.isStatic||c.isCaught||c.contactCount>1&&(c.vx*=Ip,c.vy*=Ip,c.angularVelocity*=.5);this.resolveCollisions(),this.resolveWalls()}}updateContactCounts(){for(const t of this.fruits)t.contactCount=0;for(const t of this.fruits){if(t.isStatic||t.isCaught)continue;const i=this.getFloorY(t.x);t.y+t.radius>=i-2&&t.contactCount++}for(let t=0;t<this.fruits.length;t++)for(let i=t+1;i<this.fruits.length;i++){const r=this.fruits[t],l=this.fruits[i];if(r.ignoreCollisions||l.ignoreCollisions||r.isStatic||l.isStatic)continue;const o=r.x-l.x,c=r.y-l.y,h=o*o+c*c,f=r.radius+l.radius;h<f*f&&(r.contactCount++,l.contactCount++)}for(const t of this.fruits)t.contactCount>1?t.stability=1:t.stability=0}updateTomatoPhysics(){for(const t of this.activeTomatoes){const i=this.fruits.find(r=>r.id===t.tomatoId);if(i){for(const r of this.fruits)if(!(r.id===t.tomatoId||r===this.currentFruit||r.isStatic)&&r.tier===t.targetTier){r.isCaught=!0,r.ignoreCollisions=!0,t.capturedIds.includes(r.id)||t.capturedIds.push(r.id);const l=i.x-r.x,o=i.y-r.y,c=Math.sqrt(l*l+o*o),h=Math.atan2(o,l)+Math.PI/9,f=15+1e3/(c+50);r.vx=r.vx*.85+Math.cos(h)*f*.15,r.vy=r.vy*.85+Math.sin(h)*f*.15;const p=i.radius*4;if(c<p){const g=Math.max(.1,c/p);r.scaleX=g,r.scaleY=g,r.alpha=g,r.rotation+=.3}}}}}resolveWalls(){const t=this.width;for(const i of this.fruits){if(i.isStatic||i.isCaught)continue;const r=this.getFloorY(i.x);i.y+i.radius>r&&(i.y=r-i.radius,i.vy*=-.4,i.vx*=.85),i.x-i.radius<0&&(i.x=i.radius,i.vx*=-.5),i.x+i.radius>t&&(i.x=t-i.radius,i.vx*=-.5)}}resolveCollisions(){for(let t=0;t<this.fruits.length;t++)for(let i=t+1;i<this.fruits.length;i++){const r=this.fruits[t],l=this.fruits[i];if(r.ignoreCollisions||l.ignoreCollisions||r.isStatic&&l.isStatic)continue;const o=this.activeTomatoes.find(g=>g.tomatoId===r.id||g.tomatoId===l.id);if(o&&(r.id===o.tomatoId?l:r).tier===o.targetTier)continue;const c=r.x-l.x,h=r.y-l.y,f=c*c+h*h,p=r.radius+l.radius;if(f<p*p){const g=Math.sqrt(f);if(r.tier===l.tier&&r.tier!==Z.WATERMELON&&r.tier!==Z.TOMATO&&l.tier!==Z.TOMATO&&r.cooldownTimer<=0&&l.cooldownTimer<=0){this.merge(r,l),t--;break}if(r.tier===Z.TOMATO||l.tier===Z.TOMATO){this.handleTomatoCollision(r,l);return}if(g===0)continue;const y=p-g,b=c/g,_=h/g,S=1/(r.mass*(1+r.stability*10)),A=1/(l.mass*(1+l.stability*10)),T=S+A,R=r.isStatic?0:S/T,M=l.isStatic?0:A/T;r.isStatic||(r.x+=b*y*R,r.y+=_*y*R),l.isStatic||(l.x-=b*y*M,l.y-=_*y*M);const k=r.vx-l.vx,H=r.vy-l.vy,X=k*b+H*_;if(X<0){const P=-1.4*X;r.vx+=P*b*R,r.vy+=P*_*R,l.vx-=P*b*M,l.vy-=P*_*M,r.contactCount<=1&&(r.vx*=so,r.vy*=so),l.contactCount<=1&&(l.vx*=so,l.vy*=so)}}}}merge(t,i){const r=t.tier+1,l=dw*Math.pow(2,r);this.comboChain++,this.didMergeThisTurn=!0;const o=1+Math.min(this.comboChain,10),c=this.feverActive?2:1,h=l*o*c;this.addScore(h),this.stats.bestCombo=Math.max(this.stats.bestCombo,this.comboChain),this.onCombo(this.comboChain),r>this.stats.maxTier&&(this.stats.maxTier=r),this.feverActive||(this.juice=Math.min(ua,this.juice+50),this.onJuiceUpdate(this.juice,ua)),this.removeParticle(t),this.removeParticle(i);const f=(t.x+i.x)/2,p=(t.y+i.y)/2,g=Si[r],y=new Oh(f,p,g,this.nextId++);this.fruits.push(y),this.createSprite(y),this.createMergeEffect(f,p,g.color),this.audio.playMergeSound(r),this.applyShockwave(f,p,150,5),this.settings.hapticsEnabled&&navigator.vibrate&&navigator.vibrate(20)}handleTomatoCollision(t,i){const r=t.tier===Z.TOMATO?t:i,l=t.tier===Z.TOMATO?i:t;if(l.tier===Z.TOMATO||r.cooldownTimer>0||this.activeTomatoes.find(f=>f.tomatoId===r.id))return;const c=new UT(r.id,r.x,r.y,l.tier);this.activeTomatoes.push(c),r.isStatic=!0,r.vx=0,r.vy=0,r.y=Math.max(r.radius,r.y-50);const h=this.fruitSprites.get(r.id);h&&(h.alpha=1)}concludeTomatoEffect(t){const i=this.fruits.find(o=>o.id===t.tomatoId);let r=t.x,l=t.y;i&&(r=i.x,l=i.y,this.removeParticle(i),this.stats.tomatoUses++);for(const o of t.capturedIds){const c=this.fruits.find(h=>h.id===o);if(c){c.isCaught=!1,c.ignoreCollisions=!1,c.scaleX=1,c.scaleY=1,c.alpha=1,c.cooldownTimer=.8,c.x=r+(Math.random()-.5)*5,c.y=l+(Math.random()-.5)*5;const h=Math.random()*Math.PI*2,f=5;c.vx=Math.cos(h)*f,c.vy=Math.sin(h)*f-3}}this.createMergeEffect(r,l,"#FF4444"),this.applyShockwave(r,l,600,40),this.settings.hapticsEnabled&&navigator.vibrate&&navigator.vibrate([50,50])}applyShockwave(t,i,r,l){for(const o of this.fruits){const c=o.x-t,h=o.y-i,f=Math.sqrt(c*c+h*h);if(f<r&&f>0){const p=1-f/r;o.vx+=c/f*l*p,o.vy+=h/f*l*p}}}removeParticle(t){const i=this.fruits.indexOf(t);i>=0&&this.fruits.splice(i,1);const r=this.fruitSprites.get(t.id);r&&(this.container.removeChild(r),r.destroy(),this.fruitSprites.delete(t.id))}addScore(t){this.score+=Math.floor(t),this.stats.score=this.score,this.onScore(Math.floor(t),this.score)}gameOver(){var t;this.canDrop=!1,(t=this.app)==null||t.ticker.stop(),this.audio.stop(),this.onGameOver(this.stats)}drawDangerLine(){this.dangerLine.clear();const t=this.height*Yp,i=this.width;this.dangerLine.moveTo(0,t),this.dangerLine.lineTo(i,t),this.dangerActive?this.dangerLine.stroke({width:6,color:16711680,alpha:.8+Math.sin(Date.now()*.01)*.2}):this.dangerLine.stroke({width:3,color:0,alpha:.2})}renderSync(){let t=1,i=1;if(this.feverActive){const r=Date.now(),l=Math.sin(r/250*Math.PI)*.05;t=1+l,i=1-l}if(this.currentFruit){const r=this.fruitSprites.get(this.currentFruit.id);r&&(r.x=this.currentFruit.x,r.y=this.currentFruit.y,r.rotation=this.currentFruit.rotation)}for(const r of this.fruits){const l=this.fruitSprites.get(r.id);if(l){l.x=r.x,l.y=r.y,l.rotation=r.rotation,l.alpha=r.alpha,l.scale.set(r.scaleX*t,r.scaleY*i);const o=l.getChildByLabel("face");if(o){const c=o.getChildByLabel("eyes");c&&(r.isBlinking?c.scale.y=.1:c.scale.y=1);const h=Math.min(10,Math.max(-10,r.vx)),f=Math.min(10,Math.max(-10,r.vy));o.position.set(h*.5,f*.5)}}}}cleanup(){if(this.destroyed=!0,this.audio.stop(),!this.initializing&&this.app)try{this.app.destroy({removeView:!1})}catch(t){console.warn("[GameEngine] Error destroying Pixi app",t)}}}const Vg=["data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='black'%3E%3Ccircle cx='50' cy='50' r='40' /%3E%3C/g%3E%3C/svg%3E","data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l25.98 15v30L30 60 4.02 45V15z' fill='black' /%3E%3C/svg%3E","data:image/svg+xml,%3Csvg width='100' height='20' viewBox='0 0 100 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10 Q25 20 50 10 T100 10' stroke-width='4' stroke='black' fill='none' /%3E%3C/svg%3E","data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 10 L70 70 L10 70 Z' fill='black' /%3E%3C/svg%3E"],Fg=({tier:n,size:t})=>{const i=Si[n]||Si[Z.CHERRY],r=t/2,l="#221111",o="#221111",c=r,h=r,f=-r*.1,p=r*.35,g=Math.max(2,r*.18),y=()=>{const _=i.patternColor;switch(n){case Z.CHERRY:return j.jsx("circle",{cx:c+r*.3,cy:h-r*.3,r:r*.2,fill:"white",fillOpacity:"0.3"});case Z.STRAWBERRY:return j.jsxs("g",{fill:_,children:[j.jsx("circle",{cx:c-r*.4,cy:h-r*.4,r:2}),j.jsx("circle",{cx:c+r*.5,cy:h-r*.3,r:2}),j.jsx("circle",{cx:c-r*.2,cy:h+r*.5,r:2}),j.jsx("circle",{cx:c+r*.4,cy:h+r*.4,r:2}),j.jsx("circle",{cx:c-r*.6,cy:h+r*.1,r:2})]});case Z.CLEMENTINE:return j.jsx("ellipse",{cx:c,cy:h,rx:r*.9,ry:r*.8,fill:"white",fillOpacity:"0.1"});case Z.ORANGE:return j.jsx("circle",{cx:c,cy:h,r:r-2,stroke:_,strokeWidth:"4",strokeOpacity:"0.5",fill:"none"});case Z.APPLE:return j.jsxs("g",{children:[j.jsx("ellipse",{cx:c-r*.3,cy:h-r*.3,rx:r*.2,ry:r*.3,fill:"white",fillOpacity:"0.2"}),j.jsx("path",{d:`M ${c} ${h-r*.8} Q ${c+r*.2} ${h-r*1.1} ${c+r*.4} ${h-r*.9}`,stroke:"#33691E",strokeWidth:"3",fill:"none"})]});case Z.PINEAPPLE:return j.jsxs("g",{children:[j.jsx("path",{d:`M ${c-r*.7} ${h-r*.7} L ${c+r*.7} ${h+r*.7}`,stroke:_,strokeWidth:"2",strokeOpacity:"0.5"}),j.jsx("path",{d:`M ${c+r*.7} ${h-r*.7} L ${c-r*.7} ${h+r*.7}`,stroke:_,strokeWidth:"2",strokeOpacity:"0.5"}),j.jsx("polygon",{points:`${c-5},${h-r*.9} ${c},${h-r*1.2} ${c+5},${h-r*.9}`,fill:"#4CAF50"})]});case Z.COCONUT:return j.jsx("circle",{cx:c,cy:h,r:r-2,stroke:_,strokeWidth:"4",fill:"none"});case Z.PUMPKIN:return j.jsx("ellipse",{cx:c,cy:h,rx:r*.5,ry:r,stroke:_,strokeWidth:"2",strokeOpacity:"0.3",fill:"none"});case Z.WATERMELON:return j.jsx("circle",{cx:c,cy:h,r:r*.9,stroke:_,strokeWidth:"6",fill:"none"});case Z.TOMATO:return j.jsxs("g",{children:[j.jsx("circle",{cx:c+r*.3,cy:h-r*.3,r:r*.35,fill:"white",fillOpacity:"0.4"}),j.jsx("polygon",{points:`${c},${h-r*.85} ${c-r*.2},${h-r*.7} ${c+r*.2},${h-r*.7}`,fill:"#2E7D32"})]});default:return null}},b=()=>{const _=M=>j.jsxs("g",{children:[j.jsx("circle",{cx:c+M,cy:h+f,r:g,fill:l}),j.jsx("circle",{cx:c+M-g*.3,cy:h+f-g*.3,r:g*.3,fill:"white"})]}),S=(M,k=1)=>j.jsx("path",{d:`M ${c+M-g*k} ${h+f} A ${g*k} ${g*k} 0 0 1 ${c+M+g*k} ${h+f}`,stroke:l,strokeWidth:g/2,fill:"none",strokeLinecap:"round"}),A=M=>j.jsx("path",{d:`M ${c+M-g} ${h+f} L ${c+M+g} ${h+f}`,stroke:l,strokeWidth:g/2,strokeLinecap:"round"}),T=M=>j.jsx("path",{d:`M ${c+M-g} ${h+f} L ${c+M+g} ${h+f}`,stroke:l,strokeWidth:g/2,strokeLinecap:"round"}),R=M=>{const k=[0,-1,.3,-.3,1,0,.3,.3,0,1,-.3,.3,-1,0,-.3,-.3].map((H,X)=>X%2===0?c+M+H*g*1.8:h+f+H*g*1.8).join(",");return j.jsx("polygon",{points:k,fill:"#FFD700",stroke:l,strokeWidth:"1"})};switch(n){case Z.CHERRY:return j.jsxs("g",{children:[_(-p),_(p),j.jsx("path",{d:`M ${c-g} ${h+f+g} Q ${c} ${h+f+g+5} ${c+g} ${h+f+g}`,stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round"})]});case Z.STRAWBERRY:return j.jsxs("g",{children:[S(-p,1.2),S(p,1.2),j.jsx("path",{d:`M ${c-g} ${h+f+g*2} Q ${c} ${h+f+g*3} ${c+g} ${h+f+g*2}`,stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round"})]});case Z.GRAPE:return j.jsxs("g",{children:[_(-p),_(p),j.jsx("circle",{cx:c,cy:h+f+g*2,r:g*.5,stroke:o,strokeWidth:"2",fill:"none"})]});case Z.CLEMENTINE:return j.jsxs("g",{children:[A(-p),_(p),j.jsx("path",{d:`M ${c-g} ${h+f+g*1.5} A ${g} ${g} 0 0 0 ${c+g} ${h+f+g*1.5} Z`,fill:o})]});case Z.ORANGE:return j.jsxs("g",{children:[T(-p),T(p),j.jsx("path",{d:`M ${c-g} ${h+f+g*2.5} L ${c+g} ${h+f+g*2.5}`,stroke:o,strokeWidth:"3",strokeLinecap:"round"})]});case Z.APPLE:return j.jsxs("g",{children:[S(-p),S(p),j.jsx("path",{d:`M ${c-g*.8} ${h+f+g*1.5} Q ${c} ${h+f+g*2.5} ${c+g*.8} ${h+f+g*1.5}`,stroke:o,strokeWidth:"3",fill:"none",strokeLinecap:"round"})]});case Z.PINEAPPLE:return j.jsxs("g",{children:[j.jsx("rect",{x:c-p-g*1.5,y:h+f-g*.5,width:g*3,height:g*1.5,fill:"#111"}),j.jsx("rect",{x:c+p-g*1.5,y:h+f-g*.5,width:g*3,height:g*1.5,fill:"#111"}),j.jsx("line",{x1:c-p,y1:h+f,x2:c+p,y2:h+f,stroke:"#111",strokeWidth:"2"}),j.jsx("path",{d:`M ${c-g} ${h+f+g*2} Q ${c} ${h+f+g*3} ${c+g} ${h+f+g*2}`,stroke:o,strokeWidth:"3",fill:"none",strokeLinecap:"round"})]});case Z.COCONUT:return j.jsxs("g",{children:[A(-p),A(p),j.jsx("circle",{cx:c,cy:h+f+g*2.5,r:g*.5,stroke:o,strokeWidth:"2",fill:"none"})]});case Z.PUMPKIN:return j.jsxs("g",{children:[j.jsx("polygon",{points:`${c-p},${h+f-g} ${c-p-g},${h+f+g} ${c-p+g},${h+f+g}`,fill:o}),j.jsx("polygon",{points:`${c+p},${h+f-g} ${c+p-g},${h+f+g} ${c+p+g},${h+f+g}`,fill:o}),j.jsx("polygon",{points:`${c-g*2},${h+f+g*2} ${c-g},${h+f+g*3} ${c},${h+f+g*2} ${c+g},${h+f+g*3} ${c+g*2},${h+f+g*2}`,stroke:o,strokeWidth:"3",fill:"none",strokeLinejoin:"round"})]});case Z.WATERMELON:return j.jsxs("g",{children:[R(-p),R(p),j.jsx("path",{d:`M ${c-g*1.5} ${h+f+g*2} Q ${c} ${h+f+g*5} ${c+g*1.5} ${h+f+g*2} Z`,fill:"#660000"}),j.jsx("path",{d:`M ${c-g*.8} ${h+f+g*3.5} A ${g*.8} ${g*.8} 0 0 0 ${c+g*.8} ${h+f+g*3.5}`,fill:"#FF6666"})]});case Z.TOMATO:return j.jsxs("g",{children:[A(-p),A(p),j.jsx("path",{d:`M ${c-g} ${h+f+g*2} Q ${c} ${h+f+g*3} ${c+g} ${h+f+g*2}`,stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round"})]});default:return j.jsxs("g",{children:[_(-p),_(p),j.jsx("path",{d:`M ${c-g} ${h+f+g} Q ${c} ${h+f+g+5} ${c+g} ${h+f+g}`,stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round"})]})}};return j.jsxs("svg",{width:t,height:t,viewBox:`0 0 ${t} ${t}`,children:[j.jsx("circle",{cx:c,cy:h,r:r-2,fill:i.color,stroke:n!==Z.TOMATO?i.patternColor:"none",strokeWidth:n!==Z.TOMATO?2:0}),y(),b()]})},BT=({difficulty:n,settings:t,onUpdateSettings:i,leaderboard:r,onGameOver:l,setScore:o})=>{var J;const c=Nt.useRef(null),h=Nt.useRef(null),[f,p]=Nt.useState(0),[g,y]=Nt.useState(!1),[b,_]=Nt.useState(0),[S,A]=Nt.useState(0),[T,R]=Nt.useState(Z.CHERRY),[M,k]=Nt.useState(0),[H,X]=Nt.useState(Z.CHERRY),[P,L]=Nt.useState(!1),[st,lt]=Nt.useState(!1),[nt,rt]=Nt.useState(0),[yt,xt]=Nt.useState(0),[Dt,Kt]=Nt.useState(Si[Z.CHERRY].color);Nt.useEffect(()=>{const et=setInterval(()=>{xt(Math.floor(Math.random()*Vg.length))},25e3);return()=>clearInterval(et)},[]),Nt.useEffect(()=>{if(!c.current)return;const et=new zT(c.current,n,t,{onScore:(tt,ut)=>o(ut),onGameOver:l,onCombo:tt=>p(tt),onFeverStart:()=>y(!0),onFeverEnd:()=>y(!1),onDanger:(tt,ut)=>_(tt?ut:0),onJuiceUpdate:(tt,ut)=>A(tt/ut*100),onNextFruit:tt=>R(tt),onMaxFruit:tt=>{Kt(Si[tt].patternColor),X(ut=>Math.max(ut,tt))},onTimeUpdate:tt=>k(tt)});return et.initialize().catch(tt=>console.error("Game init failed",tt)),h.current=et,()=>{et.cleanup(),h.current=null}},[]),Nt.useEffect(()=>{h.current&&h.current.updateSettings(t)},[t]);const x=()=>{const et=!P;L(et),h.current&&h.current.setPaused(et)},C=()=>{h.current&&h.current.reset(),L(!1),o(0),p(0),y(!1),A(0),k(0),X(Z.CHERRY)},O=()=>{h.current&&h.current.gameOver()},B=()=>i({...t,musicEnabled:!t.musicEnabled}),Y=()=>i({...t,sfxEnabled:!t.sfxEnabled}),E=()=>i({...t,hapticsEnabled:!t.hapticsEnabled}),D=()=>i({...t,showLocalOnly:!t.showLocalOnly}),$=[...r].sort((et,tt)=>tt.score-et.score).slice(0,10),Q=et=>{const tt=Math.floor(et/1e3),ut=Math.floor(tt/60),pt=tt%60;return`${ut}:${pt.toString().padStart(2,"0")}`};return j.jsxs("div",{className:"relative w-full h-full bg-white font-['Fredoka'] overflow-hidden",children:[j.jsx("div",{className:"absolute inset-0 bg-[#FFF8E1] z-0"}),j.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",children:Vg.map((et,tt)=>j.jsx("div",{className:"absolute inset-0 animate-mask-scroll transition-opacity duration-2000",style:{maskImage:`url("${et}")`,WebkitMaskImage:`url("${et}")`,maskSize:"50px",WebkitMaskSize:"50px",backgroundColor:Dt,opacity:yt===tt?.12:0}},tt))}),j.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 flex items-end opacity-40",children:j.jsx("div",{className:`w-full relative transition-all ease-in-out ${g?"bg-purple-500":"bg-blue-400"}`,style:{height:`${S}%`,transitionDuration:"3000ms"},children:j.jsx("div",{className:"absolute top-0 left-0 right-0 -mt-6 h-6 w-full animate-wave",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 20' preserveAspectRatio='none'%3E%3Cpath d='M0 20 L0 10 Q25 0 50 10 T100 10 L100 20 Z' fill='${g?"%23A855F7":"%2360A5FA"}' /%3E%3C/svg%3E")`,backgroundSize:"100px 100%",backgroundRepeat:"repeat-x"}})})}),j.jsx("div",{className:"absolute top-[35%] left-0 right-0 flex justify-center items-center pointer-events-none z-0",children:(g||f>1)&&j.jsx("div",{className:"transform -rotate-6 transition-all duration-200 select-none flex flex-col items-center animate-pop",children:j.jsx("h1",{className:"text-5xl font-black text-yellow-400 tracking-wide text-center leading-tight",style:{textShadow:"4px 4px 0px #F97316, 8px 8px 0px rgba(0,0,0,0.2)",WebkitTextStroke:"2px #fff",filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.3))"},children:g?j.jsx(j.Fragment,{children:j.jsx("span",{className:"text-6xl block text-purple-400",style:{textShadow:"4px 4px 0px #6B21A8"},children:"FRENZY!! x2"})}):`${f} CHAIN!`})})}),j.jsxs("div",{className:"absolute top-24 left-6 z-20 pointer-events-none flex flex-col items-start font-['Fredoka'] gap-1",children:[j.jsxs("div",{className:"text-2xl font-black text-white drop-shadow-md tracking-wide flex items-center gap-2",style:{WebkitTextStroke:"1.5px #4B5563",textShadow:"2px 2px 0px rgba(0,0,0,0.2)"},children:[j.jsx(_y,{size:20,strokeWidth:3,style:{filter:"drop-shadow(1px 1px 0 #4B5563) drop-shadow(-1px -1px 0 #4B5563)"}}),Q(M)]}),j.jsxs("div",{className:"text-2xl font-black text-white drop-shadow-md tracking-wide flex items-center gap-2",style:{WebkitTextStroke:"1.5px #4B5563",textShadow:"2px 2px 0px rgba(0,0,0,0.2)"},children:[j.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-[#4B5563] shadow-sm",style:{backgroundColor:(J=Si[H])==null?void 0:J.color}}),"LVL ",H+1]})]}),j.jsx("div",{className:"absolute top-6 right-6 pointer-events-auto z-20 flex flex-col items-end gap-3 animate-fade-in",children:j.jsxs("div",{className:"flex flex-col items-center pointer-events-none drop-shadow-md",children:[j.jsx("div",{className:"text-sm text-gray-400 font-bold mb-1 tracking-widest drop-shadow-sm",style:{WebkitTextStroke:"0.5px white"},children:"NEXT"}),j.jsx(Fg,{tier:T,size:60})]})}),j.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-20 pointer-events-auto animate-fade-in",children:j.jsx("button",{onClick:x,className:"w-14 h-14 bg-[#558B2F] hover:bg-[#33691E] text-white border-4 border-[#2E5A1C] rounded-full flex items-center justify-center shadow-lg active:scale-95 transition-transform","aria-label":"Pause Game",children:j.jsx(tw,{size:28,fill:"currentColor"})})}),st&&j.jsx("div",{className:"absolute bottom-6 left-6 z-30 animate-fade-in pointer-events-auto",children:j.jsx("button",{onClick:()=>{h.current&&h.current.forceCurrentFruit(Z.TOMATO)},className:"w-14 h-14 bg-white/80 backdrop-blur-sm hover:bg-white rounded-full flex items-center justify-center shadow-lg border-2 border-red-400 active:scale-95 transition-all",title:"Spawn Tomato",children:j.jsx(Fg,{tier:Z.TOMATO,size:40})})}),b>0&&j.jsxs("div",{className:"absolute inset-0 pointer-events-none z-0 flex flex-col items-center pt-32 animate-pulse-danger",children:[j.jsx("div",{className:"w-full h-1 bg-red-600 shadow-[0_0_20px_rgba(255,0,0,0.8)]"}),j.jsx("div",{className:"mt-4 text-6xl font-black text-red-600 drop-shadow-lg",style:{WebkitTextStroke:"2px white"},children:(b/1e3).toFixed(1)}),j.jsx("div",{className:"text-red-500 font-bold uppercase tracking-widest text-2xl drop-shadow-md",children:"DANGER!"})]}),P&&j.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm animate-fade-in",children:j.jsxs("div",{className:"bg-white/95 backdrop-blur-xl border border-white/50 shadow-[0_20px_60px_rgba(0,0,0,0.3)] rounded-[2.5rem] p-6 w-full max-w-lg flex flex-col items-center max-h-[85vh] overflow-hidden",children:[j.jsx("h2",{className:"text-4xl font-black text-gray-800 mb-6 tracking-wide drop-shadow-sm select-none cursor-pointer active:scale-95 transition-transform",onClick:()=>{rt(et=>{const tt=et+1;return tt>=10&&lt(!0),tt})},children:"PAUSED"}),j.jsxs("div",{className:"w-full mb-6 bg-slate-50 border border-slate-200 rounded-2xl p-4 shadow-inner flex flex-col overflow-hidden max-h-40",children:[j.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400 uppercase tracking-widest text-xs font-bold mb-2",children:[j.jsx(To,{size:14})," ",t.showLocalOnly?"Local History":"Global Ranking"]}),j.jsx("div",{className:"overflow-y-auto pr-2 custom-scrollbar",children:$.length===0?j.jsx("div",{className:"text-center text-slate-400 italic text-sm",children:"No high scores yet"}):$.map((et,tt)=>j.jsxs("div",{className:"flex justify-between items-center text-sm font-bold text-slate-700 border-b border-slate-100 last:border-0 py-1",children:[j.jsxs("div",{className:"flex gap-2 w-full",children:[j.jsxs("span",{className:"w-5 text-right text-slate-400",children:["#",tt+1]}),j.jsx("span",{className:"truncate flex-1 text-left",children:et.name})]}),j.jsx("span",{className:"text-right",children:et.score.toLocaleString()})]},tt))})]}),j.jsxs("div",{className:"w-full space-y-3 mb-6",children:[j.jsxs("button",{onClick:x,className:"w-full bg-blue-500 hover:bg-blue-400 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all flex items-center justify-center gap-3",children:[j.jsx(Ty,{size:24,fill:"currentColor"})," RESUME"]}),j.jsxs("button",{onClick:C,className:"w-full bg-amber-500 hover:bg-amber-400 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all flex items-center justify-center gap-3",children:[j.jsx(Ey,{size:24})," RESTART"]}),j.jsxs("button",{onClick:O,className:"w-full bg-red-500 hover:bg-red-400 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all flex items-center justify-center gap-3",children:[j.jsx(xy,{size:24})," END GAME"]})]}),j.jsxs("div",{className:"flex gap-3 w-full justify-center border-t border-gray-200 pt-4",children:[j.jsx("button",{onClick:B,className:`flex-1 py-3 rounded-xl shadow-md transition-all active:scale-95 flex justify-center items-center ${t.musicEnabled?"bg-blue-500 text-white hover:bg-blue-400":"bg-gray-200 text-gray-400"}`,"aria-label":"Toggle Music",children:t.musicEnabled?j.jsx(Sy,{size:24}):j.jsx(wy,{size:24})}),j.jsx("button",{onClick:Y,className:`flex-1 py-3 rounded-xl shadow-md transition-all active:scale-95 flex justify-center items-center ${t.sfxEnabled?"bg-orange-500 text-white hover:bg-orange-400":"bg-gray-200 text-gray-400"}`,"aria-label":"Toggle SFX",children:t.sfxEnabled?j.jsx(Ry,{size:24}):j.jsx(Oy,{size:24})}),j.jsx("button",{onClick:E,className:`flex-1 py-3 rounded-xl shadow-md transition-all active:scale-95 flex justify-center items-center ${t.hapticsEnabled?"bg-purple-500 text-white hover:bg-purple-400":"bg-gray-200 text-gray-400"}`,"aria-label":"Toggle Haptics",children:t.hapticsEnabled?j.jsx(My,{size:24}):j.jsx(Cy,{size:24})}),j.jsx("button",{onClick:D,className:`flex-1 py-3 rounded-xl shadow-md transition-all active:scale-95 flex justify-center items-center ${t.showLocalOnly?"bg-gray-200 text-gray-400":"bg-teal-500 text-white hover:bg-teal-400"}`,"aria-label":"Toggle Leaderboard Mode",children:t.showLocalOnly?j.jsx(Ay,{size:24}):j.jsx(by,{size:24})})]})]})}),j.jsx("canvas",{ref:c,className:"w-full h-full touch-none cursor-grab active:cursor-grabbing relative z-10"})]})},kh={highScores:{[is.EASY]:0,[is.NORMAL]:0,[is.HARD]:0},leaderboard:[],pendingScores:[],settings:{musicEnabled:!0,sfxEnabled:!0,hapticsEnabled:!0,reducedParticles:!1,showLocalOnly:!1},lastDifficulty:is.NORMAL,tutorialSeen:!1},sd=()=>{var n;try{const t=localStorage.getItem(ky);if(t){const i=JSON.parse(t);return typeof((n=i.settings)==null?void 0:n.soundEnabled)<"u"&&(i.settings.musicEnabled=i.settings.soundEnabled,i.settings.sfxEnabled=i.settings.soundEnabled,delete i.settings.soundEnabled),{...kh,...i,settings:{...kh.settings,...i.settings}}}}catch(t){console.error("Failed to load save data",t)}return kh},pa=n=>{try{const i={...sd(),...n};localStorage.setItem(ky,JSON.stringify(i))}catch(t){console.error("Failed to save data",t)}};function No(n,t){var i={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(i[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(n);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(n,r[l])&&(i[r[l]]=n[r[l]]);return i}function PT(n,t,i,r){function l(o){return o instanceof i?o:new i(function(c){c(o)})}return new(i||(i=Promise))(function(o,c){function h(g){try{p(r.next(g))}catch(y){c(y)}}function f(g){try{p(r.throw(g))}catch(y){c(y)}}function p(g){g.done?o(g.value):l(g.value).then(h,f)}p((r=r.apply(n,t||[])).next())})}const LT=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Cd extends Error{constructor(t,i="FunctionsError",r){super(t),this.name=i,this.context=r}}class GT extends Cd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Xg extends Cd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Kg extends Cd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var nd;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(nd||(nd={}));class qT{constructor(t,{headers:i={},customFetch:r,region:l=nd.Any}={}){this.url=t,this.headers=i,this.region=l,this.fetch=LT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return PT(this,arguments,void 0,function*(i,r={}){var l;let o,c;try{const{headers:h,method:f,body:p,signal:g,timeout:y}=r;let b={},{region:_}=r;_||(_=this.region);const S=new URL(`${this.url}/${i}`);_&&_!=="any"&&(b["x-region"]=_,S.searchParams.set("forceFunctionRegion",_));let A;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(b["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(b["Content-Type"]="application/json",A=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?A=JSON.stringify(p):A=p;let T=g;y&&(c=new AbortController,o=setTimeout(()=>c.abort(),y),g?(T=c.signal,g.addEventListener("abort",()=>c.abort())):T=c.signal);const R=yield this.fetch(S.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),h),body:A,signal:T}).catch(X=>{throw new GT(X)}),M=R.headers.get("x-relay-error");if(M&&M==="true")throw new Xg(R);if(!R.ok)throw new Kg(R);let k=((l=R.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),H;return k==="application/json"?H=yield R.json():k==="application/octet-stream"||k==="application/pdf"?H=yield R.blob():k==="text/event-stream"?H=R:k==="multipart/form-data"?H=yield R.formData():H=yield R.text(),{data:H,error:null,response:R}}catch(h){return{data:null,error:h,response:h instanceof Kg||h instanceof Xg?h.context:void 0}}finally{o&&clearTimeout(o)}})}}var HT=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},$T=class{constructor(n){var t,i;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(i=n.isMaybeSingle)!==null&&i!==void 0?i:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let l=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let c=null,h=null,f=null,p=o.status,g=o.statusText;if(o.ok){var y,b;if(i.method!=="HEAD"){var _;const R=await o.text();R===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((_=i.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?h=R:h=JSON.parse(R))}const A=(y=i.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),T=(b=o.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");A&&T&&T.length>1&&(f=parseInt(T[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var S;const A=await o.text();try{c=JSON.parse(A),Array.isArray(c)&&o.status===404&&(h=[],c=null,p=200,g="OK")}catch{o.status===404&&A===""?(p=204,g="No Content"):c={message:A}}if(c&&i.isMaybeSingle&&(!(c==null||(S=c.details)===null||S===void 0)&&S.includes("0 rows"))&&(c=null,p=200,g="OK"),c&&i.shouldThrowOnError)throw new HT(c)}return{error:c,data:h,count:f,status:p,statusText:g}});return this.shouldThrowOnError||(l=l.catch(o=>{var c;let h="";const f=o==null?void 0:o.cause;if(f){var p,g,y,b;const S=(p=f==null?void 0:f.message)!==null&&p!==void 0?p:"",A=(g=f==null?void 0:f.code)!==null&&g!==void 0?g:"";h=`${(y=o==null?void 0:o.name)!==null&&y!==void 0?y:"FetchError"}: ${o==null?void 0:o.message}`,h+=`

Caused by: ${(b=f==null?void 0:f.name)!==null&&b!==void 0?b:"Error"}: ${S}`,A&&(h+=` (${A})`),f!=null&&f.stack&&(h+=`
${f.stack}`)}else{var _;h=(_=o==null?void 0:o.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(n,t)}returns(){return this}overrideTypes(){return this}},IT=class extends $T{select(n){let t=!1;const i=(n??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:i,foreignTable:r,referencedTable:l=r}={}){const o=l?`${l}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${n}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:i=t}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,t,{foreignTable:i,referencedTable:r=i}={}){const l=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(o,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:i=!1,buffers:r=!1,wal:l=!1,format:o="text"}={}){var c;const h=[n?"analyze":null,t?"verbose":null,i?"settings":null,r?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${f}"; options=${h};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const Wg=new RegExp("[,()]");var ar=class extends IT{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const i=Array.from(new Set(t)).map(r=>typeof r=="string"&&Wg.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${i})`),this}notIn(n,t){const i=Array.from(new Set(t)).map(r=>typeof r=="string"&&Wg.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${i})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:i,type:r}={}){let l="";r==="plain"?l="pl":r==="phrase"?l="ph":r==="websearch"&&(l="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(n,`${l}fts${o}.${t}`),this}match(n){return Object.entries(n).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(n,t,i){return this.url.searchParams.append(n,`not.${t}.${i}`),this}or(n,{foreignTable:t,referencedTable:i=t}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,t,i){return this.url.searchParams.append(n,`${t}.${i}`),this}},YT=class{constructor(n,{headers:t={},schema:i,fetch:r}){this.url=n,this.headers=new Headers(t),this.schema=i,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,t){const{head:i=!1,count:r}=t??{},l=i?"HEAD":"GET";let o=!1;const c=(n??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join(""),{url:h,headers:f}=this.cloneRequestState();return h.searchParams.set("select",c),r&&f.append("Prefer",`count=${r}`),new ar({method:l,url:h,headers:f,schema:this.schema,fetch:this.fetch})}insert(n,{count:t,defaultToNull:i=!0}={}){var r;const l="POST",{url:o,headers:c}=this.cloneRequestState();if(t&&c.append("Prefer",`count=${t}`),i||c.append("Prefer","missing=default"),Array.isArray(n)){const h=n.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);o.searchParams.set("columns",f.join(","))}}return new ar({method:l,url:o,headers:c,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:t,ignoreDuplicates:i=!1,count:r,defaultToNull:l=!0}={}){var o;const c="POST",{url:h,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),t!==void 0&&h.searchParams.set("on_conflict",t),r&&f.append("Prefer",`count=${r}`),l||f.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);h.searchParams.set("columns",g.join(","))}}return new ar({method:c,url:h,headers:f,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(n,{count:t}={}){var i;const r="PATCH",{url:l,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new ar({method:r,url:l,headers:o,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:n}={}){var t;const i="DELETE",{url:r,headers:l}=this.cloneRequestState();return n&&l.append("Prefer",`count=${n}`),new ar({method:i,url:r,headers:l,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},VT=class $v{constructor(t,{headers:i={},schema:r,fetch:l}={}){this.url=t,this.headers=new Headers(i),this.schemaName=r,this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new YT(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $v(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,i={},{head:r=!1,get:l=!1,count:o}={}){var c;let h;const f=new URL(`${this.url}/rpc/${t}`);let p;const g=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(g)),y=r&&Object.values(i).some(g);y?(h="POST",p=i):r||l?(h=r?"HEAD":"GET",Object.entries(i).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{f.searchParams.append(_,S)})):(h="POST",p=i);const b=new Headers(this.headers);return y?b.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&b.set("Prefer",`count=${o}`),new ar({method:h,url:f,headers:b,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class FT{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const r=i.versions;if(r&&r.node){const l=r.node,o=parseInt(l.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let i=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(i+=`

Suggested solution: ${t.workaround}`),new Error(i)}static createWebSocket(t,i){const r=this.getWebSocketConstructor();return new r(t,i)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const XT="2.90.1",KT=`realtime-js/${XT}`,Iv="1.0.0",WT="2.0.0",Qg=Iv,rd=1e4,QT=1e3,ZT=100;var Ns;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ns||(Ns={}));var he;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(he||(he={}));var wi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(wi||(wi={}));var ad;(function(n){n.websocket="websocket"})(ad||(ad={}));var un;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(un||(un={}));class JT{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,i){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return i(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var i;return this._isArrayBuffer((i=t.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var i,r;const l=(r=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var i,r;const l=(r=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(t,i,r){var l,o;const c=t.topic,h=(l=t.ref)!==null&&l!==void 0?l:"",f=(o=t.join_ref)!==null&&o!==void 0?o:"",p=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+h.length+c.length+p.length+y.length,_=new ArrayBuffer(this.HEADER_LENGTH+b);let S=new DataView(_),A=0;S.setUint8(A++,this.KINDS.userBroadcastPush),S.setUint8(A++,f.length),S.setUint8(A++,h.length),S.setUint8(A++,c.length),S.setUint8(A++,p.length),S.setUint8(A++,y.length),S.setUint8(A++,i),Array.from(f,R=>S.setUint8(A++,R.charCodeAt(0))),Array.from(h,R=>S.setUint8(A++,R.charCodeAt(0))),Array.from(c,R=>S.setUint8(A++,R.charCodeAt(0))),Array.from(p,R=>S.setUint8(A++,R.charCodeAt(0))),Array.from(y,R=>S.setUint8(A++,R.charCodeAt(0)));var T=new Uint8Array(_.byteLength+r.byteLength);return T.set(new Uint8Array(_),0),T.set(new Uint8Array(r),_.byteLength),T.buffer}decode(t,i){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return i(r)}if(typeof t=="string"){const r=JSON.parse(t),[l,o,c,h,f]=r;return i({join_ref:l,ref:o,topic:c,event:h,payload:f})}return i({})}_binaryDecode(t){const i=new DataView(t),r=i.getUint8(0),l=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,i,l)}}_decodeUserBroadcast(t,i,r){const l=i.getUint8(1),o=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let f=this.HEADER_LENGTH+4;const p=r.decode(t.slice(f,f+l));f=f+l;const g=r.decode(t.slice(f,f+o));f=f+o;const y=r.decode(t.slice(f,f+c));f=f+c;const b=t.slice(f,t.byteLength),_=h===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,S={type:this.BROADCAST_EVENT,event:g,payload:_};return c>0&&(S.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(t){var i;return t instanceof ArrayBuffer||((i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(t,i){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>i.includes(r)))}}class Yv{constructor(t,i){this.callback=t,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $t;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})($t||($t={}));const Zg=(n,t,i={})=>{var r;const l=(r=i.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,c)=>(o[c]=tE(c,n,t,l),o),{}):{}},tE=(n,t,i,r)=>{const l=t.find(h=>h.name===n),o=l==null?void 0:l.type,c=i[n];return o&&!r.includes(o)?Vv(o,c):ld(c)},Vv=(n,t)=>{if(n.charAt(0)==="_"){const i=n.slice(1,n.length);return nE(t,i)}switch(n){case $t.bool:return eE(t);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return iE(t);case $t.json:case $t.jsonb:return sE(t);case $t.timestamp:return rE(t);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:return ld(t);default:return ld(t)}},ld=n=>n,eE=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},iE=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},sE=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},nE=(n,t)=>{if(typeof n!="string")return n;const i=n.length-1,r=n[i];if(n[0]==="{"&&r==="}"){let o;const c=n.slice(1,i);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(h=>Vv(t,h))}return n},rE=n=>typeof n=="string"?n.replace(" ","T"):n,Fv=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Nh{constructor(t,i,r={},l=rd){this.channel=t,this.event=i,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,i){var r;return this._hasReceived(t)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:i}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(i))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Jg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Jg||(Jg={}));class Ta{constructor(t,i){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ta.syncState(this.state,l,o,c),this.pendingDiffs.forEach(f=>{this.state=Ta.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},l=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ta.syncDiff(this.state,l,o,c),h())}),this.onJoin((l,o,c)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:o,newPresences:c})}),this.onLeave((l,o,c)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,i,r,l){const o=this.cloneDeep(t),c=this.transformState(i),h={},f={};return this.map(o,(p,g)=>{c[p]||(f[p]=g)}),this.map(c,(p,g)=>{const y=o[p];if(y){const b=g.map(T=>T.presence_ref),_=y.map(T=>T.presence_ref),S=g.filter(T=>_.indexOf(T.presence_ref)<0),A=y.filter(T=>b.indexOf(T.presence_ref)<0);S.length>0&&(h[p]=S),A.length>0&&(f[p]=A)}else h[p]=g}),this.syncDiff(o,{joins:h,leaves:f},r,l)}static syncDiff(t,i,r,l){const{joins:o,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(o,(h,f)=>{var p;const g=(p=t[h])!==null&&p!==void 0?p:[];if(t[h]=this.cloneDeep(f),g.length>0){const y=t[h].map(_=>_.presence_ref),b=g.filter(_=>y.indexOf(_.presence_ref)<0);t[h].unshift(...b)}r(h,g,f)}),this.map(c,(h,f)=>{let p=t[h];if(!p)return;const g=f.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),t[h]=p,l(h,p,f),p.length===0&&delete t[h]}),t}static map(t,i){return Object.getOwnPropertyNames(t).map(r=>i(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((i,r)=>{const l=t[r];return"metas"in l?i[r]=l.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):i[r]=l,i},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ty;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ty||(ty={}));var Ea;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ea||(Ea={}));var es;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(es||(es={}));class ur{constructor(t,i={config:{}},r){var l,o;if(this.topic=t,this.params=i,this.socket=r,this.bindings={},this.state=he.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Nh(this,wi.join,this.params,this.timeout),this.rejoinTimer=new Yv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=he.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=he.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wi.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new Ta(this),this.broadcastEndpointURL=Fv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,i=this.timeout){var r,l,o;if(this.socket.isConnected()||this.socket.connect(),this.state==he.closed){const{config:{broadcast:c,presence:h,private:f}}=this.params,p=(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(_=>_.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[Ea.PRESENCE]&&this.bindings[Ea.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},b={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:g}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(_=>t==null?void 0:t(es.CHANNEL_ERROR,_)),this._onClose(()=>t==null?void 0:t(es.CLOSED)),this.updateJoinPayload(Object.assign({config:b},y)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){t==null||t(es.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,T=(S=A==null?void 0:A.length)!==null&&S!==void 0?S:0,R=[];for(let M=0;M<T;M++){const k=A[M],{filter:{event:H,schema:X,table:P,filter:L}}=k,st=_&&_[M];if(st&&st.event===H&&ur.isFilterValueEqual(st.schema,X)&&ur.isFilterValueEqual(st.table,P)&&ur.isFilterValueEqual(st.filter,L))R.push(Object.assign(Object.assign({},k),{id:st.id}));else{this.unsubscribe(),this.state=he.errored,t==null||t(es.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,t&&t(es.SUBSCRIBED);return}}).receive("error",_=>{this.state=he.errored,t==null||t(es.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(es.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,i={}){return await this.send({type:"presence",event:"track",payload:t},i.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,i,r){return this.state===he.joined&&t===Ea.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,i,r)}async httpSend(t,i,r={}){var l;if(i==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);if(h.status===202)return{success:!0};let f=h.statusText;try{const p=await h.json();f=p.error||p.message||f}catch{}return Promise.reject(new Error(f))}async send(t,i={}){var r,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=t,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,h,f;const p=this._push(t.type,t,i.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=he.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new Nh(this,wi.leave,{},t),r.receive("ok",()=>{i(),l("ok")}).receive("timeout",()=>{i(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=he.closed,this.bindings={}}async _fetchWithTimeout(t,i,r){const l=new AbortController,o=setTimeout(()=>l.abort(),r),c=await this.socket.fetch(t,Object.assign(Object.assign({},i),{signal:l.signal}));return clearTimeout(o),c}_push(t,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Nh(this,t,i,r);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>ZT){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(t,i,r){return i}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,i,r){var l,o;const c=t.toLocaleLowerCase(),{close:h,error:f,leave:p,join:g}=wi;if(r&&[h,f,p,g].indexOf(c)>=0&&r!==this._joinRef())return;let b=this._onMessage(c,i,r);if(i&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(_=>{var S,A,T;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((T=(A=_.filter)===null||A===void 0?void 0:A.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===c}).map(_=>_.callback(b,r)):(o=this.bindings[c])===null||o===void 0||o.filter(_=>{var S,A,T,R,M,k,H,X;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in _){const P=_.id,L=(S=_.filter)===null||S===void 0?void 0:S.event;return P&&((A=i.ids)===null||A===void 0?void 0:A.includes(P))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((T=i.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))&&(!(!((R=_.filter)===null||R===void 0)&&R.table)||_.filter.table===((M=i.data)===null||M===void 0?void 0:M.table))}else{const P=(H=(k=_==null?void 0:_.filter)===null||k===void 0?void 0:k.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return P==="*"||P===((X=i==null?void 0:i.event)===null||X===void 0?void 0:X.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===c}).map(_=>{if(typeof b=="object"&&"ids"in b){const S=b.data,{schema:A,table:T,commit_timestamp:R,type:M,errors:k}=S;b=Object.assign(Object.assign({},{schema:A,table:T,commit_timestamp:R,eventType:M,new:{},old:{},errors:k}),this._getPayloadRecords(S))}_.callback(b,r)})}_isClosed(){return this.state===he.closed}_isJoined(){return this.state===he.joined}_isJoining(){return this.state===he.joining}_isLeaving(){return this.state===he.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,i,r){const l=t.toLocaleLowerCase(),o={type:l,filter:i,callback:r};return this.bindings[l]?this.bindings[l].push(o):this.bindings[l]=[o],this}_off(t,i){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(l=>{var o;return!(((o=l.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ur.isEqual(l.filter,i))})),this}static isEqual(t,i){if(Object.keys(t).length!==Object.keys(i).length)return!1;for(const r in t)if(t[r]!==i[r])return!1;return!0}static isFilterValueEqual(t,i){return(t??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(wi.close,{},t)}_onError(t){this._on(wi.error,{},i=>t(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=he.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const i={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(i.new=Zg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(i.old=Zg(t.columns,t.old_record)),i}}const jh=()=>{},yo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},aE=[1e3,2e3,5e3,1e4],lE=1e4,oE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uE{constructor(t,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rd,this.transport=null,this.heartbeatIntervalMs=yo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jh,this.ref=0,this.reconnectTimer=null,this.vsn=Qg,this.logger=jh,this.conn=null,this.sendBuffer=[],this.serializer=new JT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...o)=>l(...o):(...o)=>fetch(...o),!(!((r=i==null?void 0:i.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${t}/${ad.websocket}`,this.httpEndpoint=Fv(t),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=FT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const i=t.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const i=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const t=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,i,r){this.logger(t,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ns.connecting:return un.Connecting;case Ns.open:return un.Open;case Ns.closing:return un.Closing;default:return un.Closed}}isConnected(){return this.connectionState()===un.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,i={config:{}}){const r=`realtime:${t}`,l=this.getChannels().find(o=>o.topic===r);if(l)return l;{const o=new ur(`realtime:${t}`,i,this);return this.channels.push(o),o}}push(t){const{topic:i,event:r,payload:l,ref:o}=t,c=()=>{this.encode(t,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${i} ${r} (${o})`,l),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(QT,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},yo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let i=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${t}"`),i.unsubscribe())}_remove(t){this.channels=this.channels.filter(i=>i.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",p)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:l,payload:o,ref:c}=i,h=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${l} ${h}`.trim(),o),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(l,o,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(t){var i;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ns.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ns.open||this.conn.readyState===Ns.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var i;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(wi.error))}_appendParams(t,i){if(Object.keys(i).length===0)return t;const r=t.match(/\?/)?"&":"?",l=new URLSearchParams(i);return`${t}${r}${l}`}_workerObjectUrl(t){let i;if(t)i=t;else{const r=new Blob([oE],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(t,i=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(t=null){let i,r=!1;if(t)i=t,r=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),i=this.accessTokenValue}else i=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(l=>{const o={access_token:i,version:KT};i&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(wi.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${t}`,i)})}_triggerStateCallbacks(t,i){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(i)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Yv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var i,r,l,o,c,h,f,p,g,y,b,_;switch(this.transport=(i=t==null?void 0:t.transport)!==null&&i!==void 0?i:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:rd,this.heartbeatIntervalMs=(l=t==null?void 0:t.heartbeatIntervalMs)!==null&&l!==void 0?l:yo.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=t==null?void 0:t.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=t==null?void 0:t.heartbeatCallback)!==null&&h!==void 0?h:jh,this.vsn=(f=t==null?void 0:t.vsn)!==null&&f!==void 0?f:Qg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:(S=>aE[S-1]||lE),this.vsn){case Iv:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:((S,A)=>A(JSON.stringify(S))),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:((S,A)=>A(JSON.parse(S)));break;case WT:this.encode=(b=t==null?void 0:t.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(_=t==null?void 0:t.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ra=class extends Error{constructor(n,t){var i;super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((i=t.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function cE(n,t,i){const r=new URL(t,n);if(i)for(const[l,o]of Object.entries(i))o!==void 0&&r.searchParams.set(l,o);return r.toString()}async function hE(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function dE(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:i,path:r,query:l,body:o,headers:c}){const h=cE(n.baseUrl,r,l),f=await hE(n.auth),p=await t(h,{method:i,headers:{...o?{"Content-Type":"application/json"}:{},...f,...c},body:o?JSON.stringify(o):void 0}),g=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),b=y&&g?JSON.parse(g):g;if(!p.ok){const _=y?b:void 0,S=_==null?void 0:_.error;throw new Ra((S==null?void 0:S.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:_})}return{status:p.status,headers:p.headers,data:b}}}}function vo(n){return n.join("")}var fE=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:vo(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,t){const i={namespace:n.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vo(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vo(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vo(n.namespace)}`}),!0}catch(t){if(t instanceof Ra&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(i){if(i instanceof Ra&&i.status===409)return;throw i}}};function Zn(n){return n.join("")}var mE=class{constructor(n,t="",i){this.client=n,this.prefix=t,this.accessDelegation=i}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zn(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Zn(n.namespace)}/tables`,body:t,headers:i})).data.metadata}async updateTable(n,t){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Zn(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zn(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zn(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(i){if(i instanceof Ra&&i.status===404)return!1;throw i}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(i){if(i instanceof Ra&&i.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw i}}},pE=class{constructor(n){var r;let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const i=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=dE({baseUrl:i,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new fE(this.client,t),this.tableOps=new mE(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},jo=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function Qt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var gE=class extends jo{constructor(n,t,i){super(n),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},od=class extends jo{constructor(n,t){super(n),this.name="StorageUnknownError",this.originalError=t}};const Md=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),yE=()=>Response,ud=n=>{if(Array.isArray(n))return n.map(i=>ud(i));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([i,r])=>{const l=i.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[l]=ud(r)}),t},vE=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_E=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Oa(n){"@babel/helpers - typeof";return Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(n)}function bE(n,t){if(Oa(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,t);if(Oa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function xE(n){var t=bE(n,"string");return Oa(t)=="symbol"?t:t+""}function wE(n,t,i){return(t=xE(t))in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function ey(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,r)}return i}function mt(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ey(Object(i),!0).forEach(function(r){wE(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ey(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}const Dh=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},SE=async(n,t,i)=>{n instanceof await yE()&&!(i!=null&&i.noResolveJson)?n.json().then(r=>{const l=n.status||500,o=(r==null?void 0:r.statusCode)||l+"";t(new gE(Dh(r),l,o))}).catch(r=>{t(new od(Dh(r),r))}):t(new od(Dh(n),n))},TE=(n,t,i,r)=>{const l={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||!r?l:(vE(r)?(l.headers=mt({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(r)):l.body=r,t!=null&&t.duplex&&(l.duplex=t.duplex),mt(mt({},l),i))};async function za(n,t,i,r,l,o){return new Promise((c,h)=>{n(i,TE(t,r,l,o)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>SE(f,h,r))})}async function ka(n,t,i,r){return za(n,"GET",t,i,r)}async function xi(n,t,i,r,l){return za(n,"POST",t,r,l,i)}async function cd(n,t,i,r,l){return za(n,"PUT",t,r,l,i)}async function EE(n,t,i,r){return za(n,"HEAD",t,mt(mt({},i),{},{noResolveJson:!0}),r)}async function Rd(n,t,i,r,l){return za(n,"DELETE",t,r,l,i)}var AE=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}}};let Xv;Xv=Symbol.toStringTag;var CE=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[Xv]="BlobDownloadBuilder",this.promise=null}asStream(){return new AE(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}}};const ME={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var RE=class{constructor(n,t={},i,r){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.bucketId=i,this.fetch=Md(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,t,i,r){var l=this;try{let o;const c=mt(mt({},iy),r);let h=mt(mt({},l.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",l.encodeMetadata(f)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),f&&!o.has("metadata")&&o.append("metadata",l.encodeMetadata(f))):(o=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,f&&(h["x-metadata"]=l.toBase64(l.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(h=mt(mt({},h),r.headers));const p=l._removeEmptyFolders(t),g=l._getFinalPath(p),y=await(n=="PUT"?cd:xi)(l.fetch,`${l.url}/object/${g}`,o,mt({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(l.shouldThrowOnError)throw o;if(Qt(o))return{data:null,error:o};throw o}}async upload(n,t,i){return this.uploadOrUpdate("POST",n,t,i)}async uploadToSignedUrl(n,t,i,r){var l=this;const o=l._removeEmptyFolders(n),c=l._getFinalPath(o),h=new URL(l.url+`/object/upload/sign/${c}`);h.searchParams.set("token",t);try{let f;const p=mt({upsert:iy.upsert},r),g=mt(mt({},l.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",p.cacheControl)):(f=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType),{data:{path:o,fullPath:(await cd(l.fetch,h.toString(),f,{headers:g})).Key},error:null}}catch(f){if(l.shouldThrowOnError)throw f;if(Qt(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(n,t){var i=this;try{let r=i._getFinalPath(n);const l=mt({},i.headers);t!=null&&t.upsert&&(l["x-upsert"]="true");const o=await xi(i.fetch,`${i.url}/object/upload/sign/${r}`,{},{headers:l}),c=new URL(i.url+o.url),h=c.searchParams.get("token");if(!h)throw new jo("No token returned by API");return{data:{signedUrl:c.toString(),path:n,token:h},error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async update(n,t,i){return this.uploadOrUpdate("PUT",n,t,i)}async move(n,t,i){var r=this;try{return{data:await xi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Qt(l))return{data:null,error:l};throw l}}async copy(n,t,i){var r=this;try{return{data:{path:(await xi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:r.headers})).Key},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Qt(l))return{data:null,error:l};throw l}}async createSignedUrl(n,t,i){var r=this;try{let l=r._getFinalPath(n),o=await xi(r.fetch,`${r.url}/object/sign/${l}`,mt({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:r.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Qt(l))return{data:null,error:l};throw l}}async createSignedUrls(n,t,i){var r=this;try{const l=await xi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:n},{headers:r.headers}),o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:l.map(c=>mt(mt({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${o}`):null})),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Qt(l))return{data:null,error:l};throw l}}download(n,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=r?`?${r}`:"",o=this._getFinalPath(n),c=()=>ka(this.fetch,`${this.url}/${i}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new CE(c,this.shouldThrowOnError)}async info(n){var t=this;const i=t._getFinalPath(n);try{return{data:ud(await ka(t.fetch,`${t.url}/object/info/${i}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async exists(n){var t=this;const i=t._getFinalPath(n);try{return await EE(t.fetch,`${t.url}/object/${i}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Qt(r)&&r instanceof od){const l=r.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,t){const i=this._getFinalPath(n),r=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&r.push(l);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let h=r.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${i}${h}`)}}}async remove(n){var t=this;try{return{data:await Rd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async list(n,t,i){var r=this;try{const l=mt(mt(mt({},ME),t),{},{prefix:n||""});return{data:await xi(r.fetch,`${r.url}/object/list/${r.bucketId}`,l,{headers:r.headers},i),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Qt(l))return{data:null,error:l};throw l}}async listV2(n,t){var i=this;try{const r=mt({},n);return{data:await xi(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,r,{headers:i.headers},t),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const Kv="2.90.1",Wv={"X-Client-Info":`storage-js/${Kv}`};var OE=class{constructor(n,t={},i,r){this.shouldThrowOnError=!1;const l=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=mt(mt({},Wv),t),this.fetch=Md(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var t=this;try{const i=t.listBucketOptionsToQueryString(n);return{data:await ka(t.fetch,`${t.url}/bucket${i}`,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async getBucket(n){var t=this;try{return{data:await ka(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async createBucket(n,t={public:!1}){var i=this;try{return{data:await xi(i.fetch,`${i.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:i.headers}),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async updateBucket(n,t){var i=this;try{return{data:await cd(i.fetch,`${i.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:i.headers}),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async emptyBucket(n){var t=this;try{return{data:await xi(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async deleteBucket(n){var t=this;try{return{data:await Rd(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},kE=class{constructor(n,t={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=mt(mt({},Wv),t),this.fetch=Md(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await xi(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async listBuckets(n){var t=this;try{const i=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&i.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&i.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&i.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&i.set("sortOrder",n.sortOrder),n!=null&&n.search&&i.set("search",n.search);const r=i.toString(),l=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await ka(t.fetch,l,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async deleteBucket(n){var t=this;try{return{data:await Rd(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}from(n){var t=this;if(!_E(n))throw new jo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new pE({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(i,{get(l,o){const c=l[o];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(l,h),error:null}}catch(f){if(r)throw f;return{data:null,error:f}}}}})}};const Od={"X-Client-Info":`storage-js/${Kv}`,"Content-Type":"application/json"};var Qv=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ii(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Uh=class extends Qv{constructor(n,t,i){super(n),this.name="StorageVectorsApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},NE=class extends Qv{constructor(n,t){super(n),this.name="StorageVectorsUnknownError",this.originalError=t}};const kd=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),jE=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},sy=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),DE=async(n,t,i)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(i!=null&&i.noResolveJson)){const r=n.status||500,l=n;if(typeof l.json=="function")l.json().then(o=>{const c=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";t(new Uh(sy(o),r,c))}).catch(()=>{const o=r+"";t(new Uh(l.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";t(new Uh(l.statusText||`HTTP ${r} error`,r,o))}}else t(new NE(sy(n),n))},UE=(n,t,i,r)=>{const l={method:n,headers:(t==null?void 0:t.headers)||{}};return r?(jE(r)?(l.headers=mt({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(r)):l.body=r,mt(mt({},l),i)):l};async function zE(n,t,i,r,l,o){return new Promise((c,h)=>{n(i,UE(t,r,l,o)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;const p=f.headers.get("content-type");return!p||!p.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>DE(f,h,r))})}async function si(n,t,i,r,l){return zE(n,"POST",t,r,l,i)}var BE=class{constructor(n,t={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=mt(mt({},Od),t),this.fetch=kd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var t=this;try{return{data:await si(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{},error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async getIndex(n,t){var i=this;try{return{data:await si(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:i.headers}),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ii(r))return{data:null,error:r};throw r}}async listIndexes(n){var t=this;try{return{data:await si(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async deleteIndex(n,t){var i=this;try{return{data:await si(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:i.headers})||{},error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ii(r))return{data:null,error:r};throw r}}},PE=class{constructor(n,t={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=mt(mt({},Od),t),this.fetch=kd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var t=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await si(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{},error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async getVectors(n){var t=this;try{return{data:await si(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async listVectors(n){var t=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await si(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async queryVectors(n){var t=this;try{return{data:await si(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async deleteVectors(n){var t=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await si(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{},error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}},LE=class{constructor(n,t={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=mt(mt({},Od),t),this.fetch=kd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var t=this;try{return{data:await si(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async getBucket(n){var t=this;try{return{data:await si(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async listBuckets(n={}){var t=this;try{return{data:await si(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}async deleteBucket(n){var t=this;try{return{data:await si(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{},error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(ii(i))return{data:null,error:i};throw i}}},GE=class extends LE{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new qE(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,i=this;return t().call(i,n)}async getBucket(n){var t=()=>super.getBucket,i=this;return t().call(i,n)}async listBuckets(n={}){var t=()=>super.listBuckets,i=this;return t().call(i,n)}async deleteBucket(n){var t=()=>super.deleteBucket,i=this;return t().call(i,n)}},qE=class extends BE{constructor(n,t,i,r){super(n,t,r),this.vectorBucketName=i}async createIndex(n){var t=()=>super.createIndex,i=this;return t().call(i,mt(mt({},n),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,i=this;return t().call(i,mt(mt({},n),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,i=this;return t().call(i,i.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,i=this;return t().call(i,i.vectorBucketName,n)}index(n){return new HE(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},HE=class extends PE{constructor(n,t,i,r,l){super(n,t,l),this.vectorBucketName=i,this.indexName=r}async putVectors(n){var t=()=>super.putVectors,i=this;return t().call(i,mt(mt({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(n){var t=()=>super.getVectors,i=this;return t().call(i,mt(mt({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,i=this;return t().call(i,mt(mt({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,i=this;return t().call(i,mt(mt({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,i=this;return t().call(i,mt(mt({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},$E=class extends OE{constructor(n,t={},i,r){super(n,t,i,r)}from(n){return new RE(this.url,this.headers,n,this.fetch)}get vectors(){return new GE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kE(this.url+"/iceberg",this.headers,this.fetch)}};const Zv="2.90.1",lr=30*1e3,hd=3,zh=hd*lr,IE="http://localhost:9999",YE="supabase.auth.token",VE={"X-Client-Info":`gotrue-js/${Zv}`},dd="X-Supabase-Api-Version",Jv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},FE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XE=600*1e3;class Na extends Error{constructor(t,i,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}}function ct(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class KE extends Na{constructor(t,i,r){super(t,i,r),this.name="AuthApiError",this.status=i,this.code=r}}function WE(n){return ct(n)&&n.name==="AuthApiError"}class cn extends Na{constructor(t,i){super(t),this.name="AuthUnknownError",this.originalError=i}}class rs extends Na{constructor(t,i,r,l){super(t,r,l),this.name=i,this.status=r}}class ti extends rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function QE(n){return ct(n)&&n.name==="AuthSessionMissingError"}class Jn extends rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _o extends rs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class bo extends rs{constructor(t,i=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ZE(n){return ct(n)&&n.name==="AuthImplicitGrantRedirectError"}class ny extends rs{constructor(t,i=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class JE extends rs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class fd extends rs{constructor(t,i){super(t,"AuthRetryableFetchError",i,void 0)}}function Bh(n){return ct(n)&&n.name==="AuthRetryableFetchError"}class ry extends rs{constructor(t,i,r){super(t,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}}class md extends rs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ay=`
\r=`.split(""),tA=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<ay.length;t+=1)n[ay[t].charCodeAt(0)]=-2;for(let t=0;t<Ao.length;t+=1)n[Ao[t].charCodeAt(0)]=t;return n})();function ly(n,t,i){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;i(Ao[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;i(Ao[r]),t.queuedBits-=6}}function t_(n,t,i){const r=tA[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)i(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function oy(n){const t=[],i=c=>{t.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},o=c=>{sA(c,r,i)};for(let c=0;c<n.length;c+=1)t_(n.charCodeAt(c),l,o);return t.join("")}function eA(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function iA(n,t){for(let i=0;i<n.length;i+=1){let r=n.charCodeAt(i);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(n.charCodeAt(i+1)-56320&65535|l)+65536,i+=1}eA(r,t)}}function sA(n,t,i){if(t.utf8seq===0){if(n<=127){i(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&i(t.codepoint)}}function cr(n){const t=[],i={queue:0,queuedBits:0},r=l=>{t.push(l)};for(let l=0;l<n.length;l+=1)t_(n.charCodeAt(l),i,r);return new Uint8Array(t)}function nA(n){const t=[];return iA(n,i=>t.push(i)),new Uint8Array(t)}function hn(n){const t=[],i={queue:0,queuedBits:0},r=l=>{t.push(l)};return n.forEach(l=>ly(l,i,r)),ly(null,i,r),t.join("")}function rA(n){return Math.round(Date.now()/1e3)+n}function aA(){return Symbol("auth-callback")}const Ae=()=>typeof window<"u"&&typeof document<"u",en={tested:!1,writable:!1},e_=()=>{if(!Ae())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(en.tested)return en.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),en.tested=!0,en.writable=!0}catch{en.tested=!0,en.writable=!1}return en.writable};function lA(n){const t={},i=new URL(n);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((l,o)=>{t[o]=l})}catch{}return i.searchParams.forEach((r,l)=>{t[l]=r}),t}const i_=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),oA=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",or=async(n,t,i)=>{await n.setItem(t,JSON.stringify(i))},sn=async(n,t)=>{const i=await n.getItem(t);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Ee=async(n,t)=>{await n.removeItem(t)};class Do{constructor(){this.promise=new Do.promiseConstructor((t,i)=>{this.resolve=t,this.reject=i})}}Do.promiseConstructor=Promise;function Ph(n){const t=n.split(".");if(t.length!==3)throw new md("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!FE.test(t[r]))throw new md("JWT not in base64url format");return{header:JSON.parse(oy(t[0])),payload:JSON.parse(oy(t[1])),signature:cr(t[2]),raw:{header:t[0],payload:t[1]}}}async function uA(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function cA(n,t){return new Promise((r,l)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await n(o);if(!t(o,null,c)){r(c);return}}catch(c){if(!t(o,c)){l(c);return}}})()})}function hA(n){return("0"+n.toString(16)).substr(-2)}function dA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let l="";for(let o=0;o<56;o++)l+=i.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(t),Array.from(t,hA).join("")}async function fA(n){const i=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",i),l=new Uint8Array(r);return Array.from(l).map(o=>String.fromCharCode(o)).join("")}async function mA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const i=await fA(n);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function tr(n,t,i=!1){const r=dA();let l=r;i&&(l+="/PASSWORD_RECOVERY"),await or(n,`${t}-code-verifier`,l);const o=await mA(r);return[o,r===o?"plain":"s256"]}const pA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gA(n){const t=n.headers.get(dd);if(!t||!t.match(pA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function yA(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function vA(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _A=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function er(n){if(!_A.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lh(){const n={};return new Proxy(n,{get:(t,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bA(n,t){return new Proxy(n,{get:(i,r,l)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,r,l)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(i,r,l)}})}function uy(n){return JSON.parse(JSON.stringify(n))}const on=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xA=[502,503,504];async function cy(n){var t;if(!oA(n))throw new fd(on(n),0);if(xA.includes(n.status))throw new fd(on(n),n.status);let i;try{i=await n.json()}catch(o){throw new cn(on(o),o)}let r;const l=gA(n);if(l&&l.getTime()>=Jv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new ry(on(i),n.status,((t=i.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ti}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new ry(on(i),n.status,i.weak_password.reasons);throw new KE(on(i),n.status||500,r)}const wA=(n,t,i,r)=>{const l={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),i))};async function ft(n,t,i,r){var l;const o=Object.assign({},r==null?void 0:r.headers);o[dd]||(o[dd]=Jv["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(l=r==null?void 0:r.query)!==null&&l!==void 0?l:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await SA(n,t,i+h,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function SA(n,t,i,r,l,o){const c=wA(t,r,l,o);let h;try{h=await n(i,Object.assign({},c))}catch(f){throw console.error(f),new fd(on(f),0)}if(h.ok||await cy(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(f){await cy(f)}}function bi(n){var t;let i=null;AA(n)&&(i=Object.assign({},n),n.expires_at||(i.expires_at=rA(n.expires_in)));const r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:i,user:r},error:null}}function hy(n){const t=bi(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function js(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function TA(n){return{data:n,error:null}}function EA(n){const{action_link:t,email_otp:i,hashed_token:r,redirect_to:l,verification_type:o}=n,c=No(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:i,hashed_token:r,redirect_to:l,verification_type:o},f=Object.assign({},c);return{data:{properties:h,user:f},error:null}}function dy(n){return n}function AA(n){return n.access_token&&n.refresh_token&&n.expires_in}const Gh=["global","local","others"];class CA{constructor({url:t="",headers:i={},fetch:r}){this.url=t,this.headers=i,this.fetch=i_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,i=Gh[0]){if(Gh.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gh.join(", ")}`);try{return await ft(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,i={}){try{return await ft(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:js})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:i}=t,r=No(t,["options"]),l=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(l.new_email=r==null?void 0:r.newEmail,delete l.newEmail),await ft(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:EA,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(ct(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(t){try{return await ft(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:js})}catch(i){if(ct(i))return{data:{user:null},error:i};throw i}}async listUsers(t){var i,r,l,o,c,h,f;try{const p={nextPage:null,lastPage:0,total:0},g=await ft(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=t==null?void 0:t.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(o=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&o!==void 0?o:""},xform:dy});if(g.error)throw g.error;const y=await g.json(),b=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);p[`${T}Page`]=A}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ct(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){er(t);try{return await ft(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:js})}catch(i){if(ct(i))return{data:{user:null},error:i};throw i}}async updateUserById(t,i){er(t);try{return await ft(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:i,headers:this.headers,xform:js})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,i=!1){er(t);try{return await ft(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:i},xform:js})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){er(t.userId);try{const{data:i,error:r}=await ft(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:i,error:r}}catch(i){if(ct(i))return{data:null,error:i};throw i}}async _deleteFactor(t){er(t.userId),er(t.id);try{return{data:await ft(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(i){if(ct(i))return{data:null,error:i};throw i}}async _listOAuthClients(t){var i,r,l,o,c,h,f;try{const p={nextPage:null,lastPage:0,total:0},g=await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=t==null?void 0:t.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(o=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&o!==void 0?o:""},xform:dy});if(g.error)throw g.error;const y=await g.json(),b=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);p[`${T}Page`]=A}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ct(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async _getOAuthClient(t){try{return await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async _updateOAuthClient(t,i){try{return await ft(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ct(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ft(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ct(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(t){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ct(i))return{data:null,error:i};throw i}}}function fy(n={}){return{getItem:t=>n[t]||null,setItem:(t,i)=>{n[t]=i},removeItem:t=>{delete n[t]}}}const ir={debug:!!(globalThis&&e_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class s_ extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class MA extends s_{}async function RA(n,t,i){ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ir.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,l.name);try{return await i()}finally{ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,l.name)}}else{if(t===0)throw ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new MA(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ir.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function OA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function n_(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function kA(n){return parseInt(n,16)}function NA(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function jA(n){var t;const{chainId:i,domain:r,expirationTime:l,issuedAt:o=new Date,nonce:c,notBefore:h,requestId:f,resources:p,scheme:g,uri:y,version:b}=n;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const _=n_(n.address),S=g?`${g}://${r}`:r,A=n.statement?`${n.statement}
`:"",T=`${S} wants you to sign in with your Ethereum account:
${_}

${A}`;let R=`URI: ${y}
Version: ${b}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(l&&(R+=`
Expiration Time: ${l.toISOString()}`),h&&(R+=`
Not Before: ${h.toISOString()}`),f&&(R+=`
Request ID: ${f}`),p){let M=`
Resources:`;for(const k of p){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);M+=`
- ${k}`}R+=M}return`${T}
${R}`}class ue extends Error{constructor({message:t,code:i,cause:r,name:l}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=l??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=i}}class Co extends ue{constructor(t,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:t}),this.name="WebAuthnUnknownError",this.originalError=i}}function DA({error:n,options:t}){var i,r,l;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ue({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ue({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ue({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((l=o.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new ue({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ue({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ue({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ue({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ue({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(r_(c)){if(o.rp.id!==c)return new ue({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ue({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function UA({error:n,options:t}){const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ue({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ue({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(r_(r)){if(i.rpId!==r)return new ue({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class zA{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const BA=new zA;function PA(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:i,excludeCredentials:r}=n,l=No(n,["challenge","user","excludeCredentials"]),o=cr(t).buffer,c=Object.assign(Object.assign({},i),{id:cr(i.id).buffer}),h=Object.assign(Object.assign({},l),{challenge:o,user:c});if(r&&r.length>0){h.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const p=r[f];h.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:cr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function LA(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:i}=n,r=No(n,["challenge","allowCredentials"]),l=cr(t).buffer,o=Object.assign(Object.assign({},r),{challenge:l});if(i&&i.length>0){o.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];o.allowCredentials[c]=Object.assign(Object.assign({},h),{id:cr(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return o}function GA(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n;return{id:n.id,rawId:n.id,response:{attestationObject:hn(new Uint8Array(n.response.attestationObject)),clientDataJSON:hn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=i.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qA(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n,r=n.getClientExtensionResults(),l=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:hn(new Uint8Array(l.authenticatorData)),clientDataJSON:hn(new Uint8Array(l.clientDataJSON)),signature:hn(new Uint8Array(l.signature)),userHandle:l.userHandle?hn(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=i.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function r_(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function my(){var n,t;return!!(Ae()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function HA(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Co("Browser returned unexpected credential type",t)}:{data:null,error:new Co("Empty credential response",t)}}catch(t){return{data:null,error:DA({error:t,options:n})}}}async function $A(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Co("Browser returned unexpected credential type",t)}:{data:null,error:new Co("Empty credential response",t)}}catch(t){return{data:null,error:UA({error:t,options:n})}}}const IA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},YA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Mo(...n){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),i=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),r={};for(const l of n)if(l)for(const o in l){const c=l[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(i(c))r[o]=c;else if(t(c)){const h=r[o];t(h)?r[o]=Mo(h,c):r[o]=Mo(c)}else r[o]=c}return r}function VA(n,t){return Mo(IA,n,t||{})}function FA(n,t){return Mo(YA,n,t||{})}class XA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:i,friendlyName:r,signal:l},o){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:t,webauthn:i});if(!c)return{data:null,error:h};const f=l??BA.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=VA(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:g,error:y}=await HA({publicKey:p,signal:f});return g?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=FA(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:g,error:y}=await $A(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:f}));return g?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(c){return ct(c)?{data:null,error:c}:{data:null,error:new cn("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:i,webauthn:r}){return this.client.mfa.verify({factorId:i,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},o){if(!i)return{data:null,error:new Na("rpId is required for WebAuthn authentication")};try{if(!my())return{data:null,error:new cn("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:t,webauthn:{rpId:i,rpOrigins:r},signal:l},{request:o});if(!c)return{data:null,error:h};const{webauthn:f}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:f.type,rpId:i,rpOrigins:r,credential_response:f.credential_response}})}catch(c){return ct(c)?{data:null,error:c}:{data:null,error:new cn("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},o){if(!i)return{data:null,error:new Na("rpId is required for WebAuthn registration")};try{if(!my())return{data:null,error:new cn("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:h};const{data:f,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:l},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:i,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(c){return ct(c)?{data:null,error:c}:{data:null,error:new cn("Unexpected error in register",c)}}}}OA();const KA={url:IE,storageKey:YE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:VE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function py(n,t,i){return await i()}const sr={};class ja{get jwks(){var t,i;return(i=(t=sr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(t){sr[this.storageKey]=Object.assign(Object.assign({},sr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,i;return(i=(t=sr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){sr[this.storageKey]=Object.assign(Object.assign({},sr[this.storageKey]),{cachedAt:t})}constructor(t){var i,r,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},KA),t);if(this.storageKey=o.storageKey,this.instanceID=(i=ja.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,ja.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Ae()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new CA({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=i_(o.fetch),this.lock=o.lock||py,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Ae()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=RA:this.lock=py,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new XA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:e_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fy(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=fy(this.memoryStorage)),Ae()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zv}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let i={},r="none";if(Ae()&&(i=lA(window.location.href),this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce")),Ae()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:o}=await this._getSessionFromURL(i,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ZE(o)){const f=(t=o.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:c,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ct(i)?this._returnResult({error:i}):this._returnResult({error:new cn("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var i,r,l;try{const o=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:bi}),{data:c,error:h}=o;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(o){if(ct(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var i,r,l;try{let o;if("email"in t){const{email:g,password:y,options:b}=t;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await tr(this.storage,this.storageKey)),o=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:g,password:y,data:(i=b==null?void 0:b.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:_,code_challenge_method:S},xform:bi})}else if("phone"in t){const{phone:g,password:y,options:b}=t;o=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(l=b==null?void 0:b.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:bi})}else throw new _o("You must provide either an email or phone number and a password");const{data:c,error:h}=o;if(h||!c)return await Ee(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(o){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),ct(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let i;if("email"in t){const{email:o,password:c,options:h}=t;i=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:hy})}else if("phone"in t){const{phone:o,password:c,options:h}=t;i=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:hy})}else throw new _o("You must provide either an email or phone number and a password");const{data:r,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!r||!r.session||!r.user){const o=new Jn;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(i){if(ct(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(t){var i,r,l,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:i}=t;switch(i){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(t){var i,r,l,o,c,h,f,p,g,y,b;let _,S;if("message"in t)_=t.message,S=t.signature;else{const{chain:A,wallet:T,statement:R,options:M}=t;let k;if(Ae())if(typeof T=="object")k=T;else{const lt=window;if("ethereum"in lt&&typeof lt.ethereum=="object"&&"request"in lt.ethereum&&typeof lt.ethereum.request=="function")k=lt.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=T}const H=new URL((i=M==null?void 0:M.url)!==null&&i!==void 0?i:window.location.href),X=await k.request({method:"eth_requestAccounts"}).then(lt=>lt).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!X||X.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=n_(X[0]);let L=(r=M==null?void 0:M.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const lt=await k.request({method:"eth_chainId"});L=kA(lt)}const st={domain:H.host,address:P,statement:R,uri:H.href,version:"1",chainId:L,nonce:(l=M==null?void 0:M.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(c=(o=M==null?void 0:M.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=M==null?void 0:M.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(f=M==null?void 0:M.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=M==null?void 0:M.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=M==null?void 0:M.signInWithEthereum)===null||g===void 0?void 0:g.resources};_=jA(st),S=await k.request({method:"personal_sign",params:[NA(_),P]})}try{const{data:A,error:T}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:S},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:bi});if(T)throw T;if(!A||!A.session||!A.user){const R=new Jn;return this._returnResult({data:{user:null,session:null},error:R})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:T})}catch(A){if(ct(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(t){var i,r,l,o,c,h,f,p,g,y,b,_;let S,A;if("message"in t)S=t.message,A=t.signature;else{const{chain:T,wallet:R,statement:M,options:k}=t;let H;if(Ae())if(typeof R=="object")H=R;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))H=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=R}const X=new URL((i=k==null?void 0:k.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in H&&H.signIn){const P=await H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),M?{statement:M}:null));let L;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")L=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)L=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)S=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),A=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in H)||typeof H.signMessage!="function"||!("publicKey"in H)||typeof H!="object"||!H.publicKey||!("toBase58"in H.publicKey)||typeof H.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${X.host} wants you to sign in with your Solana account:`,H.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(l=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k==null?void 0:k.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((y=(g=k==null?void 0:k.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...k.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const P=await H.signMessage(new TextEncoder().encode(S),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=P}}try{const{data:T,error:R}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:hn(A)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:bi});if(R)throw R;if(!T||!T.session||!T.user){const M=new Jn;return this._returnResult({data:{user:null,session:null},error:M})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:R})}catch(T){if(ct(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(t){const i=await sn(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(i??"").split("/");try{if(!r&&this.flowType==="pkce")throw new JE;const{data:o,error:c}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:bi});if(await Ee(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const h=new Jn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:l??null}),error:c})}catch(o){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),ct(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:i,provider:r,token:l,access_token:o,nonce:c}=t,h=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:bi}),{data:f,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const g=new Jn;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:p})}catch(i){if(ct(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(t){var i,r,l,o,c;try{if("email"in t){const{email:h,options:f}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await tr(this.storage,this.storageKey));const{error:y}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:h,options:f}=t,{data:p,error:g}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=f==null?void 0:f.data)!==null&&l!==void 0?l:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g})}throw new _o("You must provide either an email or phone number.")}catch(h){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),ct(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(t){var i,r;try{let l,o;"options"in t&&(l=(i=t.options)===null||i===void 0?void 0:i.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:h}=await ft(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:l,xform:bi});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,p=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(l){if(ct(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(t){var i,r,l,o,c;try{let h=null,f=null;this.flowType==="pkce"&&([h,f]=await tr(this.storage,this.storageKey));const p=await ft(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(i=t.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:f}),headers:this.headers,xform:TA});return!((o=p.data)===null||o===void 0)&&o.url&&Ae()&&!(!((c=t.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),ct(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;if(r)throw r;if(!i)throw new ti;const{error:l}=await ft(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(t){if(ct(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const i=`${this.url}/resend`;if("email"in t){const{email:r,type:l,options:o}=t,{error:c}=await ft(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in t){const{phone:r,type:l,options:o}=t,{data:c,error:h}=await ft(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new _o("You must provide either an email or phone number and a type")}catch(i){if(ct(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(t,i){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await t(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const i=await sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?t=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<zh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const c=await sn(this.userStorage,this.storageKey+"-user");c!=null&&c.user?t.user=c.user:t.user=Lh()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};t.user=bA(t.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(t){try{return t?await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:js}):await this._useSession(async i=>{var r,l,o;const{data:c,error:h}=i;if(h)throw h;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ti}:await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0,xform:js})})}catch(i){if(ct(i))return QE(i)&&(await this._removeSession(),await Ee(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(t,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,i))}async _updateUser(t,i={}){try{return await this._useSession(async r=>{const{data:l,error:o}=r;if(o)throw o;if(!l.session)throw new ti;const c=l.session;let h=null,f=null;this.flowType==="pkce"&&t.email!=null&&([h,f]=await tr(this.storage,this.storageKey));const{data:p,error:g}=await ft(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:f}),jwt:c.access_token,xform:js});if(g)throw g;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),ct(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ti;const i=Date.now()/1e3;let r=i,l=!0,o=null;const{payload:c}=Ph(t.access_token);if(c.exp&&(r=c.exp,l=r<=i),l){const{data:h,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:f}=await this._getUser(t.access_token);if(f)throw f;o={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(i){if(ct(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async i=>{var r;if(!t){const{data:c,error:h}=i;if(h)throw h;t=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ti;const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ct(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(t,i){try{if(!Ae())throw new bo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new ny("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bo("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ny("No code detected.");const{data:M,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:o,refresh_token:c,expires_in:h,expires_at:f,token_type:p}=t;if(!o||!h||!c||!p)throw new bo("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(h);let b=g+y;f&&(b=parseInt(f));const _=b-g;_*1e3<=lr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${y}s`);const S=b-y;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,b,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,b,g);const{data:A,error:T}=await this._getUser(o);if(T)throw T;const R={provider_token:r,provider_refresh_token:l,access_token:o,expires_in:y,expires_at:b,refresh_token:c,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:t.type},error:null})}catch(r){if(ct(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const i=await sn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&i)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:l,error:o}=i;if(o)return this._returnResult({error:o});const c=(r=l.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:h}=await this.admin.signOut(c,t);if(h&&!(WE(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return t!=="others"&&(await this._removeSession(),await Ee(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const i=aA(),r={id:i,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async i=>{var r,l;try{const{data:{session:o},error:c}=i;if(c)throw c;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,i={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await tr(this.storage,this.storageKey,!0));try{return await ft(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(o){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),ct(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=i.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var i;try{const{data:r,error:l}=await this._useSession(async o=>{var c,h,f,p,g;const{data:y,error:b}=o;if(b)throw b;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ft(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return Ae()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ct(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async i=>{var r;try{const{error:l,data:{session:o}}=i;if(l)throw l;const{options:c,provider:h,token:f,access_token:p,nonce:g}=t,y=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:h,id_token:f,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:bi}),{data:b,error:_}=y;return _?this._returnResult({data:{user:null,session:null},error:_}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Jn}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:_}))}catch(l){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),ct(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(t){try{return await this._useSession(async i=>{var r,l;const{data:o,error:c}=i;if(c)throw c;return await ft(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(t){const i=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await cA(async l=>(l>0&&await uA(200*Math.pow(2,l-1)),this._debug(i,"refreshing attempt",l),await ft(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bi})),(l,o)=>{const c=200*Math.pow(2,l);return o&&Bh(o)&&Date.now()+c-r<lr})}catch(r){if(this._debug(i,"error",r),ct(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(i,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",i,"url",r),Ae()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const l=await sn(this.storage,this.storageKey);if(l&&this.userStorage){let c=await sn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:l.user},await or(this.userStorage,this.storageKey+"-user",c)),l.user=(t=c==null?void 0:c.user)!==null&&t!==void 0?t:Lh()}else if(l&&!l.user&&!l.user){const c=await sn(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(l.user=c.user,await Ee(this.storage,this.storageKey+"-user"),await or(this.storage,this.storageKey,l)):l.user=Lh()}if(this._debug(r,"session from storage",l),!this._isValidSession(l)){this._debug(r,"session is not valid"),l!==null&&await this._removeSession();return}const o=((i=l.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<zh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${zh}s`),o){if(this.autoRefreshToken&&l.refresh_token){const{error:c}=await this._callRefreshToken(l.refresh_token);c&&(console.error(c),Bh(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(l.access_token);!h&&(c!=null&&c.user)?(l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(r,"error",l),console.error(l);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var i,r;if(!t)throw new ti;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Do;const{data:o,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!o.session)throw new ti;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={data:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(l,"error",o),ct(o)){const c={data:null,error:o};return Bh(o)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,i,r=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:i});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,i)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ee(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},t),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await or(this.userStorage,this.storageKey+"-user",{user:i.user});const l=Object.assign({},i);delete l.user;const o=uy(l);await or(this.storage,this.storageKey,o)}else{const l=uy(i);await or(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ee(this.storage,this.storageKey),await Ee(this.storage,this.storageKey+"-code-verifier"),await Ee(this.storage,this.storageKey+"-user"),this.userStorage&&await Ee(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ae()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),lr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-t)/lr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${lr}ms, refresh threshold is ${hd} ticks`),l<=hd&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof s_)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ae()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const i=`#_onVisibilityChanged(${t})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,i,r){const l=[`provider=${encodeURIComponent(i)}`];if(r!=null&&r.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await tr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});l.push(h.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);l.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async i=>{var r;const{data:l,error:o}=i;return o?this._returnResult({data:null,error:o}):await ft(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(t){try{return await this._useSession(async i=>{var r,l;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:p}=await ft(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&f.type==="totp"&&(!((l=f==null?void 0:f.totp)===null||l===void 0)&&l.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:l,error:o}=i;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?GA(t.webauthn.credential_response):qA(t.webauthn.credential_response)})}:{code:t.code}),{data:h,error:f}=await ft(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:f}))})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:l,error:o}=i;if(o)return this._returnResult({data:null,error:o});const c=await ft(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:PA(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:LA(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(t){const{data:i,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:i.id,code:t.code})}async _listFactors(){var t;const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const l={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=i==null?void 0:i.factors)!==null&&t!==void 0?t:[])l.all.push(o),o.status==="verified"&&l[o.factor_type].push(o);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var t,i;const{data:{session:r},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ph(r.access_token);let c=null;o.aal&&(c=o.aal);let h=c;((i=(t=r.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const p=o.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async i=>{const{data:{session:r},error:l}=i;return l?this._returnResult({data:null,error:l}):r?await ft(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new ti})})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(t,i){try{return await this._useSession(async r=>{const{data:{session:l},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!l)return this._returnResult({data:null,error:new ti});const c=await ft(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&Ae()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ct(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,i){try{return await this._useSession(async r=>{const{data:{session:l},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!l)return this._returnResult({data:null,error:new ti});const c=await ft(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&Ae()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ct(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;return r?this._returnResult({data:null,error:r}):i?await ft(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new ti})})}catch(t){if(ct(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async i=>{const{data:{session:r},error:l}=i;return l?this._returnResult({data:null,error:l}):r?(await ft(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ti})})}catch(i){if(ct(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(t,i={keys:[]}){let r=i.keys.find(h=>h.kid===t);if(r)return r;const l=Date.now();if(r=this.jwks.keys.find(h=>h.kid===t),r&&this.jwks_cached_at+XE>l)return r;const{data:o,error:c}=await ft(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=l,r=o.keys.find(h=>h.kid===t),!r)?null:r}async getClaims(t,i={}){try{let r=t;if(!r){const{data:_,error:S}=await this.getSession();if(S||!_.session)return this._returnResult({data:null,error:S});r=_.session.access_token}const{header:l,payload:o,signature:c,raw:{header:h,payload:f}}=Ph(r);i!=null&&i.allowExpired||yA(o.exp);const p=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:o,header:l,signature:c},error:null}}const g=vA(l.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,c,nA(`${h}.${f}`)))throw new md("Invalid JWT signature");return{data:{claims:o,header:l,signature:c},error:null}}catch(r){if(ct(r))return this._returnResult({data:null,error:r});throw r}}}ja.nextInstanceID={};const WA=ja,QA="2.90.1";let ba="";typeof Deno<"u"?ba="deno":typeof document<"u"?ba="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ba="react-native":ba="node";const ZA={"X-Client-Info":`supabase-js-${ba}/${QA}`},JA={headers:ZA},t2={schema:"public"},e2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i2={};function Da(n){"@babel/helpers - typeof";return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(n)}function s2(n,t){if(Da(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,t);if(Da(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function n2(n){var t=s2(n,"string");return Da(t)=="symbol"?t:t+""}function r2(n,t,i){return(t=n2(t))in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function gy(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,r)}return i}function te(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?gy(Object(i),!0).forEach(function(r){r2(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gy(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}const a2=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),l2=()=>Headers,o2=(n,t,i)=>{const r=a2(i),l=l2();return async(o,c)=>{var h;const f=(h=await t())!==null&&h!==void 0?h:n;let p=new l(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),r(o,te(te({},c),{},{headers:p}))}};function u2(n){return n.endsWith("/")?n:n+"/"}function c2(n,t){var i,r;const{db:l,auth:o,realtime:c,global:h}=n,{db:f,auth:p,realtime:g,global:y}=t,b={db:te(te({},f),l),auth:te(te({},p),o),realtime:te(te({},g),c),storage:{},global:te(te(te({},y),h),{},{headers:te(te({},(i=y==null?void 0:y.headers)!==null&&i!==void 0?i:{}),(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function h2(n){const t=n==null?void 0:n.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(u2(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var d2=class extends WA{constructor(n){super(n)}},f2=class{constructor(n,t,i){var r,l;this.supabaseUrl=n,this.supabaseKey=t;const o=h2(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,h={db:t2,realtime:i2,auth:te(te({},e2),{},{storageKey:c}),global:JA},f=c2(i??{},h);if(this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=f.global.headers)!==null&&l!==void 0?l:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=f.auth)!==null&&p!==void 0?p:{},this.headers,f.global.fetch)}this.fetch=o2(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(te({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new VT(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new $E(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new qT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,i)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,i;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(t=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:l,storageKey:o,flowType:c,lock:h,debug:f,throwOnError:p},g,y){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d2({url:this.authUrl.href,headers:te(te({},b),g),storageKey:o,autoRefreshToken:n,persistSession:t,detectSessionInUrl:i,storage:r,userStorage:l,flowType:c,lock:h,debug:f,throwOnError:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new uE(this.realtimeUrl.href,te(te({},n),{},{params:te(te({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(n,t,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const m2=(n,t,i)=>new f2(n,t,i);function p2(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const t=n.version;if(t==null)return!1;const i=t.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}p2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const g2=void 0,y2=void 0;throw console.error("Supabase URL or Anon Key is missing. Please check your .env.local file."),new Error("Supabase URL or Anon Key is missing.");const a_=m2(g2,y2),yy=async(n=50)=>{try{const{data:t,error:i}=await a_.from("leaderboard").select("*").order("score",{ascending:!1}).limit(n);return i?(console.error("Error fetching leaderboard:",i),[]):t.map(r=>({name:r.name,score:r.score,timePlayed:r.time_played,maxTier:r.max_tier,date:r.created_at}))}catch(t){return console.error("Unexpected error fetching leaderboard:",t),[]}},l_=async n=>{try{const{error:t}=await a_.from("leaderboard").insert([{name:n.name,score:n.score,time_played:n.timePlayed,max_tier:n.maxTier,created_at:n.date}]);return t?(console.warn("Error submitting score to Supabase:",t.message),!1):!0}catch(t){return console.warn("Network error or Supabase not configured:",t),!1}},v2=async n=>{if(n.length===0)return[];const t=[];for(const i of n)await l_(i)||t.push(i);return t},_2=()=>{const[n,t]=Nt.useState(ks.START),[i,r]=Nt.useState(sd()),[l,o]=Nt.useState(0),[c,h]=Nt.useState(null),[f,p]=Nt.useState(!1),[g,y]=Nt.useState([]),b=async()=>{if(i.pendingScores&&i.pendingScores.length>0){const k=await v2(i.pendingScores);k.length!==i.pendingScores.length&&(pa({pendingScores:k}),r(H=>({...H,pendingScores:k})))}const M=await yy();y(M)};Nt.useEffect(()=>(r(sd()),b(),window.addEventListener("online",b),()=>window.removeEventListener("online",b)),[]);const _=M=>{pa({lastDifficulty:M}),r(k=>({...k,lastDifficulty:M})),o(0),t(ks.PLAYING)},S=M=>{const H=[...i.settings.showLocalOnly?i.leaderboard||[]:g].sort((lt,nt)=>nt.score-lt.score),X=10;let P=!1;if(M.score>0)if(H.length<X)P=!0;else{const lt=H[X-1].score;M.score>lt&&(P=!0)}const L=i.lastDifficulty,st=i.highScores[L]||0;if(M.score>st){const lt={...i.highScores,[L]:M.score};pa({highScores:lt}),r(nt=>({...nt,highScores:lt}))}p(P),h(M),t(ks.GAME_OVER)},A=async M=>{if(!c)return;const k={name:M,score:c.score,timePlayed:c.timePlayed,maxTier:c.maxTier,date:new Date().toISOString()},X=[...i.leaderboard||[],k].sort((st,lt)=>lt.score-st.score),P=[...i.pendingScores||[]];if(!await l_(k))P.push(k);else{const st=await yy();y(st)}pa({leaderboard:X,pendingScores:P}),r(st=>({...st,leaderboard:X,pendingScores:P}))},T=M=>{pa({settings:M}),r(k=>({...k,settings:M}))},R=i.settings.showLocalOnly?i.leaderboard||[]:g;return j.jsxs("div",{className:"relative w-full h-full bg-gray-900 flex items-center justify-center overflow-hidden font-sans select-none",children:[j.jsx("div",{className:"absolute inset-0 bg-yellow-100 opacity-5",children:j.jsx("div",{className:"w-full h-full",style:{backgroundImage:"radial-gradient(#000 1px, transparent 1px)",backgroundSize:"20px 20px"}})}),j.jsxs("div",{className:"relative w-full max-w-[600px] h-full max-h-[95vh] aspect-[2/3] bg-white shadow-2xl rounded-xl overflow-hidden ring-8 ring-black/10 flex flex-col",children:[n===ks.START&&j.jsx(uw,{onStart:_,leaderboard:R,settings:i.settings,onUpdateSettings:T}),n===ks.PLAYING&&j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:"absolute top-6 left-6 z-20 pointer-events-none flex flex-col items-start font-['Fredoka']",children:[j.jsx("div",{className:"text-sm text-gray-400 font-bold mb-1 tracking-widest drop-shadow-sm",style:{WebkitTextStroke:"0.5px white"},children:"SCORE"}),j.jsx("div",{className:"text-5xl font-black text-white drop-shadow-md tracking-wide",style:{WebkitTextStroke:"2px #4B5563",textShadow:"3px 3px 0px rgba(0,0,0,0.2)"},children:l.toLocaleString()})]}),j.jsx(BT,{difficulty:i.lastDifficulty,settings:i.settings,onUpdateSettings:T,leaderboard:R,onGameOver:S,setScore:o})]}),n===ks.GAME_OVER&&c&&j.jsx(mw,{stats:c,isNewHigh:f,leaderboard:R,onRestart:()=>_(i.lastDifficulty),onMenu:()=>t(ks.START),onSaveScore:A})]})]})},o_=document.getElementById("root");if(!o_)throw new Error("Could not find root element to mount to");const b2=Hx.createRoot(o_);b2.render(j.jsx(Dx.StrictMode,{children:j.jsx(_2,{})}));export{xv as $,bv as A,Ge as B,ne as C,Us as D,Pt as E,ji as F,Oo as G,r1 as H,lg as I,fr as J,k1 as K,G1 as L,Ut as M,fe as N,Ce as O,Re as P,I1 as Q,Kh as R,uS as S,oo as T,Vh as U,ug as V,mh as W,hg as X,o1 as Y,ni as Z,Iy as _,ns as a,ee as a0,de as a1,K1 as a2,pS as a3,DS as a4,zS as a5,qS as a6,$S as a7,IS as a8,ma as a9,_a as aa,$g as ab,W1 as ac,Q1 as ad,_d as ae,rr as af,dr as ag,zv as ah,Tg as ai,wg as aj,Ow as ak,ki as al,Nw as am,Lv as an,Ca as b,wo as c,bd as d,Di as e,Sg as f,aS as g,yv as h,ev as i,Ui as j,gv as k,jS as l,US as m,Kp as n,LS as o,HS as p,Av as q,Yw as r,xd as s,It as t,dv as u,kw as v,Ni as w,VS as x,ss as y,qy as z};
